Index: cacao/cacao/src/vm/jit/arm/md-atomic.hpp
===================================================================
--- cacao.orig/cacao/src/vm/jit/arm/md-atomic.hpp	2011-03-04 22:44:20.000000000 +0100
+++ cacao/cacao/src/vm/jit/arm/md-atomic.hpp	2011-03-04 23:02:52.000000000 +0100
@@ -63,13 +63,21 @@
 	return Atomic::generic_compare_and_swap(p, oldval, newval);
 }
 
+/**
+ * ARM Kernel helper for memory barrier.
+ * Using __asm __volatile ("":::"memory") does not work reliable on ARM
+ * and gcc __sync_synchronize(); implementation does not use the kernel
+ * helper for all gcc versions so it is unreliable to use as well.
+ */
+typedef void (__kernel_dmb_t) (void);
+#define __kernel_dmb (*(__kernel_dmb_t *) 0xffff0fa0)
 
 /**
  * A memory barrier.
  */
 inline void memory_barrier(void)
 {
-	__asm__ __volatile__ ("" : : : "memory");
+	__kernel_dmb();
 }
 
 
@@ -78,7 +86,7 @@
  */
 inline void write_memory_barrier(void)
 {
-	__asm__ __volatile__ ("" : : : "memory");
+	__kernel_dmb();
 }
 
 
@@ -87,7 +95,7 @@
  */
 inline void instruction_barrier(void)
 {
-	__asm__ __volatile__ ("" : : : "memory");
+	__kernel_dmb();
 }
 
 }
