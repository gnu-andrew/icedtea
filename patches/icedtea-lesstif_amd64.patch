--- openjdk/j2se/src/solaris/classes/sun/awt/X11/generator/WrapperGenerator.java~	2007-09-01 12:47:07.000000000 +0200
+++ openjdk/j2se/src/solaris/classes/sun/awt/X11/generator/WrapperGenerator.java	2007-09-01 13:38:52.000000000 +0200
@@ -1137,12 +1137,25 @@ public class WrapperGenerator {
 
             pw.println("/* This file is an automatically generated file, please do not edit this file, modify the XlibParser.java file instead !*/\n" );
             pw.println("#include <X11/Xlib.h>\n#include <X11/Xutil.h>\n#include <X11/Xos.h>\n#include <X11/Xatom.h>\n#include <stdio.h>\n");
-            pw.println("#include <Xm/MwmUtil.h>");
             pw.println("#include <X11/extensions/Xdbe.h>");
             pw.println("#include \"awt_p.h\"");
             pw.println("#include \"color.h\"");
             pw.println("#include \"colordata.h\"");
 
+            pw.println("\n/* the struct below was copied from MwmUtil.h to workaround a lesstif bug:");
+            pw.println("   http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6586752 */");
+            pw.println("\ntypedef struct PROPMOTIFWMHINTS {");
+            pw.println("/* 32-bit property items are stored as long on the client (whether");
+            pw.println(" * that means 32 bits or 64).  XChangeProperty handles the conversion");
+            pw.println(" * to the actual 32-bit quantities sent to the server.");
+            pw.println(" */");
+            pw.println("    unsigned long   flags;");
+            pw.println("    unsigned long   functions;");
+            pw.println("    unsigned long   decorations;");
+            pw.println("    long            inputMode;");
+            pw.println("    unsigned long   status;");
+            pw.println("} PropMwmHints;");
+
             pw.println("\n\nint main(){");
             j=0;
             for ( eo = symbolTable.elements() ; eo.hasMoreElements() ;) {
