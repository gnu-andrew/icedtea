diff -ruNb openjdk6/hotspot/src/share/tools/MakeDeps/BuildConfig.java openjdk/hotspot/src/share/tools/MakeDeps/BuildConfig.java
--- openjdk6/hotspot/src/share/tools/MakeDeps/BuildConfig.java	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/tools/MakeDeps/BuildConfig.java	2008-12-05 16:41:21.727631421 +0100
@@ -704,6 +704,3 @@
 	receiver.add(attr); receiver.add(value); 
     }
 }
-
-
-
diff -ruNb openjdk6/hotspot/src/share/tools/MakeDeps/Macro.java openjdk/hotspot/src/share/tools/MakeDeps/Macro.java
--- openjdk6/hotspot/src/share/tools/MakeDeps/Macro.java	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/tools/MakeDeps/Macro.java	2008-12-05 16:41:21.727631421 +0100
@@ -26,4 +26,3 @@
     public String name;
     public String contents;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/adlc.hpp openjdk/hotspot/src/share/vm/adlc/adlc.hpp
--- openjdk6/hotspot/src/share/vm/adlc/adlc.hpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/adlc.hpp	2008-12-05 16:41:21.737631572 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)adlc.hpp	1.28 07/05/05 17:04:59 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/adlparse.cpp openjdk/hotspot/src/share/vm/adlc/adlparse.cpp
--- openjdk6/hotspot/src/share/vm/adlc/adlparse.cpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/adlparse.cpp	2008-12-05 16:41:21.737631572 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)adlparse.cpp	1.205 07/05/05 17:05:00 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/adlparse.hpp openjdk/hotspot/src/share/vm/adlc/adlparse.hpp
--- openjdk6/hotspot/src/share/vm/adlc/adlparse.hpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/adlparse.hpp	2008-12-05 16:41:21.737631572 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)adlparse.hpp	1.79 07/05/05 17:05:00 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -273,5 +270,3 @@
   static bool is_int_token(const char* token, int& intval);
   static void trim(char* &token);  // trim leading & trailing spaces
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/archDesc.cpp openjdk/hotspot/src/share/vm/adlc/archDesc.cpp
--- openjdk6/hotspot/src/share/vm/adlc/archDesc.cpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/archDesc.cpp	2008-12-05 16:41:21.737631572 +0100
@@ -22,6 +22,7 @@
 //  
 //
 
+
 // archDesc.cpp - Internal format for architecture definition
 #include "adlc.hpp"
 
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/arena.cpp openjdk/hotspot/src/share/vm/adlc/arena.cpp
--- openjdk6/hotspot/src/share/vm/adlc/arena.cpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/arena.cpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)arena.cpp	1.16 07/05/05 17:05:00 JVM"
-#endif
 /*
  * Copyright 1998-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -173,4 +170,3 @@
 void CHeapObj::operator delete(void* p){
  free(p);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/arena.hpp openjdk/hotspot/src/share/vm/adlc/arena.hpp
--- openjdk6/hotspot/src/share/vm/adlc/arena.hpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/arena.hpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)arena.hpp	1.17 07/05/05 17:05:00 JVM"
-#endif
 /*
  * Copyright 1998-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -158,4 +155,3 @@
   size_t size_in_bytes() const         {  return _size_in_bytes; }
   void   set_size_in_bytes(size_t size)  { _size_in_bytes = size;   }
 }; 
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/dfa.cpp openjdk/hotspot/src/share/vm/adlc/dfa.cpp
--- openjdk6/hotspot/src/share/vm/adlc/dfa.cpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/dfa.cpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)dfa.cpp	1.83 07/05/05 17:04:59 JVM"
-#endif
 /*
  * Copyright 1997-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1022,4 +1019,3 @@
 void ProductionState::print() {
   _production.print(print_key, print_production);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/dict2.cpp openjdk/hotspot/src/share/vm/adlc/dict2.cpp
--- openjdk6/hotspot/src/share/vm/adlc/dict2.cpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/dict2.cpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)dict2.cpp	1.19 07/05/05 17:04:59 JVM"
-#endif
 /*
  * Copyright 1998-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -354,5 +351,3 @@
   }
   _key = _value = NULL;
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/dict2.hpp openjdk/hotspot/src/share/vm/adlc/dict2.hpp
--- openjdk6/hotspot/src/share/vm/adlc/dict2.hpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/dict2.hpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)dict2.hpp	1.16 07/05/05 17:05:01 JVM"
-#endif
 /*
  * Copyright 1998-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -121,5 +118,3 @@
 };
 
 #endif // _DICT_
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/filebuff.cpp openjdk/hotspot/src/share/vm/adlc/filebuff.cpp
--- openjdk6/hotspot/src/share/vm/adlc/filebuff.cpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/filebuff.cpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)filebuff.cpp	1.30 07/05/05 17:05:01 JVM"
-#endif
 /*
  * Copyright 1997-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -297,4 +294,3 @@
   va_end(args);
   _AD._no_output = 1;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/filebuff.hpp openjdk/hotspot/src/share/vm/adlc/filebuff.hpp
--- openjdk6/hotspot/src/share/vm/adlc/filebuff.hpp	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/filebuff.hpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)filebuff.hpp	1.27 07/05/05 17:05:01 JVM"
-#endif
 /*
  * Copyright 1997-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/forms.cpp openjdk/hotspot/src/share/vm/adlc/forms.cpp
--- openjdk6/hotspot/src/share/vm/adlc/forms.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/forms.cpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)forms.cpp	1.161 07/05/05 17:04:59 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -386,4 +383,3 @@
 void SourceForm::output(FILE *fp) {
   fprintf(fp,"\n//%s\n%s\n",classname(),(_code?_code:"")); 
 } 
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/forms.hpp openjdk/hotspot/src/share/vm/adlc/forms.hpp
--- openjdk6/hotspot/src/share/vm/adlc/forms.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/forms.hpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)forms.hpp	1.150 07/05/05 17:05:00 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -587,6 +584,3 @@
   void print_asserts(FILE *fp);
   void dump();
 };
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/formsopt.cpp openjdk/hotspot/src/share/vm/adlc/formsopt.cpp
--- openjdk6/hotspot/src/share/vm/adlc/formsopt.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/formsopt.cpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)formsopt.cpp	1.53 07/05/05 17:05:01 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -725,4 +722,3 @@
 void PeepReplace::output(FILE *fp) {      // Write info to output files
   fprintf(fp,"PeepReplace:\n");
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/formsopt.hpp openjdk/hotspot/src/share/vm/adlc/formsopt.hpp
--- openjdk6/hotspot/src/share/vm/adlc/formsopt.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/formsopt.hpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)formsopt.hpp	1.54 07/05/05 17:05:01 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -549,4 +546,3 @@
   void dump();
   void output(FILE *fp);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/formssel.cpp openjdk/hotspot/src/share/vm/adlc/formssel.cpp
--- openjdk6/hotspot/src/share/vm/adlc/formssel.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/formssel.cpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)formssel.cpp	1.185 07/09/28 10:23:26 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -4000,4 +3997,3 @@
   fprintf(fp,"\nFormat Rule: \n%s", (_temp?_temp:""));
   fprintf(fp,"\n");
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/formssel.hpp openjdk/hotspot/src/share/vm/adlc/formssel.hpp
--- openjdk6/hotspot/src/share/vm/adlc/formssel.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/formssel.hpp	2008-12-05 16:41:21.747631722 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)formssel.hpp	1.77 07/07/19 19:08:28 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/output_c.cpp openjdk/hotspot/src/share/vm/adlc/output_c.cpp
--- openjdk6/hotspot/src/share/vm/adlc/output_c.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/output_c.cpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)output_c.cpp	1.185 07/07/02 16:50:40 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/adlc/output_h.cpp openjdk/hotspot/src/share/vm/adlc/output_h.cpp
--- openjdk6/hotspot/src/share/vm/adlc/output_h.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/adlc/output_h.cpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)output_h.cpp	1.180 07/09/28 10:23:25 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/asm/assembler.cpp openjdk/hotspot/src/share/vm/asm/assembler.cpp
--- openjdk6/hotspot/src/share/vm/asm/assembler.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/asm/assembler.cpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)assembler.cpp	1.41 07/05/05 17:05:03 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/asm/assembler.hpp openjdk/hotspot/src/share/vm/asm/assembler.hpp
--- openjdk6/hotspot/src/share/vm/asm/assembler.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/asm/assembler.hpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)assembler.hpp	1.52 07/05/05 17:05:03 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/asm/assembler.inline.hpp openjdk/hotspot/src/share/vm/asm/assembler.inline.hpp
--- openjdk6/hotspot/src/share/vm/asm/assembler.inline.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/asm/assembler.inline.hpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)assembler.inline.hpp	1.27 07/05/05 17:05:03 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/asm/codeBuffer.cpp openjdk/hotspot/src/share/vm/asm/codeBuffer.cpp
--- openjdk6/hotspot/src/share/vm/asm/codeBuffer.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/asm/codeBuffer.cpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)codeBuffer.cpp	1.100 07/05/05 17:05:03 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/asm/codeBuffer.hpp openjdk/hotspot/src/share/vm/asm/codeBuffer.hpp
--- openjdk6/hotspot/src/share/vm/asm/codeBuffer.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/asm/codeBuffer.hpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)codeBuffer.hpp	1.63 07/05/17 15:49:26 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -543,4 +540,3 @@
   if (remaining() < amount) { _outer->expand(this, amount); return true; }
   return false;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/asm/register.cpp openjdk/hotspot/src/share/vm/asm/register.cpp
--- openjdk6/hotspot/src/share/vm/asm/register.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/asm/register.cpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)register.cpp	1.11 07/05/05 17:05:04 JVM"
-#endif
 /*
  * Copyright 2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/asm/register.hpp openjdk/hotspot/src/share/vm/asm/register.hpp
--- openjdk6/hotspot/src/share/vm/asm/register.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/asm/register.hpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)register.hpp	1.13 07/05/05 17:05:03 JVM"
-#endif
 /*
  * Copyright 2000-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_CFGPrinter.cpp openjdk/hotspot/src/share/vm/c1/c1_CFGPrinter.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_CFGPrinter.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_CFGPrinter.cpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_CFGPrinter.cpp	1.8 07/05/05 17:05:04 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_CFGPrinter.hpp openjdk/hotspot/src/share/vm/c1/c1_CFGPrinter.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_CFGPrinter.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_CFGPrinter.hpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_CFGPrinter.hpp	1.7 07/05/05 17:05:05 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -47,4 +44,3 @@
 };
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Canonicalizer.cpp openjdk/hotspot/src/share/vm/c1/c1_Canonicalizer.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Canonicalizer.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Canonicalizer.cpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_Canonicalizer.cpp	1.57 07/05/05 17:05:05 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Canonicalizer.hpp openjdk/hotspot/src/share/vm/c1/c1_Canonicalizer.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Canonicalizer.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Canonicalizer.hpp	2008-12-05 16:41:21.757631873 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_Canonicalizer.hpp	1.29 07/05/05 17:05:05 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -97,4 +94,3 @@
   virtual void do_ProfileCall    (ProfileCall*     x);
   virtual void do_ProfileCounter (ProfileCounter*  x);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_CodeStubs.hpp openjdk/hotspot/src/share/vm/c1/c1_CodeStubs.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_CodeStubs.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_CodeStubs.hpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_CodeStubs.hpp	1.86 07/05/05 17:05:06 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -485,4 +482,3 @@
   virtual void print_name(outputStream* out) const { out->print("ArrayCopyStub"); }
 #endif // PRODUCT
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Compilation.cpp openjdk/hotspot/src/share/vm/c1/c1_Compilation.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Compilation.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Compilation.cpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_Compilation.cpp	1.160 07/06/18 14:25:23 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Compilation.hpp openjdk/hotspot/src/share/vm/c1/c1_Compilation.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Compilation.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Compilation.hpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_Compilation.hpp	1.88 07/05/17 15:49:31 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Compiler.cpp openjdk/hotspot/src/share/vm/c1/c1_Compiler.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Compiler.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Compiler.cpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_Compiler.cpp	1.105 07/05/05 17:05:06 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -89,5 +86,3 @@
 void Compiler::print_timers() {
   Compilation::print_timers();
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Compiler.hpp openjdk/hotspot/src/share/vm/c1/c1_Compiler.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Compiler.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Compiler.hpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_Compiler.hpp	1.49 07/05/05 17:05:06 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -68,4 +65,3 @@
   // Print compilation timers and statistics
   virtual void print_timers();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Defs.cpp openjdk/hotspot/src/share/vm/c1/c1_Defs.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Defs.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Defs.cpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_Defs.cpp	1.10 07/05/05 17:05:06 JVM"
-#endif
 /*
  * Copyright 2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -27,4 +24,3 @@
 
 #include "incls/_precompiled.incl"
 #include "incls/_c1_Defs.cpp.incl"
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Defs.hpp openjdk/hotspot/src/share/vm/c1/c1_Defs.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Defs.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Defs.hpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_Defs.hpp	1.22 07/05/05 17:05:05 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_FpuStackSim.hpp openjdk/hotspot/src/share/vm/c1/c1_FpuStackSim.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_FpuStackSim.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_FpuStackSim.hpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_FpuStackSim.hpp	1.7 07/05/05 17:05:06 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -30,4 +27,3 @@
 class FpuStackSim;
 
 # include "incls/_c1_FpuStackSim_pd.hpp.incl"  // platform dependent declarations
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_FrameMap.cpp openjdk/hotspot/src/share/vm/c1/c1_FrameMap.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_FrameMap.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_FrameMap.cpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_FrameMap.cpp	1.38 07/06/18 14:25:23 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_FrameMap.hpp openjdk/hotspot/src/share/vm/c1/c1_FrameMap.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_FrameMap.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_FrameMap.hpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_FrameMap.hpp	1.59 07/05/05 17:05:07 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_GraphBuilder.cpp openjdk/hotspot/src/share/vm/c1/c1_GraphBuilder.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_GraphBuilder.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_GraphBuilder.cpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_GraphBuilder.cpp	1.256 07/06/18 14:25:23 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_GraphBuilder.hpp openjdk/hotspot/src/share/vm/c1/c1_GraphBuilder.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_GraphBuilder.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_GraphBuilder.hpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_GraphBuilder.hpp	1.75 07/05/17 15:49:37 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -391,4 +388,3 @@
 
   BlockBegin* start() const                      { return _start; }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_IR.cpp openjdk/hotspot/src/share/vm/c1/c1_IR.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_IR.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_IR.cpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_IR.cpp	1.161 08/11/07 15:47:10 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -577,23 +574,12 @@
     TRACE_LINEAR_SCAN(3, tty->print_cr("backward branch"));
     assert(is_visited(cur), "block must be visisted when block is active");
     assert(parent != NULL, "must have parent");
+    assert(parent->number_of_sux() == 1, "loop end blocks must have one successor (critical edges are split)");
 
     cur->set(BlockBegin::linear_scan_loop_header_flag);
     cur->set(BlockBegin::backward_branch_target_flag);
 
     parent->set(BlockBegin::linear_scan_loop_end_flag);
-
-    // When a loop header is also the start of an exception handler, then the backward branch is
-    // an exception edge. Because such edges are usually critical edges which cannot be split, the
-    // loop must be excluded here from processing.
-    if (cur->is_set(BlockBegin::exception_entry_flag)) {
-      // Make sure that dominators are correct in this weird situation
-      _iterative_dominators = true;
-      return;
-    }
-    assert(parent->number_of_sux() == 1 && parent->sux_at(0) == cur,
-           "loop end blocks must have one successor (critical edges are split)");
-
     _loop_end_blocks.append(parent);
     return;
   }
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_IR.hpp openjdk/hotspot/src/share/vm/c1/c1_IR.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_IR.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_IR.hpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_IR.hpp	1.100 07/05/05 17:05:04 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Instruction.cpp openjdk/hotspot/src/share/vm/c1/c1_Instruction.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Instruction.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Instruction.cpp	2008-12-05 16:41:21.767632024 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_Instruction.cpp	1.90 07/05/05 17:05:05 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Instruction.hpp openjdk/hotspot/src/share/vm/c1/c1_Instruction.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Instruction.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Instruction.hpp	2008-12-05 16:41:21.777632175 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_Instruction.hpp	1.196 07/06/18 14:25:24 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_InstructionPrinter.cpp openjdk/hotspot/src/share/vm/c1/c1_InstructionPrinter.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_InstructionPrinter.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_InstructionPrinter.cpp	2008-12-05 16:41:21.777632175 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_InstructionPrinter.cpp	1.126 07/06/18 14:25:24 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -851,4 +848,3 @@
 
 
 #endif // PRODUCT
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_InstructionPrinter.hpp openjdk/hotspot/src/share/vm/c1/c1_InstructionPrinter.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_InstructionPrinter.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_InstructionPrinter.hpp	2008-12-05 16:41:21.777632175 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_InstructionPrinter.hpp	1.65 07/05/05 17:05:07 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_LIR.cpp openjdk/hotspot/src/share/vm/c1/c1_LIR.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_LIR.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_LIR.cpp	2008-12-05 16:41:21.777632175 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_LIR.cpp	1.119 07/06/18 14:25:24 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_LIR.hpp openjdk/hotspot/src/share/vm/c1/c1_LIR.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_LIR.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_LIR.hpp	2008-12-05 16:41:21.777632175 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_LIR.hpp	1.134 07/06/18 14:25:24 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -2035,4 +2032,3 @@
 
 
 inline LIR_Opr LIR_OprDesc::illegalOpr()   { return LIR_OprFact::illegalOpr; };
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_LIRAssembler.cpp openjdk/hotspot/src/share/vm/c1/c1_LIRAssembler.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_LIRAssembler.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_LIRAssembler.cpp	2008-12-05 16:41:21.777632175 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_LIRAssembler.cpp	1.135 07/07/02 16:50:41 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -795,6 +792,3 @@
   }
 #endif
 }
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_LIRAssembler.hpp openjdk/hotspot/src/share/vm/c1/c1_LIRAssembler.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_LIRAssembler.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_LIRAssembler.hpp	2008-12-05 16:41:21.777632175 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_LIRAssembler.hpp	1.116 07/05/05 17:05:08 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_LIRGenerator.cpp openjdk/hotspot/src/share/vm/c1/c1_LIRGenerator.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_LIRGenerator.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_LIRGenerator.cpp	2008-12-05 16:41:21.777632175 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_LIRGenerator.cpp	1.24 08/11/07 15:47:10 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1222,8 +1219,8 @@
         break;
       case T_LONG:
       case T_DOUBLE:
-        if (c->as_jint_hi_bits() != other->as_jint_hi_bits()) continue;
-        if (c->as_jint_lo_bits() != other->as_jint_lo_bits()) continue;
+        if (c->as_jint_hi_bits() != other->as_jint_lo_bits()) continue;
+        if (c->as_jint_lo_bits() != other->as_jint_hi_bits()) continue;
         break;
       case T_OBJECT:
         if (c->as_jobject() != other->as_jobject()) continue;
@@ -2535,5 +2532,3 @@
   }
 #endif
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_LIRGenerator.hpp openjdk/hotspot/src/share/vm/c1/c1_LIRGenerator.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_LIRGenerator.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_LIRGenerator.hpp	2008-12-05 16:41:21.777632175 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_LIRGenerator.hpp	1.14 07/06/18 14:25:25 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_LinearScan.cpp openjdk/hotspot/src/share/vm/c1/c1_LinearScan.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_LinearScan.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_LinearScan.cpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_LinearScan.cpp	1.14 07/08/14 16:07:30 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_LinearScan.hpp openjdk/hotspot/src/share/vm/c1/c1_LinearScan.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_LinearScan.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_LinearScan.hpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_LinearScan.hpp	1.13 07/08/14 16:07:30 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_MacroAssembler.hpp openjdk/hotspot/src/share/vm/c1/c1_MacroAssembler.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_MacroAssembler.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_MacroAssembler.hpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_MacroAssembler.hpp	1.23 07/05/05 17:05:08 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -83,5 +80,3 @@
   int call_RT(Register oop_result1, Register oop_result2, address entry, Register arg1, Register arg2);
   int call_RT(Register oop_result1, Register oop_result2, address entry, Register arg1, Register arg2, Register arg3);
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Optimizer.cpp openjdk/hotspot/src/share/vm/c1/c1_Optimizer.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Optimizer.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Optimizer.cpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_Optimizer.cpp	1.72 08/11/07 15:47:10 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -330,6 +327,8 @@
                 BlockBegin* fsux = if_->fsux();
                 if (swapped) {
                   cond = Instruction::mirror(cond);
+                  tsux = if_->fsux();
+                  fsux = if_->tsux();
                 }
 
                 BlockBegin* tblock = tval->compare(cond, con, tsux, fsux);
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Optimizer.hpp openjdk/hotspot/src/share/vm/c1/c1_Optimizer.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Optimizer.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Optimizer.hpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_Optimizer.hpp	1.16 07/05/05 17:05:09 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -38,4 +35,3 @@
   void eliminate_blocks();
   void eliminate_null_checks();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Runtime1.cpp openjdk/hotspot/src/share/vm/c1/c1_Runtime1.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Runtime1.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Runtime1.cpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_Runtime1.cpp	1.245 08/11/07 15:47:09 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -858,13 +855,6 @@
     if (TracePatching) {
       tty->print_cr("Deoptimizing for patching volatile field reference");
     }
-    // It's possible the nmethod was invalidated in the last
-    // safepoint, but if it's still alive then make it not_entrant.
-    nmethod* nm = CodeCache::find_nmethod(caller_frame.pc());
-    if (nm != NULL) {
-      nm->make_not_entrant();
-    }
-
     VM_DeoptimizeFrame deopt(thread, caller_frame.id());
     VMThread::execute(&deopt);
 
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_Runtime1.hpp openjdk/hotspot/src/share/vm/c1/c1_Runtime1.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_Runtime1.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_Runtime1.hpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_Runtime1.hpp	1.140 07/05/17 15:49:48 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_ValueMap.cpp openjdk/hotspot/src/share/vm/c1/c1_ValueMap.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_ValueMap.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_ValueMap.cpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_ValueMap.cpp	1.29 07/05/05 17:05:08 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_ValueMap.hpp openjdk/hotspot/src/share/vm/c1/c1_ValueMap.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_ValueMap.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_ValueMap.hpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_ValueMap.hpp	1.22 07/05/05 17:05:07 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_ValueSet.cpp openjdk/hotspot/src/share/vm/c1/c1_ValueSet.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_ValueSet.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_ValueSet.cpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_ValueSet.cpp	1.12 07/05/05 17:05:09 JVM"
-#endif
 /*
  * Copyright 2001-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_ValueSet.hpp openjdk/hotspot/src/share/vm/c1/c1_ValueSet.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_ValueSet.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_ValueSet.hpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_ValueSet.hpp	1.15 07/05/05 17:05:09 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_ValueStack.cpp openjdk/hotspot/src/share/vm/c1/c1_ValueStack.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_ValueStack.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_ValueStack.cpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_ValueStack.cpp	1.65 07/05/05 17:05:09 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -286,4 +283,3 @@
   Unimplemented();
 }
 #endif // PRODUCT
-
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_ValueStack.hpp openjdk/hotspot/src/share/vm/c1/c1_ValueStack.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_ValueStack.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_ValueStack.hpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_ValueStack.hpp	1.51 07/05/05 17:05:10 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_ValueType.cpp openjdk/hotspot/src/share/vm/c1/c1_ValueType.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_ValueType.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_ValueType.cpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_ValueType.cpp	1.22 07/05/05 17:05:10 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_ValueType.hpp openjdk/hotspot/src/share/vm/c1/c1_ValueType.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_ValueType.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_ValueType.hpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_ValueType.hpp	1.35 07/05/05 17:05:10 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_globals.cpp openjdk/hotspot/src/share/vm/c1/c1_globals.cpp
--- openjdk6/hotspot/src/share/vm/c1/c1_globals.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_globals.cpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c1_globals.cpp	1.11 07/05/05 17:05:09 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/c1/c1_globals.hpp openjdk/hotspot/src/share/vm/c1/c1_globals.hpp
--- openjdk6/hotspot/src/share/vm/c1/c1_globals.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/c1/c1_globals.hpp	2008-12-05 16:41:21.787632326 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_globals.hpp	1.104 07/05/05 17:05:10 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -333,4 +330,3 @@
 // #include "incls/_c1_globals_pd.hpp.incl"
 
 C1_FLAGS(DECLARE_DEVELOPER_FLAG, DECLARE_PD_DEVELOPER_FLAG, DECLARE_PRODUCT_FLAG, DECLARE_PD_PRODUCT_FLAG, DECLARE_NOTPRODUCT_FLAG)
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/bcEscapeAnalyzer.cpp openjdk/hotspot/src/share/vm/ci/bcEscapeAnalyzer.cpp
--- openjdk6/hotspot/src/share/vm/ci/bcEscapeAnalyzer.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/bcEscapeAnalyzer.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)bcEscapeAnalyzer.cpp	1.7 07/05/17 15:49:50 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1322,4 +1319,3 @@
     deps->assert_unique_concrete_method(k, m);
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/bcEscapeAnalyzer.hpp openjdk/hotspot/src/share/vm/ci/bcEscapeAnalyzer.hpp
--- openjdk6/hotspot/src/share/vm/ci/bcEscapeAnalyzer.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/bcEscapeAnalyzer.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bcEscapeAnalyzer.hpp	1.6 07/05/05 17:05:11 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciArray.cpp openjdk/hotspot/src/share/vm/ci/ciArray.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciArray.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciArray.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciArray.cpp	1.13 07/09/28 10:23:25 JVM"
-#endif
 /*
  * Copyright 1999-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciArray.hpp openjdk/hotspot/src/share/vm/ci/ciArray.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciArray.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciArray.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciArray.hpp	1.13 07/09/28 10:23:25 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciArrayKlass.cpp openjdk/hotspot/src/share/vm/ci/ciArrayKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciArrayKlass.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciArrayKlass.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciArrayKlass.cpp	1.14 07/05/05 17:05:12 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciArrayKlass.hpp openjdk/hotspot/src/share/vm/ci/ciArrayKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciArrayKlass.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciArrayKlass.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciArrayKlass.hpp	1.15 07/05/05 17:05:12 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciArrayKlassKlass.hpp openjdk/hotspot/src/share/vm/ci/ciArrayKlassKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciArrayKlassKlass.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciArrayKlassKlass.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciArrayKlassKlass.hpp	1.12 07/05/05 17:05:12 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciCallProfile.hpp openjdk/hotspot/src/share/vm/ci/ciCallProfile.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciCallProfile.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciCallProfile.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciCallProfile.hpp	1.17 07/05/05 17:05:12 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciClassList.hpp openjdk/hotspot/src/share/vm/ci/ciClassList.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciClassList.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciClassList.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciClassList.hpp	1.21 07/05/05 17:05:11 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciConstant.cpp openjdk/hotspot/src/share/vm/ci/ciConstant.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciConstant.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciConstant.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciConstant.cpp	1.13 07/05/05 17:05:12 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciConstant.hpp openjdk/hotspot/src/share/vm/ci/ciConstant.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciConstant.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciConstant.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciConstant.hpp	1.18 07/09/28 10:23:25 JVM"
-#endif
 /*
  * Copyright 1999-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -113,4 +110,3 @@
   // Debugging output
   void print();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciConstantPoolCache.cpp openjdk/hotspot/src/share/vm/ci/ciConstantPoolCache.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciConstantPoolCache.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciConstantPoolCache.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciConstantPoolCache.cpp	1.12 07/05/05 17:05:12 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciConstantPoolCache.hpp openjdk/hotspot/src/share/vm/ci/ciConstantPoolCache.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciConstantPoolCache.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciConstantPoolCache.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciConstantPoolCache.hpp	1.11 07/05/05 17:05:11 JVM"
-#endif
 /*
  * Copyright 1999-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -48,4 +45,3 @@
 
   void print();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciEnv.cpp openjdk/hotspot/src/share/vm/ci/ciEnv.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciEnv.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciEnv.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciEnv.cpp	1.128 07/05/17 15:49:53 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciEnv.hpp openjdk/hotspot/src/share/vm/ci/ciEnv.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciEnv.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciEnv.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciEnv.hpp	1.70 07/05/05 17:05:11 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -360,5 +357,3 @@
   void record_method_not_compilable(const char* reason, bool all_tiers = true);
   void record_out_of_memory_failure();
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciExceptionHandler.cpp openjdk/hotspot/src/share/vm/ci/ciExceptionHandler.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciExceptionHandler.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciExceptionHandler.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciExceptionHandler.cpp	1.12 07/05/05 17:05:13 JVM"
-#endif
 /*
  * Copyright 1999-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciExceptionHandler.hpp openjdk/hotspot/src/share/vm/ci/ciExceptionHandler.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciExceptionHandler.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciExceptionHandler.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciExceptionHandler.hpp	1.12 07/05/05 17:05:13 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -76,4 +73,3 @@
 
   void      print();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciField.cpp openjdk/hotspot/src/share/vm/ci/ciField.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciField.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciField.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciField.cpp	1.34 07/08/27 14:10:22 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciField.hpp openjdk/hotspot/src/share/vm/ci/ciField.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciField.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciField.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciField.hpp	1.23 07/09/28 10:23:24 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciFlags.cpp openjdk/hotspot/src/share/vm/ci/ciFlags.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciFlags.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciFlags.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciFlags.cpp	1.12 07/09/28 10:23:24 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciFlags.hpp openjdk/hotspot/src/share/vm/ci/ciFlags.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciFlags.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciFlags.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciFlags.hpp	1.15 07/09/28 10:23:24 JVM"
-#endif
 /*
  * Copyright 1999-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciInstance.cpp openjdk/hotspot/src/share/vm/ci/ciInstance.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciInstance.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciInstance.cpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciInstance.cpp	1.17 07/09/28 10:23:24 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciInstance.hpp openjdk/hotspot/src/share/vm/ci/ciInstance.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciInstance.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciInstance.hpp	2008-12-05 16:41:21.797632477 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciInstance.hpp	1.15 07/09/28 10:23:24 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -62,4 +59,3 @@
   // Constant value of a field at the specified offset.
   ciConstant field_value_by_offset(int field_offset);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciInstanceKlass.cpp openjdk/hotspot/src/share/vm/ci/ciInstanceKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciInstanceKlass.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciInstanceKlass.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciInstanceKlass.cpp	1.45 07/09/28 10:23:23 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciInstanceKlass.hpp openjdk/hotspot/src/share/vm/ci/ciInstanceKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciInstanceKlass.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciInstanceKlass.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciInstanceKlass.hpp	1.36 07/09/28 10:23:23 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -190,4 +187,3 @@
   bool is_instance_klass() { return true; }
   bool is_java_klass()     { return true; }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciInstanceKlassKlass.cpp openjdk/hotspot/src/share/vm/ci/ciInstanceKlassKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciInstanceKlassKlass.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciInstanceKlassKlass.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciInstanceKlassKlass.cpp	1.10 07/05/05 17:05:14 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciInstanceKlassKlass.hpp openjdk/hotspot/src/share/vm/ci/ciInstanceKlassKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciInstanceKlassKlass.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciInstanceKlassKlass.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciInstanceKlassKlass.hpp	1.12 07/05/05 17:05:14 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciKlass.cpp openjdk/hotspot/src/share/vm/ci/ciKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciKlass.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciKlass.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciKlass.cpp	1.31 07/09/28 10:23:23 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -236,4 +233,3 @@
 void ciKlass::print_name_on(outputStream* st) {
   name()->print_symbol_on(st);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciKlass.hpp openjdk/hotspot/src/share/vm/ci/ciKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciKlass.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciKlass.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciKlass.hpp	1.27 07/09/28 10:23:23 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -120,4 +117,3 @@
 
   void print_name_on(outputStream* st);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciKlassKlass.cpp openjdk/hotspot/src/share/vm/ci/ciKlassKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciKlassKlass.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciKlassKlass.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciKlassKlass.cpp	1.10 07/05/05 17:05:14 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciKlassKlass.hpp openjdk/hotspot/src/share/vm/ci/ciKlassKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciKlassKlass.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciKlassKlass.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciKlassKlass.hpp	1.13 07/05/05 17:05:14 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -52,4 +49,3 @@
   // Return the distinguished ciKlassKlass instance.
   static ciKlassKlass* make();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciMethod.cpp openjdk/hotspot/src/share/vm/ci/ciMethod.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciMethod.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciMethod.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciMethod.cpp	1.109 07/09/28 10:23:23 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1043,5 +1040,3 @@
     st->print(" loaded=false");
   }
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciMethod.hpp openjdk/hotspot/src/share/vm/ci/ciMethod.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciMethod.hpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciMethod.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciMethod.hpp	1.64 07/09/28 10:23:22 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -247,4 +244,3 @@
   void print_name(outputStream* st = tty);
   void print_short_name(outputStream* st = tty);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciMethodBlocks.cpp openjdk/hotspot/src/share/vm/ci/ciMethodBlocks.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciMethodBlocks.cpp	2008-11-25 10:12:04.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciMethodBlocks.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciMethodBlocks.cpp	1.6 07/09/28 10:23:22 JVM"
-#endif
 /*
  * Copyright 2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciMethodBlocks.hpp openjdk/hotspot/src/share/vm/ci/ciMethodBlocks.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciMethodBlocks.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciMethodBlocks.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciMethodBlocks.hpp	1.5 07/05/05 17:05:14 JVM"
-#endif
 /*
  * Copyright 2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciMethodData.cpp openjdk/hotspot/src/share/vm/ci/ciMethodData.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciMethodData.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciMethodData.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciMethodData.cpp	1.29 07/09/28 10:23:22 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciMethodData.hpp openjdk/hotspot/src/share/vm/ci/ciMethodData.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciMethodData.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciMethodData.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciMethodData.hpp	1.28 07/09/28 10:23:22 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciMethodKlass.cpp openjdk/hotspot/src/share/vm/ci/ciMethodKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciMethodKlass.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciMethodKlass.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciMethodKlass.cpp	1.10 07/05/05 17:05:15 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciMethodKlass.hpp openjdk/hotspot/src/share/vm/ci/ciMethodKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciMethodKlass.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciMethodKlass.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciMethodKlass.hpp	1.13 07/05/05 17:05:15 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -49,4 +46,3 @@
   // Return the distinguished ciMethodKlass instance.
   static ciMethodKlass* make();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciNullObject.cpp openjdk/hotspot/src/share/vm/ci/ciNullObject.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciNullObject.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciNullObject.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciNullObject.cpp	1.12 07/09/28 10:23:22 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -49,4 +46,3 @@
 ciNullObject* ciNullObject::make() {
   return CURRENT_ENV->_null_object_instance->as_null_object();
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciNullObject.hpp openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciNullObject.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciNullObject.hpp	1.13 07/09/28 10:23:21 JVM"
-#endif
 /*
  * Copyright 1999-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -50,5 +47,3 @@
   // Get the distinguished instance of this klass.
   static ciNullObject* make();
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObjArray.cpp openjdk/hotspot/src/share/vm/ci/ciObjArray.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciObjArray.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObjArray.cpp	1970-01-01 01:00:00.000000000 +0100
@@ -1,46 +0,0 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciObjArray.cpp	1.1 07/10/23 13:12:37 JVM"
-#endif
-/*
- * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
- * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
- *
- * This code is free software; you can redistribute it and/or modify it
- * under the terms of the GNU General Public License version 2 only, as
- * published by the Free Software Foundation.
- *
- * This code is distributed in the hope that it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
- * version 2 for more details (a copy is included in the LICENSE file that
- * accompanied this code).
- *
- * You should have received a copy of the GNU General Public License version
- * 2 along with this work; if not, write to the Free Software Foundation,
- * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
- *
- * Please contact Sun Microsystems, Inc., 4150 Network Circle, Santa Clara,
- * CA 95054 USA or visit www.sun.com if you need additional information or
- * have any questions.
- *  
- */
-
-#include "incls/_precompiled.incl"
-#include "incls/_ciObjArray.cpp.incl"
-
-// ciObjArray
-//
-// This class represents an objArrayOop in the HotSpot virtual
-// machine.
-
-ciObject* ciObjArray::obj_at(int index) {
-  VM_ENTRY_MARK;
-  objArrayOop array = get_objArrayOop();
-  if (index < 0 || index >= array->length()) return NULL;
-  oop o = array->obj_at(index);
-  if (o == NULL) {
-    return ciNullObject::make();
-  } else {
-    return CURRENT_ENV->get_object(o);
-  }
-}
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObjArray.hpp openjdk/hotspot/src/share/vm/ci/ciObjArray.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciObjArray.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObjArray.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciObjArray.hpp	1.13 07/10/23 13:12:55 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -46,6 +43,4 @@
 public:
   // What kind of ciObject is this?
   bool is_obj_array() { return true; }
-
-  ciObject* obj_at(int index);
 };
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObjArrayKlass.cpp openjdk/hotspot/src/share/vm/ci/ciObjArrayKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciObjArrayKlass.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObjArrayKlass.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciObjArrayKlass.cpp	1.23 07/05/05 17:05:15 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObjArrayKlass.hpp openjdk/hotspot/src/share/vm/ci/ciObjArrayKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciObjArrayKlass.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObjArrayKlass.hpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciObjArrayKlass.hpp	1.14 07/05/05 17:05:16 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -72,4 +69,3 @@
 
   static ciObjArrayKlass* make(ciKlass* element_klass);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObjArrayKlassKlass.cpp openjdk/hotspot/src/share/vm/ci/ciObjArrayKlassKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciObjArrayKlassKlass.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObjArrayKlassKlass.cpp	2008-12-05 16:41:21.807632628 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciObjArrayKlassKlass.cpp	1.10 07/05/05 17:05:15 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObjArrayKlassKlass.hpp openjdk/hotspot/src/share/vm/ci/ciObjArrayKlassKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciObjArrayKlassKlass.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObjArrayKlassKlass.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciObjArrayKlassKlass.hpp	1.12 07/05/05 17:05:16 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -51,4 +48,3 @@
   // Return the distinguished ciObjArrayKlassKlass instance.
   static ciObjArrayKlassKlass* make();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObject.cpp openjdk/hotspot/src/share/vm/ci/ciObject.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciObject.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObject.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciObject.cpp	1.29 07/09/28 10:23:21 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -216,4 +213,3 @@
     GUARDED_VM_ENTRY(get_oop()->print_on(st);)
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObject.hpp openjdk/hotspot/src/share/vm/ci/ciObject.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciObject.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObject.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciObject.hpp	1.26 07/09/28 10:23:21 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -261,4 +258,3 @@
   // Print debugging output about the oop this ciObject represents.
   void print_oop(outputStream* st = tty);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObjectFactory.cpp openjdk/hotspot/src/share/vm/ci/ciObjectFactory.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciObjectFactory.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObjectFactory.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciObjectFactory.cpp	1.39 07/05/17 15:50:05 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -648,4 +645,3 @@
              _ci_objects->length(), _unloaded_methods->length(),
              _unloaded_klasses->length());
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciObjectFactory.hpp openjdk/hotspot/src/share/vm/ci/ciObjectFactory.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciObjectFactory.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciObjectFactory.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciObjectFactory.hpp	1.20 07/05/17 15:50:07 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -111,5 +108,3 @@
   void print_contents();
   void print();
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciSignature.cpp openjdk/hotspot/src/share/vm/ci/ciSignature.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciSignature.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciSignature.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciSignature.cpp	1.21 07/05/05 17:05:16 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -111,4 +108,3 @@
   _accessing_klass->print();
   tty->print(" address=0x%x>", (address)this);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciSignature.hpp openjdk/hotspot/src/share/vm/ci/ciSignature.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciSignature.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciSignature.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciSignature.hpp	1.16 07/05/05 17:05:14 JVM"
-#endif
 /*
  * Copyright 1999-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -57,6 +54,3 @@
   void print_signature();
   void print();
 };
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciStreams.cpp openjdk/hotspot/src/share/vm/ci/ciStreams.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciStreams.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciStreams.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciStreams.cpp	1.30 07/05/05 17:05:16 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -368,5 +365,3 @@
   int name_and_type_index = cpool->name_and_type_ref_index_at(method_index);
   return cpool->signature_ref_index_at(name_and_type_index);
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciStreams.hpp openjdk/hotspot/src/share/vm/ci/ciStreams.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciStreams.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciStreams.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciStreams.hpp	1.36 07/05/05 17:05:14 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -370,7 +367,3 @@
     return _method->_exception_handlers[_pos];
   }
 };
-
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciSymbol.cpp openjdk/hotspot/src/share/vm/ci/ciSymbol.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciSymbol.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciSymbol.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciSymbol.cpp	1.23 07/09/28 10:23:21 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -109,4 +106,3 @@
 ciSymbol* ciSymbol::make(const char* s) {
   GUARDED_VM_ENTRY(return make_impl(s);)
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciSymbol.hpp openjdk/hotspot/src/share/vm/ci/ciSymbol.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciSymbol.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciSymbol.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciSymbol.hpp	1.16 07/09/28 10:23:21 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciSymbolKlass.cpp openjdk/hotspot/src/share/vm/ci/ciSymbolKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciSymbolKlass.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciSymbolKlass.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciSymbolKlass.cpp	1.10 07/05/05 17:05:16 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciSymbolKlass.hpp openjdk/hotspot/src/share/vm/ci/ciSymbolKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciSymbolKlass.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciSymbolKlass.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciSymbolKlass.hpp	1.13 07/05/05 17:05:17 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -53,4 +50,3 @@
   // Return the distinguished ciSymbolKlass instance.
   static ciSymbolKlass* make();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciType.cpp openjdk/hotspot/src/share/vm/ci/ciType.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciType.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciType.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciType.cpp	1.18 07/09/28 10:23:21 JVM"
-#endif
 /*
  * Copyright 2000-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciType.hpp openjdk/hotspot/src/share/vm/ci/ciType.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciType.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciType.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciType.hpp	1.15 07/09/28 10:23:20 JVM"
-#endif
 /*
  * Copyright 2000-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciTypeArray.cpp openjdk/hotspot/src/share/vm/ci/ciTypeArray.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciTypeArray.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciTypeArray.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciTypeArray.cpp	1.6 07/05/05 17:05:17 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciTypeArray.hpp openjdk/hotspot/src/share/vm/ci/ciTypeArray.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciTypeArray.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciTypeArray.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciTypeArray.hpp	1.13 07/05/05 17:05:17 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciTypeArrayKlass.cpp openjdk/hotspot/src/share/vm/ci/ciTypeArrayKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciTypeArrayKlass.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciTypeArrayKlass.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciTypeArrayKlass.cpp	1.14 07/05/05 17:05:17 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -56,4 +53,3 @@
 ciTypeArrayKlass* ciTypeArrayKlass::make(BasicType t) {
   GUARDED_VM_ENTRY(return make_impl(t);)
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciTypeArrayKlass.hpp openjdk/hotspot/src/share/vm/ci/ciTypeArrayKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciTypeArrayKlass.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciTypeArrayKlass.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciTypeArrayKlass.hpp	1.13 07/05/05 17:05:17 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciTypeArrayKlassKlass.cpp openjdk/hotspot/src/share/vm/ci/ciTypeArrayKlassKlass.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciTypeArrayKlassKlass.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciTypeArrayKlassKlass.cpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciTypeArrayKlassKlass.cpp	1.10 07/05/05 17:05:17 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciTypeArrayKlassKlass.hpp openjdk/hotspot/src/share/vm/ci/ciTypeArrayKlassKlass.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciTypeArrayKlassKlass.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciTypeArrayKlassKlass.hpp	2008-12-05 16:41:21.817632778 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciTypeArrayKlassKlass.hpp	1.12 07/05/05 17:05:18 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciTypeFlow.cpp openjdk/hotspot/src/share/vm/ci/ciTypeFlow.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciTypeFlow.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciTypeFlow.cpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciTypeFlow.cpp	1.47 07/09/28 10:23:20 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciTypeFlow.hpp openjdk/hotspot/src/share/vm/ci/ciTypeFlow.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciTypeFlow.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciTypeFlow.hpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciTypeFlow.hpp	1.26 08/11/24 12:20:59 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -130,7 +127,7 @@
 
   // Used as a combined index for locals and temps
   enum Cell {
-    Cell_0, Cell_max = INT_MAX
+    Cell_0
   };
 
   // A StateVector summarizes the type information at some
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciUtilities.cpp openjdk/hotspot/src/share/vm/ci/ciUtilities.cpp
--- openjdk6/hotspot/src/share/vm/ci/ciUtilities.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciUtilities.cpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ciUtilities.cpp	1.11 07/05/05 17:05:18 JVM"
-#endif
 /*
  * Copyright 1999-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/ci/ciUtilities.hpp openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp
--- openjdk6/hotspot/src/share/vm/ci/ciUtilities.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ciUtilities.hpp	1.20 07/05/05 17:05:18 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -107,4 +104,3 @@
 
 const char* basictype_to_str(BasicType t);
 const char  basictype_to_char(BasicType t);
-
diff -ruNb openjdk6/hotspot/src/share/vm/ci/compilerInterface.hpp openjdk/hotspot/src/share/vm/ci/compilerInterface.hpp
--- openjdk6/hotspot/src/share/vm/ci/compilerInterface.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/ci/compilerInterface.hpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compilerInterface.hpp	1.11 07/05/05 17:05:18 JVM"
-#endif
 /*
  * Copyright 1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/classFileError.cpp openjdk/hotspot/src/share/vm/classfile/classFileError.cpp
--- openjdk6/hotspot/src/share/vm/classfile/classFileError.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/classFileError.cpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)classFileError.cpp	1.12 07/05/05 17:06:44 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/classFileParser.cpp openjdk/hotspot/src/share/vm/classfile/classFileParser.cpp
--- openjdk6/hotspot/src/share/vm/classfile/classFileParser.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/classFileParser.cpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)classFileParser.cpp	1.280 07/07/09 11:19:49 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -4015,4 +4012,3 @@
   }
   return NULL;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/classFileParser.hpp openjdk/hotspot/src/share/vm/classfile/classFileParser.hpp
--- openjdk6/hotspot/src/share/vm/classfile/classFileParser.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/classFileParser.hpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)classFileParser.hpp	1.85 07/07/09 11:19:50 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/classFileStream.cpp openjdk/hotspot/src/share/vm/classfile/classFileStream.cpp
--- openjdk6/hotspot/src/share/vm/classfile/classFileStream.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/classFileStream.cpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)classFileStream.cpp	1.41 07/05/31 14:29:24 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/classFileStream.hpp openjdk/hotspot/src/share/vm/classfile/classFileStream.hpp
--- openjdk6/hotspot/src/share/vm/classfile/classFileStream.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/classFileStream.hpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)classFileStream.hpp	1.33 07/05/31 14:29:25 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/classLoader.cpp openjdk/hotspot/src/share/vm/classfile/classLoader.cpp
--- openjdk6/hotspot/src/share/vm/classfile/classLoader.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/classLoader.cpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)classLoader.cpp	1.188 07/07/16 11:55:31 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/classLoader.hpp openjdk/hotspot/src/share/vm/classfile/classLoader.hpp
--- openjdk6/hotspot/src/share/vm/classfile/classLoader.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/classLoader.hpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)classLoader.hpp	1.66 07/07/16 11:55:32 JVM"
-#endif 
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/dictionary.cpp openjdk/hotspot/src/share/vm/classfile/dictionary.cpp
--- openjdk6/hotspot/src/share/vm/classfile/dictionary.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/dictionary.cpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)dictionary.cpp	1.28 08/11/24 12:21:02 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -158,8 +155,8 @@
         for (int i = ik->previous_versions()->length() - 1; i >= 0; i--) {
           // check the previous versions array for GC'ed weak refs
           PreviousVersionNode * pv_node = ik->previous_versions()->at(i);
-          jobject cp_ref = pv_node->prev_constant_pool();
-          assert(cp_ref != NULL, "cp ref was unexpectedly cleared");
+          jweak cp_ref = pv_node->prev_constant_pool();
+          assert(cp_ref != NULL, "weak cp ref was unexpectedly cleared");
           if (cp_ref == NULL) {
             delete pv_node;
             ik->previous_versions()->remove_at(i);
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/dictionary.hpp openjdk/hotspot/src/share/vm/classfile/dictionary.hpp
--- openjdk6/hotspot/src/share/vm/classfile/dictionary.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/dictionary.hpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)dictionary.hpp	1.15 07/05/05 17:05:47 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -220,4 +217,3 @@
     tty->print_cr("pd set = #%d", count);
   }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/javaAssertions.cpp openjdk/hotspot/src/share/vm/classfile/javaAssertions.cpp
--- openjdk6/hotspot/src/share/vm/classfile/javaAssertions.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/javaAssertions.cpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)javaAssertions.cpp	1.14 07/05/05 17:06:50 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/javaAssertions.hpp openjdk/hotspot/src/share/vm/classfile/javaAssertions.hpp
--- openjdk6/hotspot/src/share/vm/classfile/javaAssertions.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/javaAssertions.hpp	2008-12-05 16:41:21.827632929 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)javaAssertions.hpp	1.11 07/05/05 17:06:50 JVM"
-#endif
 /*
  * Copyright 2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/javaClasses.cpp openjdk/hotspot/src/share/vm/classfile/javaClasses.cpp
--- openjdk6/hotspot/src/share/vm/classfile/javaClasses.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/javaClasses.cpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)javaClasses.cpp	1.250 08/01/17 09:41:13 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -146,43 +143,13 @@
   jstring js = NULL;
   { JavaThread* thread = (JavaThread*)THREAD;
     assert(thread->is_Java_thread(), "must be java thread");
-    HandleMark hm(thread);    
     ThreadToNativeFromVM ttn(thread);
+    HandleMark hm(thread);
     js = (_to_java_string_fn)(thread->jni_environment(), str);
   }
   return Handle(THREAD, JNIHandles::resolve(js));
 }
 
-// Converts a Java String to a native C string that can be used for
-// native OS calls.
-char* java_lang_String::as_platform_dependent_str(Handle java_string, TRAPS) {
-
-  typedef char* (*to_platform_string_fn_t)(JNIEnv*, jstring, bool*);
-  static to_platform_string_fn_t _to_platform_string_fn = NULL;
-
-  if (_to_platform_string_fn == NULL) {
-    void *lib_handle = os::native_java_library();
-    _to_platform_string_fn = CAST_TO_FN_PTR(to_platform_string_fn_t, hpi::dll_lookup(lib_handle, "GetStringPlatformChars"));
-    if (_to_platform_string_fn == NULL) {
-      fatal("GetStringPlatformChars missing");
-    }
-  }
-
-  char *native_platform_string;
-  { JavaThread* thread = (JavaThread*)THREAD;
-    assert(thread->is_Java_thread(), "must be java thread");
-    JNIEnv *env = thread->jni_environment();
-    jstring js = (jstring) JNIHandles::make_local(env, java_string());
-    bool is_copy;
-    HandleMark hm(thread);    
-    ThreadToNativeFromVM ttn(thread);
-    native_platform_string = (_to_platform_string_fn)(env, js, &is_copy);
-    assert(is_copy == JNI_TRUE, "is_copy value changed");
-    JNIHandles::destroy_local(js);
-  }
-  return native_platform_string;
-}
-
 Handle java_lang_String::char_converter(Handle java_string, jchar from_char, jchar to_char, TRAPS) {
   oop          obj    = java_string();
   // Typical usage is to convert all '/' to '.' in string.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/javaClasses.hpp openjdk/hotspot/src/share/vm/classfile/javaClasses.hpp
--- openjdk6/hotspot/src/share/vm/classfile/javaClasses.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/javaClasses.hpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)javaClasses.hpp	1.158 08/01/17 09:41:12 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -99,7 +96,6 @@
   // String converters
   static char*  as_utf8_string(oop java_string);
   static char*  as_utf8_string(oop java_string, int start, int len);
-  static char*  as_platform_dependent_str(Handle java_string, TRAPS);
   static jchar* as_unicode_string(oop java_string, int& length);
 
   static bool equals(oop java_string, jchar* chars, int len);
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/loaderConstraints.cpp openjdk/hotspot/src/share/vm/classfile/loaderConstraints.cpp
--- openjdk6/hotspot/src/share/vm/classfile/loaderConstraints.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/loaderConstraints.cpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)loaderConstraints.cpp	1.19 07/05/17 15:50:23 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/loaderConstraints.hpp openjdk/hotspot/src/share/vm/classfile/loaderConstraints.hpp
--- openjdk6/hotspot/src/share/vm/classfile/loaderConstraints.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/loaderConstraints.hpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)loaderConstraints.hpp	1.14 07/05/05 17:05:52 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/placeholders.cpp openjdk/hotspot/src/share/vm/classfile/placeholders.cpp
--- openjdk6/hotspot/src/share/vm/classfile/placeholders.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/placeholders.cpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)placeholders.cpp	1.20 07/05/17 15:50:29 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -270,5 +267,3 @@
   }
 }
 #endif
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/placeholders.hpp openjdk/hotspot/src/share/vm/classfile/placeholders.hpp
--- openjdk6/hotspot/src/share/vm/classfile/placeholders.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/placeholders.hpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)placeholders.hpp	1.21 07/05/05 17:05:54 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -332,5 +329,3 @@
   void print() const  PRODUCT_RETURN;
   void verify() const;
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/resolutionErrors.cpp openjdk/hotspot/src/share/vm/classfile/resolutionErrors.cpp
--- openjdk6/hotspot/src/share/vm/classfile/resolutionErrors.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/resolutionErrors.cpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)resolutionErrors.cpp	1.6 07/05/05 17:05:54 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -120,5 +117,3 @@
     }
   }
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/resolutionErrors.hpp openjdk/hotspot/src/share/vm/classfile/resolutionErrors.hpp
--- openjdk6/hotspot/src/share/vm/classfile/resolutionErrors.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/resolutionErrors.hpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)resolutionErrors.hpp	1.6 07/05/05 17:05:54 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -100,4 +97,3 @@
   // GC support
   void oops_do(OopClosure* blk);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/stackMapFrame.cpp openjdk/hotspot/src/share/vm/classfile/stackMapFrame.cpp
--- openjdk6/hotspot/src/share/vm/classfile/stackMapFrame.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/stackMapFrame.cpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)stackMapFrame.cpp	1.24 07/05/05 17:06:57 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -304,4 +301,3 @@
 }
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/stackMapFrame.hpp openjdk/hotspot/src/share/vm/classfile/stackMapFrame.hpp
--- openjdk6/hotspot/src/share/vm/classfile/stackMapFrame.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/stackMapFrame.hpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)stackMapFrame.hpp	1.20 07/05/05 17:06:57 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -227,4 +224,3 @@
   // Debugging
   void print() const PRODUCT_RETURN;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/stackMapTable.cpp openjdk/hotspot/src/share/vm/classfile/stackMapTable.cpp
--- openjdk6/hotspot/src/share/vm/classfile/stackMapTable.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/stackMapTable.cpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)stackMapTable.cpp	1.28 07/05/05 17:06:53 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -428,4 +425,3 @@
     "reserved frame type", CHECK_VERIFY_(pre_frame->verifier(), NULL));
   return NULL;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/stackMapTable.hpp openjdk/hotspot/src/share/vm/classfile/stackMapTable.hpp
--- openjdk6/hotspot/src/share/vm/classfile/stackMapTable.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/stackMapTable.hpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)stackMapTable.hpp	1.21 07/05/05 17:06:57 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/symbolTable.cpp openjdk/hotspot/src/share/vm/classfile/symbolTable.cpp
--- openjdk6/hotspot/src/share/vm/classfile/symbolTable.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/symbolTable.cpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)symbolTable.cpp	1.69 07/05/05 17:05:55 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/symbolTable.hpp openjdk/hotspot/src/share/vm/classfile/symbolTable.hpp
--- openjdk6/hotspot/src/share/vm/classfile/symbolTable.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/symbolTable.hpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)symbolTable.hpp	1.48 07/05/05 17:05:56 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/systemDictionary.cpp openjdk/hotspot/src/share/vm/classfile/systemDictionary.cpp
--- openjdk6/hotspot/src/share/vm/classfile/systemDictionary.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/systemDictionary.cpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)systemDictionary.cpp	1.367 08/01/17 09:41:11 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1245,9 +1242,7 @@
     oop obj = (oop) result.get_jobject();
     if (obj == NULL) { return nk; }
 
-    Handle h_obj(THREAD, obj);
-    char* new_class_name = java_lang_String::as_platform_dependent_str(h_obj, 
-                                                                  CHECK_(nk));
+    char* new_class_name = java_lang_String::as_utf8_string(obj);
 
     // lock the loader 
     // we use this lock because JVMTI does.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/systemDictionary.hpp openjdk/hotspot/src/share/vm/classfile/systemDictionary.hpp
--- openjdk6/hotspot/src/share/vm/classfile/systemDictionary.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/systemDictionary.hpp	2008-12-05 16:41:21.837633080 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)systemDictionary.hpp	1.156 07/08/09 09:11:58 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/verificationType.cpp openjdk/hotspot/src/share/vm/classfile/verificationType.cpp
--- openjdk6/hotspot/src/share/vm/classfile/verificationType.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/verificationType.cpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)verificationType.cpp	1.16 07/05/05 17:07:01 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/verificationType.hpp openjdk/hotspot/src/share/vm/classfile/verificationType.hpp
--- openjdk6/hotspot/src/share/vm/classfile/verificationType.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/verificationType.hpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)verificationType.hpp	1.17 07/05/05 17:07:01 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/verifier.cpp openjdk/hotspot/src/share/vm/classfile/verifier.cpp
--- openjdk6/hotspot/src/share/vm/classfile/verifier.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/verifier.cpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)verifier.cpp	1.113 07/05/23 10:53:19 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/verifier.hpp openjdk/hotspot/src/share/vm/classfile/verifier.hpp
--- openjdk6/hotspot/src/share/vm/classfile/verifier.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/verifier.hpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)verifier.hpp	1.41 07/05/05 17:07:02 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/vmSymbols.cpp openjdk/hotspot/src/share/vm/classfile/vmSymbols.cpp
--- openjdk6/hotspot/src/share/vm/classfile/vmSymbols.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/vmSymbols.cpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmSymbols.cpp	1.29 07/07/19 19:08:29 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/classfile/vmSymbols.hpp openjdk/hotspot/src/share/vm/classfile/vmSymbols.hpp
--- openjdk6/hotspot/src/share/vm/classfile/vmSymbols.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/classfile/vmSymbols.hpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vmSymbols.hpp	1.166 07/11/01 16:55:02 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -61,17 +58,12 @@
   template(java_lang_ThreadDeath,                     "java/lang/ThreadDeath")                    \
   template(java_lang_Boolean,                         "java/lang/Boolean")                        \
   template(java_lang_Character,                       "java/lang/Character")                      \
-  template(java_lang_Character_CharacterCache,        "java/lang/Character$CharacterCache")       \
   template(java_lang_Float,                           "java/lang/Float")                          \
   template(java_lang_Double,                          "java/lang/Double")                         \
   template(java_lang_Byte,                            "java/lang/Byte")                           \
-  template(java_lang_Byte_Cache,                      "java/lang/Byte$ByteCache")                 \
   template(java_lang_Short,                           "java/lang/Short")                          \
-  template(java_lang_Short_ShortCache,                "java/lang/Short$ShortCache")               \
   template(java_lang_Integer,                         "java/lang/Integer")                        \
-  template(java_lang_Integer_IntegerCache,            "java/lang/Integer$IntegerCache")           \
   template(java_lang_Long,                            "java/lang/Long")                           \
-  template(java_lang_Long_LongCache,                  "java/lang/Long$LongCache")                 \
   template(java_lang_Shutdown,                        "java/lang/Shutdown")                       \
   template(java_lang_ref_Reference,                   "java/lang/ref/Reference")                  \
   template(java_lang_ref_SoftReference,               "java/lang/ref/SoftReference")              \
@@ -99,7 +91,6 @@
   template(java_util_Vector,                          "java/util/Vector")                         \
   template(java_util_AbstractList,                    "java/util/AbstractList")                   \
   template(java_util_Hashtable,                       "java/util/Hashtable")                      \
-  template(java_util_HashMap,                         "java/util/HashMap")                        \
   template(java_lang_Compiler,                        "java/lang/Compiler")                       \
   template(sun_misc_Signal,                           "sun/misc/Signal")                          \
   template(java_lang_AssertionStatusDirectives,       "java/lang/AssertionStatusDirectives")      \
@@ -283,9 +274,7 @@
   template(exclusive_owner_thread_name,               "exclusiveOwnerThread")                     \
   template(park_blocker_name,                         "parkBlocker")                              \
   template(park_event_name,                           "nativeParkEventPointer")                   \
-  template(cache_field_name,                          "cache")                                    \
   template(value_name,                                "value")                                    \
-  template(frontCacheEnabled_name,                    "frontCacheEnabled")                        \
                                                                                                   \
   /* non-intrinsic name/signature pairs: */                                                       \
   template(register_method_name,                      "register")                                 \
diff -ruNb openjdk6/hotspot/src/share/vm/code/codeBlob.cpp openjdk/hotspot/src/share/vm/code/codeBlob.cpp
--- openjdk6/hotspot/src/share/vm/code/codeBlob.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/codeBlob.cpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)codeBlob.cpp	1.128 07/05/05 17:05:19 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/codeBlob.hpp openjdk/hotspot/src/share/vm/code/codeBlob.hpp
--- openjdk6/hotspot/src/share/vm/code/codeBlob.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/codeBlob.hpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)codeBlob.hpp	1.125 07/05/05 17:05:18 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/codeCache.cpp openjdk/hotspot/src/share/vm/code/codeCache.cpp
--- openjdk6/hotspot/src/share/vm/code/codeCache.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/codeCache.cpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)codeCache.cpp	1.133 07/09/01 18:01:02 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/codeCache.hpp openjdk/hotspot/src/share/vm/code/codeCache.hpp
--- openjdk6/hotspot/src/share/vm/code/codeCache.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/codeCache.hpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)codeCache.hpp	1.68 07/09/01 18:01:02 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/compiledIC.cpp openjdk/hotspot/src/share/vm/code/compiledIC.cpp
--- openjdk6/hotspot/src/share/vm/code/compiledIC.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/compiledIC.cpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compiledIC.cpp	1.157 07/05/05 17:05:18 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/compiledIC.hpp openjdk/hotspot/src/share/vm/code/compiledIC.hpp
--- openjdk6/hotspot/src/share/vm/code/compiledIC.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/compiledIC.hpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compiledIC.hpp	1.52 07/05/05 17:05:19 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -242,5 +239,3 @@
 inline CompiledStaticCall* compiledStaticCall_at(Relocation* call_site) {
   return compiledStaticCall_at(call_site->addr());
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/compressedStream.cpp openjdk/hotspot/src/share/vm/code/compressedStream.cpp
--- openjdk6/hotspot/src/share/vm/code/compressedStream.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/compressedStream.cpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compressedStream.cpp	1.27 07/05/05 17:05:20 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/compressedStream.hpp openjdk/hotspot/src/share/vm/code/compressedStream.hpp
--- openjdk6/hotspot/src/share/vm/code/compressedStream.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/compressedStream.hpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compressedStream.hpp	1.27 07/05/05 17:05:20 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/debugInfo.cpp openjdk/hotspot/src/share/vm/code/debugInfo.cpp
--- openjdk6/hotspot/src/share/vm/code/debugInfo.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/debugInfo.cpp	2008-12-05 16:41:21.847633231 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)debugInfo.cpp	1.35 07/07/27 16:12:09 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -253,4 +250,3 @@
   }
 }
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/debugInfo.hpp openjdk/hotspot/src/share/vm/code/debugInfo.hpp
--- openjdk6/hotspot/src/share/vm/code/debugInfo.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/debugInfo.hpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)debugInfo.hpp	1.35 07/07/27 16:10:59 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -273,4 +270,3 @@
   void write_handle(jobject h);
   void write_bci(int bci) { write_int(bci - InvocationEntryBci); }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/debugInfoRec.cpp openjdk/hotspot/src/share/vm/code/debugInfoRec.cpp
--- openjdk6/hotspot/src/share/vm/code/debugInfoRec.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/debugInfoRec.cpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)debugInfoRec.cpp	1.55 07/05/24 14:38:33 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/debugInfoRec.hpp openjdk/hotspot/src/share/vm/code/debugInfoRec.hpp
--- openjdk6/hotspot/src/share/vm/code/debugInfoRec.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/debugInfoRec.hpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)debugInfoRec.hpp	1.38 07/05/24 14:38:33 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -183,4 +180,3 @@
  public:
   enum { serialized_null = 0 };
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/dependencies.cpp openjdk/hotspot/src/share/vm/code/dependencies.cpp
--- openjdk6/hotspot/src/share/vm/code/dependencies.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/dependencies.cpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)dependencies.cpp	1.18 08/02/29 12:46:18 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -885,14 +882,6 @@
   // Must not move the class hierarchy during this check:
   assert_locked_or_safepoint(Compile_lock);
 
-  int nof_impls = instanceKlass::cast(context_type)->nof_implementors();
-  if (nof_impls > 1) {
-    // Avoid this case: *I.m > { A.m, C }; B.m > C
-    // %%% Until this is fixed more systematically, bail out.
-    // See corresponding comment in find_witness_anywhere.
-    return context_type;
-  }
-
   assert(!is_participant(new_type), "only old classes are participants");
   if (participants_hide_witnesses) {
     // If the new type is a subtype of a participant, we are done.
diff -ruNb openjdk6/hotspot/src/share/vm/code/dependencies.hpp openjdk/hotspot/src/share/vm/code/dependencies.hpp
--- openjdk6/hotspot/src/share/vm/code/dependencies.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/dependencies.hpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)dependencies.hpp	1.12 07/09/01 18:01:02 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/exceptionHandlerTable.cpp openjdk/hotspot/src/share/vm/code/exceptionHandlerTable.cpp
--- openjdk6/hotspot/src/share/vm/code/exceptionHandlerTable.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/exceptionHandlerTable.cpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)exceptionHandlerTable.cpp	1.33 07/05/05 17:05:20 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/exceptionHandlerTable.hpp openjdk/hotspot/src/share/vm/code/exceptionHandlerTable.hpp
--- openjdk6/hotspot/src/share/vm/code/exceptionHandlerTable.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/exceptionHandlerTable.hpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)exceptionHandlerTable.hpp	1.30 07/05/05 17:05:21 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/icBuffer.cpp openjdk/hotspot/src/share/vm/code/icBuffer.cpp
--- openjdk6/hotspot/src/share/vm/code/icBuffer.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/icBuffer.cpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)icBuffer.cpp	1.70 07/05/05 17:05:21 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -187,6 +184,3 @@
   ICStub* stub = ICStub_from_destination_address(ic->stub_address());
   return stub->cached_oop();  
 }
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/icBuffer.hpp openjdk/hotspot/src/share/vm/code/icBuffer.hpp
--- openjdk6/hotspot/src/share/vm/code/icBuffer.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/icBuffer.hpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)icBuffer.hpp	1.30 07/05/05 17:05:21 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/location.cpp openjdk/hotspot/src/share/vm/code/location.cpp
--- openjdk6/hotspot/src/share/vm/code/location.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/location.cpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)location.cpp	1.40 07/05/05 17:05:21 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -70,4 +67,3 @@
   if ((offset_in_bytes % BytesPerInt) != 0)  return false;
   return (offset_in_bytes / BytesPerInt) < (OFFSET_MASK >> OFFSET_SHIFT);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/location.hpp openjdk/hotspot/src/share/vm/code/location.hpp
--- openjdk6/hotspot/src/share/vm/code/location.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/location.hpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)location.hpp	1.47 07/05/05 17:05:21 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/nmethod.cpp openjdk/hotspot/src/share/vm/code/nmethod.cpp
--- openjdk6/hotspot/src/share/vm/code/nmethod.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/nmethod.cpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)nmethod.cpp	1.371 08/02/29 12:46:11 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1974,7 +1971,7 @@
     if (ctxk != NULL) {
       Klass* k = Klass::cast(ctxk);
       if (k->oop_is_instance() && ((instanceKlass*)k)->is_dependent_nmethod(this)) {
-        tty->print_cr("   [nmethod<=klass]%s", k->external_name());
+        tty->print("   [nmethod<=klass]%s", k->external_name());
       }
     }
     deps.log_dependency();  // put it into the xml log also
diff -ruNb openjdk6/hotspot/src/share/vm/code/nmethod.hpp openjdk/hotspot/src/share/vm/code/nmethod.hpp
--- openjdk6/hotspot/src/share/vm/code/nmethod.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/nmethod.hpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)nmethod.hpp	1.171 07/09/01 18:01:02 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -579,5 +576,3 @@
     lock_nmethod(_nm);
   }
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/oopRecorder.cpp openjdk/hotspot/src/share/vm/code/oopRecorder.cpp
--- openjdk6/hotspot/src/share/vm/code/oopRecorder.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/oopRecorder.cpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)oopRecorder.cpp	1.22 07/05/05 17:05:22 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -157,5 +154,3 @@
   }
   return -1;
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/oopRecorder.hpp openjdk/hotspot/src/share/vm/code/oopRecorder.hpp
--- openjdk6/hotspot/src/share/vm/code/oopRecorder.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/oopRecorder.hpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oopRecorder.hpp	1.22 07/05/05 17:05:21 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/pcDesc.cpp openjdk/hotspot/src/share/vm/code/pcDesc.cpp
--- openjdk6/hotspot/src/share/vm/code/pcDesc.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/pcDesc.cpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)pcDesc.cpp	1.31 07/05/24 14:38:34 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -62,4 +59,3 @@
   //Unimplemented();
   return true;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/pcDesc.hpp openjdk/hotspot/src/share/vm/code/pcDesc.hpp
--- openjdk6/hotspot/src/share/vm/code/pcDesc.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/pcDesc.hpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)pcDesc.hpp	1.37 07/05/24 14:38:34 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -62,4 +59,3 @@
   void print(nmethod* code);
   bool verify(nmethod* code);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/relocInfo.cpp openjdk/hotspot/src/share/vm/code/relocInfo.cpp
--- openjdk6/hotspot/src/share/vm/code/relocInfo.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/relocInfo.cpp	2008-12-05 16:41:21.857633382 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)relocInfo.cpp	1.89 07/05/05 17:05:21 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/relocInfo.hpp openjdk/hotspot/src/share/vm/code/relocInfo.hpp
--- openjdk6/hotspot/src/share/vm/code/relocInfo.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/relocInfo.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)relocInfo.hpp	1.87 07/06/19 09:08:11 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1329,4 +1326,3 @@
 
   ~PatchingRelocIterator()                           { postpass(); }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/scopeDesc.cpp openjdk/hotspot/src/share/vm/code/scopeDesc.cpp
--- openjdk6/hotspot/src/share/vm/code/scopeDesc.cpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/scopeDesc.cpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)scopeDesc.cpp	1.58 07/07/27 16:13:17 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/scopeDesc.hpp openjdk/hotspot/src/share/vm/code/scopeDesc.hpp
--- openjdk6/hotspot/src/share/vm/code/scopeDesc.hpp	2008-11-25 10:12:05.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/scopeDesc.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)scopeDesc.hpp	1.37 07/05/24 14:38:34 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -124,6 +121,3 @@
   void print_value_on(outputStream* st) const;
 #endif
 };
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/stubs.cpp openjdk/hotspot/src/share/vm/code/stubs.cpp
--- openjdk6/hotspot/src/share/vm/code/stubs.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/stubs.cpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)stubs.cpp	1.47 07/05/05 17:05:20 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/stubs.hpp openjdk/hotspot/src/share/vm/code/stubs.hpp
--- openjdk6/hotspot/src/share/vm/code/stubs.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/stubs.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)stubs.hpp	1.34 07/05/05 17:05:22 JVM"
-#endif
 /*
  * Copyright 1997-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -209,6 +206,3 @@
   void  verify();                                // verifies the stub queue
   void  print();                                 // prints information about the stub queue
 };
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/vmreg.cpp openjdk/hotspot/src/share/vm/code/vmreg.cpp
--- openjdk6/hotspot/src/share/vm/code/vmreg.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/vmreg.cpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmreg.cpp	1.35 07/05/05 17:05:22 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/vmreg.hpp openjdk/hotspot/src/share/vm/code/vmreg.hpp
--- openjdk6/hotspot/src/share/vm/code/vmreg.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/vmreg.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vmreg.hpp	1.37 07/05/05 17:05:22 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/code/vtableStubs.cpp openjdk/hotspot/src/share/vm/code/vtableStubs.cpp
--- openjdk6/hotspot/src/share/vm/code/vtableStubs.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/vtableStubs.cpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vtableStubs.cpp	1.55 07/05/05 17:05:22 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -198,8 +195,3 @@
 }
 
 #endif // Product
-
-
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/code/vtableStubs.hpp openjdk/hotspot/src/share/vm/code/vtableStubs.hpp
--- openjdk6/hotspot/src/share/vm/code/vtableStubs.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/code/vtableStubs.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vtableStubs.hpp	1.27 07/05/05 17:05:22 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/abstractCompiler.cpp openjdk/hotspot/src/share/vm/compiler/abstractCompiler.cpp
--- openjdk6/hotspot/src/share/vm/compiler/abstractCompiler.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/abstractCompiler.cpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)abstractCompiler.cpp	1.4 07/05/05 17:05:23 JVM"
-#endif
 // 
 // Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
 // DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/abstractCompiler.hpp openjdk/hotspot/src/share/vm/compiler/abstractCompiler.hpp
--- openjdk6/hotspot/src/share/vm/compiler/abstractCompiler.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/abstractCompiler.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)abstractCompiler.hpp	1.26 07/05/05 17:05:24 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/compileBroker.cpp openjdk/hotspot/src/share/vm/compiler/compileBroker.cpp
--- openjdk6/hotspot/src/share/vm/compiler/compileBroker.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/compileBroker.cpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compileBroker.cpp	1.147 07/05/17 15:50:51 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/compileBroker.hpp openjdk/hotspot/src/share/vm/compiler/compileBroker.hpp
--- openjdk6/hotspot/src/share/vm/compiler/compileBroker.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/compileBroker.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compileBroker.hpp	1.55 07/05/05 17:05:24 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/compileLog.cpp openjdk/hotspot/src/share/vm/compiler/compileLog.cpp
--- openjdk6/hotspot/src/share/vm/compiler/compileLog.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/compileLog.cpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compileLog.cpp	1.20 07/05/05 17:05:23 JVM"
-#endif
 /*
  * Copyright 2002-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -295,4 +292,3 @@
   char buf[4 * K];
   finish_log_on_error(file, buf, sizeof(buf));
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/compileLog.hpp openjdk/hotspot/src/share/vm/compiler/compileLog.hpp
--- openjdk6/hotspot/src/share/vm/compiler/compileLog.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/compileLog.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compileLog.hpp	1.12 07/05/05 17:05:24 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/compilerOracle.cpp openjdk/hotspot/src/share/vm/compiler/compilerOracle.cpp
--- openjdk6/hotspot/src/share/vm/compiler/compilerOracle.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/compilerOracle.cpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compilerOracle.cpp	1.35 07/09/13 11:29:49 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -711,5 +708,3 @@
     line = *line == '\0' ? line : line + 1;
   }
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/compilerOracle.hpp openjdk/hotspot/src/share/vm/compiler/compilerOracle.hpp
--- openjdk6/hotspot/src/share/vm/compiler/compilerOracle.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/compilerOracle.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compilerOracle.hpp	1.21 07/05/05 17:05:23 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/disassemblerEnv.hpp openjdk/hotspot/src/share/vm/compiler/disassemblerEnv.hpp
--- openjdk6/hotspot/src/share/vm/compiler/disassemblerEnv.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/disassemblerEnv.hpp	2008-12-05 16:41:21.867633533 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)disassemblerEnv.hpp	1.18 07/05/05 17:05:24 JVM"
-#endif
 /*
  * Copyright 1997-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -36,4 +33,3 @@
   virtual char* string_for_offset(intptr_t value) = 0;
   virtual char* string_for_constant(unsigned char* pc, intptr_t value, int is_decimal) = 0;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/methodLiveness.cpp openjdk/hotspot/src/share/vm/compiler/methodLiveness.cpp
--- openjdk6/hotspot/src/share/vm/compiler/methodLiveness.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/methodLiveness.cpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)methodLiveness.cpp	1.41 07/05/05 17:05:24 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1064,4 +1061,3 @@
 }
 
 #endif // PRODUCT
-
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/methodLiveness.hpp openjdk/hotspot/src/share/vm/compiler/methodLiveness.hpp
--- openjdk6/hotspot/src/share/vm/compiler/methodLiveness.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/methodLiveness.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)methodLiveness.hpp	1.25 07/05/05 17:05:24 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/oopMap.cpp openjdk/hotspot/src/share/vm/compiler/oopMap.cpp
--- openjdk6/hotspot/src/share/vm/compiler/oopMap.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/oopMap.cpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)oopMap.cpp	1.153 07/09/28 10:23:20 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/compiler/oopMap.hpp openjdk/hotspot/src/share/vm/compiler/oopMap.hpp
--- openjdk6/hotspot/src/share/vm/compiler/oopMap.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/compiler/oopMap.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oopMap.hpp	1.81 07/09/28 10:23:19 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/binaryTreeDictionary.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/binaryTreeDictionary.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/binaryTreeDictionary.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/binaryTreeDictionary.cpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)binaryTreeDictionary.cpp	1.37 07/05/05 17:05:43 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/binaryTreeDictionary.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/binaryTreeDictionary.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/binaryTreeDictionary.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/binaryTreeDictionary.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)binaryTreeDictionary.hpp	1.27 08/04/09 19:19:11 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -133,7 +130,6 @@
 const size_t MIN_TREE_CHUNK_SIZE  = sizeof(TreeChunk)/HeapWordSize;
 
 class BinaryTreeDictionary: public FreeBlockDictionary {
-  friend class VMStructs;
   bool       _splay;
   size_t     _totalSize;
   size_t     _totalFreeBlocks;
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsAdaptiveSizePolicy.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsAdaptiveSizePolicy.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsAdaptiveSizePolicy.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsAdaptiveSizePolicy.cpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cmsAdaptiveSizePolicy.cpp	1.19 07/05/05 17:05:24 JVM"
-#endif
 /*
  * Copyright 2004-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsAdaptiveSizePolicy.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsAdaptiveSizePolicy.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsAdaptiveSizePolicy.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsAdaptiveSizePolicy.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cmsAdaptiveSizePolicy.hpp	1.16 07/05/05 17:05:25 JVM"
-#endif
 /*
  * Copyright 2004-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsCollectorPolicy.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsCollectorPolicy.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsCollectorPolicy.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsCollectorPolicy.cpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cmsCollectorPolicy.cpp	1.1 07/05/16 10:53:57 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsCollectorPolicy.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsCollectorPolicy.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsCollectorPolicy.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsCollectorPolicy.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cmsCollectorPolicy.hpp	1.1 07/05/16 10:53:57 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsGCAdaptivePolicyCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsGCAdaptivePolicyCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsGCAdaptivePolicyCounters.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsGCAdaptivePolicyCounters.cpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cmsGCAdaptivePolicyCounters.cpp	1.16 07/05/05 17:05:25 JVM"
-#endif
 /*
  * Copyright 2004-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsGCAdaptivePolicyCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsGCAdaptivePolicyCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsGCAdaptivePolicyCounters.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsGCAdaptivePolicyCounters.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cmsGCAdaptivePolicyCounters.hpp	1.16 07/05/05 17:05:25 JVM"
-#endif
 /*
  * Copyright 2004-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsLockVerifier.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsLockVerifier.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsLockVerifier.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsLockVerifier.cpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cmsLockVerifier.cpp	1.14 07/05/05 17:05:44 JVM"
-#endif
 /*
  * Copyright 2002-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -96,4 +93,3 @@
   }
 }
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsLockVerifier.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsLockVerifier.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsLockVerifier.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsLockVerifier.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cmsLockVerifier.hpp	1.9 07/05/05 17:05:44 JVM"
-#endif
 /*
  * Copyright 2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsOopClosures.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsOopClosures.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsOopClosures.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsOopClosures.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,8 +1,5 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cmsOopClosures.hpp	1.4 08/09/25 13:46:14 JVM"
-#endif
 /*
- * Copyright (c) 2008 Sun Microsystems, Inc.  All Rights Reserved.
+ * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  *   
  * This code is free software; you can redistribute it and/or modify it
@@ -286,7 +283,7 @@
 // processing phase of the CMS final checkpoint step.
 class CMSKeepAliveClosure: public OopClosure {
   CMSCollector* _collector;
-  const MemRegion _span;
+  MemRegion     _span;
   CMSMarkStack* _mark_stack;
   CMSBitMap*    _bit_map;
  public:
@@ -295,9 +292,7 @@
     _collector(collector),
     _span(span),
     _bit_map(bit_map),
-    _mark_stack(mark_stack) { 
-      assert(!_span.is_empty(), "Empty span could spell trouble");
-    }
+    _mark_stack(mark_stack) { }
 
   void do_oop(oop* p);
   void do_oop_nv(oop* p) { CMSKeepAliveClosure::do_oop(p); }
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsOopClosures.inline.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsOopClosures.inline.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsOopClosures.inline.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsOopClosures.inline.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cmsOopClosures.inline.hpp	1.1 07/05/16 10:52:51 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsPermGen.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsPermGen.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsPermGen.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsPermGen.cpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cmsPermGen.cpp	1.2 07/05/16 16:53:01 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsPermGen.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsPermGen.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsPermGen.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/cmsPermGen.hpp	2008-12-05 16:41:21.877633684 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cmsPermGen.hpp	1.1 07/05/02 16:12:51 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/compactibleFreeListSpace.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/compactibleFreeListSpace.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/compactibleFreeListSpace.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/compactibleFreeListSpace.cpp	2008-12-05 16:41:21.887633834 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compactibleFreeListSpace.cpp	1.144 08/09/06 09:20:55 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -2797,12 +2794,10 @@
   assert(n_threads > 0, "Unexpected n_threads argument");
   const size_t task_size = rescan_task_size();
   size_t n_tasks = (used_region().word_size() + task_size - 1)/task_size;
-  assert((n_tasks == 0) == used_region().is_empty(), "n_tasks incorrect");
-  assert(n_tasks == 0 ||
-  ((used_region().start() + (n_tasks - 1)*task_size < used_region().end()) &&
-  (used_region().start() + n_tasks*task_size >= used_region().end())),
-  "n_tasks calculation incorrect"); 
-
+  assert((used_region().start() + (n_tasks - 1)*task_size <
+          used_region().end()) &&
+         (used_region().start() + n_tasks*task_size >=
+          used_region().end()), "n_task calculation incorrect");
   SequentialSubTasksDone* pst = conc_par_seq_tasks();
   assert(!pst->valid(), "Clobbering existing data?");
   pst->set_par_threads(n_threads);
@@ -2842,10 +2837,9 @@
   assert(n_tasks == 0 ||
          ((span.start() + (n_tasks - 1)*task_size < span.end()) &&
           (span.start() + n_tasks*task_size >= span.end())),
-         "n_tasks calculation incorrect");
+         "n_task calculation incorrect");
   SequentialSubTasksDone* pst = conc_par_seq_tasks();
   assert(!pst->valid(), "Clobbering existing data?");
   pst->set_par_threads(n_threads);
   pst->set_n_tasks((int)n_tasks);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/compactibleFreeListSpace.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/compactibleFreeListSpace.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/compactibleFreeListSpace.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/compactibleFreeListSpace.hpp	2008-12-05 16:41:21.887633834 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compactibleFreeListSpace.hpp	1.91 07/05/05 17:05:45 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.cpp	2008-12-05 16:41:21.887633834 +0100
@@ -1,8 +1,5 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)concurrentMarkSweepGeneration.cpp	1.293 08/10/30 20:45:16 JVM"
-#endif
 /*
- * Copyright 2001-2008 Sun Microsystems, Inc.  All Rights Reserved.
+ * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  *
  * This code is free software; you can redistribute it and/or modify it
@@ -495,10 +492,7 @@
                  -1 /* lock-free */, "No_lock" /* dummy */),
   _modUnionClosure(&_modUnionTable),
   _modUnionClosurePar(&_modUnionTable),
-  // Adjust my span to cover old (cms) gen and perm gen
-  _span(cmsGen->reserved()._union(permGen->reserved())),
-  // Construct the is_alive_closure with _span & markBitMap
-  _is_alive_closure(_span, &_markBitMap),
+  _is_alive_closure(&_markBitMap),
   _restart_addr(NULL),
   _overflow_list(NULL),
   _preserved_oop_stack(NULL),
@@ -550,6 +544,11 @@
   _cmsGen->cmsSpace()->set_collector(this);
   _permGen->cmsSpace()->set_collector(this);
 
+  // Adjust my span to cover old (cms) gen and perm gen
+  _span = _cmsGen->reserved()._union(_permGen->reserved());
+  // Initialize the span of is_alive_closure
+  _is_alive_closure.set_span(_span);
+
   // Allocate MUT and marking bit map
   {
     MutexLockerEx x(_markBitMap.lock(), Mutex::_no_safepoint_check_flag);
@@ -3122,7 +3121,12 @@
   if (GCExpandToAllocateDelayMillis > 0) {
     os::sleep(Thread::current(), GCExpandToAllocateDelayMillis, false);
   }
-  return have_lock_and_allocate(word_size, tlab);
+  size_t adj_word_sz = CompactibleFreeListSpace::adjustObjectSize(word_size);
+  if (parallel) {
+    return cmsSpace()->par_allocate(adj_word_sz);
+  } else {
+    return cmsSpace()->allocate(adj_word_sz);
+  }
 }
 
 // YSR: All of this generation expansion/shrinking stuff is an exact copy of
@@ -3598,7 +3602,6 @@
   CompactibleFreeListSpace*  _cms_space;
   CompactibleFreeListSpace* _perm_space;
   HeapWord*     _global_finger;
-  HeapWord*     _restart_addr;
 
   //  Exposed here for yielding support
   Mutex* const _bit_map_lock;
@@ -3629,7 +3632,7 @@
     _term.set_task(this);
     assert(_cms_space->bottom() < _perm_space->bottom(),
            "Finger incorrectly initialized below");
-    _restart_addr = _global_finger = _cms_space->bottom();
+    _global_finger = _cms_space->bottom();
   }
 
 
@@ -3647,10 +3650,6 @@
   bool result() { return _result; }
 
   void reset(HeapWord* ra) {
-    assert(_global_finger >= _cms_space->end(), "Postcondition of ::work(i)");
-    assert(_global_finger >= _perm_space->end(), "Postcondition of ::work(i)");
-    assert(ra < _perm_space->end(), "ra too large");
-    _restart_addr = _global_finger = ra;
     _term.reset_for_reuse();
   }
 
@@ -3795,24 +3794,16 @@
   int n_tasks = pst->n_tasks();
   // We allow that there may be no tasks to do here because
   // we are restarting after a stack overflow.
-  assert(pst->valid() || n_tasks == 0, "Uninitialized use?");
+  assert(pst->valid() || n_tasks == 0, "Uninitializd use?");
   int nth_task = 0;
 
-  HeapWord* aligned_start = sp->bottom();
-  if (sp->used_region().contains(_restart_addr)) {
-    // Align down to a card boundary for the start of 0th task
-    // for this space.
-    aligned_start =
-       (HeapWord*)align_size_down((uintptr_t)_restart_addr,
-                                     CardTableModRefBS::card_size);
-  }
-  
+  HeapWord* start = sp->bottom();
   size_t chunk_size = sp->marking_task_size();
   while (!pst->is_task_claimed(/* reference */ nth_task)) {
     // Having claimed the nth task in this space,
     // compute the chunk that it corresponds to:
-    MemRegion span = MemRegion(aligned_start + nth_task*chunk_size,
-                               aligned_start + (nth_task+1)*chunk_size);
+    MemRegion span = MemRegion(start + nth_task*chunk_size,
+                               start + (nth_task+1)*chunk_size);
     // Try and bump the global finger via a CAS;
     // note that we need to do the global finger bump
     // _before_ taking the intersection below, because
@@ -3827,19 +3818,6 @@
     // beyond the "top" address of the space.
     span = span.intersection(sp->used_region());
     if (!span.is_empty()) {  // Non-null task
-      HeapWord* prev_obj;
-      assert(!span.contains(_restart_addr) || nth_task == 0,
-              "Inconsistency");
-      if (nth_task == 0) {
-        // For the 0th task, we'll not need to compute a block_start.
-        if (span.contains(_restart_addr)) {
-          // In the case of a restart because of stack overflow,
-          // we might additionally skip a chunk prefix.
-          prev_obj = _restart_addr; 
-        } else {
-          prev_obj = span.start();
-        }
-      } else {
         // We want to skip the first object because
         // the protocol is to scan any object in its entirety
         // that _starts_ in this span; a fortiori, any
@@ -3847,7 +3825,7 @@
         // as part of an earlier claimed task.
         // Below we use the "careful" version of block_start
         // so we do not try to navigate uninitialized objects.
-        prev_obj = sp->block_start_careful(span.start());
+      HeapWord* prev_obj = sp->block_start_careful(span.start());
         // Below we use a variant of block_size that uses the
         // Printezis bits to avoid waiting for allocated
         // objects to become initialized/parsable.
@@ -3862,7 +3840,6 @@
             break;
           } 
         }
-      }
       if (prev_obj < span.end()) {
         MemRegion my_span = MemRegion(prev_obj, span.end());
         // Do the marking work within a non-empty span --
@@ -3911,15 +3888,13 @@
   void handle_stack_overflow(HeapWord* lost);
 };
 
-// Grey object scanning during work stealing phase --
-// the salient assumption here is that any references
-// that are in these stolen objects being scanned must
-// already have been initialized (else they would not have
-// been published), so we do not need to check for
-// uninitialized objects before pushing here. 
+// Grey object rescan during work stealing phase --
+// the salient assumption here is that stolen oops must
+// always be initialized, so we do not need to check for
+// uninitialized objects before scanning here.
 void Par_ConcMarkingClosure::do_oop(oop* p) {
   oop    this_oop = *p;
-  assert(this_oop->is_oop_or_null(true),
+  assert(this_oop->is_oop_or_null(),
          "expected an oop or NULL");
   HeapWord* addr = (HeapWord*)this_oop;
   // Check if oop points into the CMS generation
@@ -3975,7 +3950,7 @@
 // in CMSCollector's _restart_address.
 void Par_ConcMarkingClosure::handle_stack_overflow(HeapWord* lost) {
   // We need to do this under a mutex to prevent other
-  // workers from interfering with the work done below.
+  // workers from interfering with the expansion below.
   MutexLockerEx ml(_overflow_stack->par_lock(),
                    Mutex::_no_safepoint_check_flag);
   // Remember the least grey address discarded
@@ -5463,7 +5438,7 @@
   typedef AbstractRefProcTaskExecutor::ProcessTask ProcessTask;
   CMSCollector*          _collector;
   CMSBitMap*             _mark_bit_map;
-  const MemRegion        _span;
+  MemRegion              _span;
   OopTaskQueueSet*       _task_queues;
   ParallelTaskTerminator _term;
   ProcessTask&           _task;
@@ -5480,10 +5455,8 @@
     _collector(collector), _span(span), _mark_bit_map(mark_bit_map),
     _task_queues(task_queues),
     _term(total_workers, task_queues)
-    {
-      assert(_collector->_span.equals(_span) && !_span.is_empty(),
-             "Inconsistency in _span"); 
-    }
+    { }
+
   OopTaskQueueSet* task_queues() { return _task_queues; }
 
   OopTaskQueue* work_queue(int i) { return task_queues()->queue(i); }
@@ -5499,12 +5472,11 @@
 };
 
 void CMSRefProcTaskProxy::work(int i) {
-  assert(_collector->_span.equals(_span), "Inconsistency in _span");
   CMSParKeepAliveClosure par_keep_alive(_collector, _span,
                                         _mark_bit_map, work_queue(i));
   CMSParDrainMarkingStackClosure par_drain_stack(_collector, _span,
                                                  _mark_bit_map, work_queue(i));
-  CMSIsAliveClosure is_alive_closure(_span, _mark_bit_map);
+  CMSIsAliveClosure is_alive_closure(_mark_bit_map);
   _task.work(i, is_alive_closure, par_keep_alive, par_drain_stack);
   if (_task.marks_oops_alive()) {
     do_work_steal(i, &par_drain_stack, &par_keep_alive,
@@ -6825,9 +6797,11 @@
         // during the preclean or remark phase. (CMSCleanOnEnter)
         if (CMSCleanOnEnter) {
           size_t sz = _collector->block_size_using_printezis_bits(addr);
+          HeapWord* start_card_addr = (HeapWord*)round_down(
+                                         (intptr_t)addr, CardTableModRefBS::card_size);
           HeapWord* end_card_addr   = (HeapWord*)round_to(
                                          (intptr_t)(addr+sz), CardTableModRefBS::card_size);
-          MemRegion redirty_range = MemRegion(addr, end_card_addr);
+          MemRegion redirty_range = MemRegion(start_card_addr, end_card_addr);
           assert(!redirty_range.is_empty(), "Arithmetical tautology");
           // Bump _threshold to end_card_addr; note that
           // _threshold cannot possibly exceed end_card_addr, anyhow.
@@ -7245,8 +7219,7 @@
   _should_remember_klasses(collector->cms_should_unload_classes())
 { }
 
-// Assumes thread-safe access by callers, who are
-// responsible for mutual exclusion. 
+
 void CMSCollector::lower_restart_addr(HeapWord* low) {
   assert(_span.contains(low), "Out of bounds addr");
   if (_restart_addr == NULL) {
@@ -7272,7 +7245,7 @@
 // in CMSCollector's _restart_address.
 void Par_PushOrMarkClosure::handle_stack_overflow(HeapWord* lost) {
   // We need to do this under a mutex to prevent other
-  // workers from interfering with the work done below.
+  // workers from interfering with the expansion below.
   MutexLockerEx ml(_overflow_stack->par_lock(),
                    Mutex::_no_safepoint_check_flag);
   // Remember the least grey address discarded
@@ -7419,25 +7392,12 @@
     )
     if (simulate_overflow || !_mark_stack->push(this_oop)) {
       if (_concurrent_precleaning) {
-         // During precleaning we can just dirty the appropriate card(s)
+         // During precleaning we can just dirty the appropriate card
          // in the mod union table, thus ensuring that the object remains
-         // in the grey set and continue. In the case of object arrays
-         // we need to dirty all of the cards that the object spans,
-         // since the rescan of object arrays will be limited to the
-         // dirty cards.
-         // Note that no one can be intefering with us in this action
-         // of dirtying the mod union table, so no locking or atomics
-         // are required.
-         if (this_oop->is_objArray()) {
-           size_t sz = this_oop->size();
-           HeapWord* end_card_addr = (HeapWord*)round_to(
-                                         (intptr_t)(addr+sz), CardTableModRefBS::card_size);
-           MemRegion redirty_range = MemRegion(addr, end_card_addr);
-           assert(!redirty_range.is_empty(), "Arithmetical tautology");
-           _mod_union_table->mark_range(redirty_range);
-         } else {
+         // in the grey set  and continue. Note that no one can be intefering
+         // with us in this action of dirtying the mod union table, so
+         // no locking is required.
            _mod_union_table->mark(addr);
-         } 
          _collector->_ser_pmc_preclean_ovflw++;
       } else {
          // During the remark phase, we need to remember this oop
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.hpp	2008-12-05 16:41:21.887633834 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)concurrentMarkSweepGeneration.hpp	1.163 08/09/25 13:47:54 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -438,18 +435,20 @@
 // if the object is "live" (reachable). Used in weak
 // reference processing.
 class CMSIsAliveClosure: public BoolObjectClosure {
-  const MemRegion  _span;
+  MemRegion  _span;
   const CMSBitMap* _bit_map;
 
   friend class CMSCollector;
+ protected:
+  void set_span(MemRegion span) { _span = span; }
  public:
+  CMSIsAliveClosure(CMSBitMap* bit_map):
+    _bit_map(bit_map) { }
+
   CMSIsAliveClosure(MemRegion span,
                     CMSBitMap* bit_map):
     _span(span),
-    _bit_map(bit_map) {
-      assert(!span.is_empty(), "Empty span could spell trouble");
-    }
-
+    _bit_map(bit_map) { }
   void do_object(oop obj) {
     assert(false, "not to be invoked");
   }
@@ -598,7 +597,7 @@
   // ("Weak") Reference processing support
   ReferenceProcessor*            _ref_processor;
   CMSIsAliveClosure              _is_alive_closure;
-      // keep this textually after _markBitMap and _span; c'tor dependency
+      // keep this textually after _markBitMap; c'tor dependency
 
   ConcurrentMarkSweepThread*     _cmsThread;   // the thread doing the work
   ModUnionClosure    _modUnionClosure;
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.inline.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.inline.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.inline.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepGeneration.inline.hpp	2008-12-05 16:41:21.887633834 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)concurrentMarkSweepGeneration.inline.hpp	1.47 07/05/17 15:52:12 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepThread.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepThread.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepThread.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepThread.cpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)concurrentMarkSweepThread.cpp	1.48 07/05/05 17:06:45 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepThread.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepThread.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepThread.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/concurrentMarkSweepThread.hpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)concurrentMarkSweepThread.hpp	1.38 07/05/05 17:06:46 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeBlockDictionary.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeBlockDictionary.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeBlockDictionary.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeBlockDictionary.cpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)freeBlockDictionary.cpp	1.12 07/05/05 17:05:47 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeBlockDictionary.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeBlockDictionary.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeBlockDictionary.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeBlockDictionary.hpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)freeBlockDictionary.hpp	1.32 07/05/05 17:05:47 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeChunk.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeChunk.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeChunk.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeChunk.cpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)freeChunk.cpp	1.16 07/05/05 17:05:47 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeList.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeList.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeList.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeList.cpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)freeList.cpp	1.31 07/05/05 17:05:48 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeList.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeList.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeList.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/freeList.hpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)freeList.hpp	1.32 08/04/09 19:18:54 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -41,7 +38,6 @@
 
 class FreeList VALUE_OBJ_CLASS_SPEC {
   friend class CompactibleFreeListSpace;
-  friend class VMStructs;
   FreeChunk*	_head;		// List of free chunks
   FreeChunk*	_tail;		// Tail of list of free chunks
   size_t	_size;		// Size in Heap words of each chunks
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmCMSOperations.cpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmCMSOperations.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmCMSOperations.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmCMSOperations.cpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmCMSOperations.cpp	1.16 07/05/29 09:44:13 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -251,4 +248,3 @@
   // Enable iCMS back.
   CMSCollector::enable_icms();
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmCMSOperations.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmCMSOperations.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmCMSOperations.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmCMSOperations.hpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vmCMSOperations.hpp	1.13 07/05/29 09:44:13 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmStructs_cms.hpp openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmStructs_cms.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmStructs_cms.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/concurrentMarkSweep/vmStructs_cms.hpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmStructs_cms.hpp	1.3 08/04/09 19:18:31 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -41,15 +38,7 @@
      static_field(ConcurrentMarkSweepThread,   _collector,                                    CMSCollector*)                         \
   nonstatic_field(FreeChunk,                   _next,                                         FreeChunk*)                            \
   nonstatic_field(FreeChunk,                   _prev,                                         FreeChunk*)                            \
-  nonstatic_field(FreeChunk,                   _size,                                         size_t)                                \
-  nonstatic_field(LinearAllocBlock,            _word_size,                                    size_t)                                \
-  nonstatic_field(FreeList,                    _size,                                         size_t)                                \
-  nonstatic_field(FreeList,                    _count,                                        ssize_t)                               \
-  nonstatic_field(BinaryTreeDictionary,        _totalSize,                                    size_t)                                \
-  nonstatic_field(CompactibleFreeListSpace,    _dictionary,                                   FreeBlockDictionary*)                  \
-  nonstatic_field(CompactibleFreeListSpace,    _indexedFreeList[0],                           FreeList)                              \
-  nonstatic_field(CompactibleFreeListSpace,    _smallLinearAllocBlock,                        LinearAllocBlock)
-
+  nonstatic_field(FreeChunk,                   _size,                                         size_t)
 
 #define VM_TYPES_CMS(declare_type,                                        \
                      declare_toplevel_type)                               \
@@ -68,14 +57,7 @@
   declare_toplevel_type(SurrogateLockerThread*)                           \
   declare_toplevel_type(CompactibleFreeListSpace*)                        \
   declare_toplevel_type(CMSCollector*)                                    \
-  declare_toplevel_type(FreeChunk*)                                       \
-  declare_toplevel_type(BinaryTreeDictionary*)                            \
-  declare_toplevel_type(FreeBlockDictionary*)                             \
-  declare_toplevel_type(FreeList*)                                        \
-  declare_toplevel_type(FreeList)                                         \
-  declare_toplevel_type(LinearAllocBlock)                                 \
-  declare_toplevel_type(FreeBlockDictionary)                              \
-            declare_type(BinaryTreeDictionary,        FreeBlockDictionary)
+  declare_toplevel_type(FreeChunk*)
 
 #define VM_INT_CONSTANTS_CMS(declare_constant)                            \
   declare_constant(Generation::ConcurrentMarkSweep)                       \
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parNew/asParNewGeneration.cpp openjdk/hotspot/src/share/vm/gc_implementation/parNew/asParNewGeneration.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parNew/asParNewGeneration.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parNew/asParNewGeneration.cpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)asParNewGeneration.cpp	1.11 07/05/05 17:05:25 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parNew/asParNewGeneration.hpp openjdk/hotspot/src/share/vm/gc_implementation/parNew/asParNewGeneration.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parNew/asParNewGeneration.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parNew/asParNewGeneration.hpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)asParNewGeneration.hpp	1.8 07/05/05 17:05:25 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parCardTableModRefBS.cpp openjdk/hotspot/src/share/vm/gc_implementation/parNew/parCardTableModRefBS.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parCardTableModRefBS.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parNew/parCardTableModRefBS.cpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)parCardTableModRefBS.cpp	1.1 07/05/16 19:06:21 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parGCAllocBuffer.cpp openjdk/hotspot/src/share/vm/gc_implementation/parNew/parGCAllocBuffer.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parGCAllocBuffer.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parNew/parGCAllocBuffer.cpp	2008-12-05 16:41:21.897633985 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)parGCAllocBuffer.cpp	1.28 07/05/29 09:44:12 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parGCAllocBuffer.hpp openjdk/hotspot/src/share/vm/gc_implementation/parNew/parGCAllocBuffer.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parGCAllocBuffer.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parNew/parGCAllocBuffer.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)parGCAllocBuffer.hpp	1.30 07/05/29 09:44:13 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parNewGeneration.cpp openjdk/hotspot/src/share/vm/gc_implementation/parNew/parNewGeneration.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parNewGeneration.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parNew/parNewGeneration.cpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)parNewGeneration.cpp	1.102 07/09/07 09:50:43 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parNewGeneration.hpp openjdk/hotspot/src/share/vm/gc_implementation/parNew/parNewGeneration.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parNewGeneration.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parNew/parNewGeneration.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)parNewGeneration.hpp	1.48 07/05/17 15:52:44 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parOopClosures.hpp openjdk/hotspot/src/share/vm/gc_implementation/parNew/parOopClosures.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parOopClosures.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parNew/parOopClosures.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)parOopClosures.hpp	1.2 07/06/22 16:49:48 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parOopClosures.inline.hpp openjdk/hotspot/src/share/vm/gc_implementation/parNew/parOopClosures.inline.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parNew/parOopClosures.inline.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parNew/parOopClosures.inline.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)parOopClosures.inline.hpp	1.1 07/05/16 10:51:44 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -100,4 +97,3 @@
     }
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningGenerations.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningGenerations.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningGenerations.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningGenerations.cpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)adjoiningGenerations.cpp	1.16 07/05/05 17:05:26 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -279,4 +276,3 @@
     }
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningGenerations.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningGenerations.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningGenerations.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningGenerations.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)adjoiningGenerations.hpp	1.14 07/05/05 17:05:25 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningVirtualSpaces.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningVirtualSpaces.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningVirtualSpaces.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningVirtualSpaces.cpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)adjoiningVirtualSpaces.cpp	1.14 07/05/05 17:05:26 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningVirtualSpaces.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningVirtualSpaces.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningVirtualSpaces.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/adjoiningVirtualSpaces.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)adjoiningVirtualSpaces.hpp	1.11 07/05/05 17:05:25 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -109,4 +106,3 @@
 		  size_t init_low_byte_size,
 		  size_t init_high_byte_size);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSOldGen.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSOldGen.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSOldGen.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSOldGen.cpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)asPSOldGen.cpp	1.20 07/10/04 10:49:35 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSOldGen.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSOldGen.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSOldGen.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSOldGen.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)asPSOldGen.hpp	1.14 07/05/05 17:05:26 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSYoungGen.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSYoungGen.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSYoungGen.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSYoungGen.cpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)asPSYoungGen.cpp	1.24 07/10/04 10:49:36 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSYoungGen.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSYoungGen.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSYoungGen.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/asPSYoungGen.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)asPSYoungGen.hpp	1.16 07/05/05 17:05:26 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/cardTableExtension.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/cardTableExtension.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/cardTableExtension.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/cardTableExtension.cpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cardTableExtension.cpp	1.35 07/09/25 16:47:41 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -780,4 +777,3 @@
   }
   return min_start;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/cardTableExtension.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/cardTableExtension.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/cardTableExtension.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/cardTableExtension.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cardTableExtension.hpp	1.20 07/05/05 17:05:26 JVM"
-#endif
 /*
  * Copyright 2001-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -109,4 +106,3 @@
   
 #endif // ASSERT
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskManager.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskManager.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskManager.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskManager.cpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcTaskManager.cpp	1.35 07/06/29 04:07:55 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskManager.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskManager.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskManager.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskManager.hpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)gcTaskManager.hpp	1.29 07/06/29 04:08:20 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskThread.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskThread.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskThread.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskThread.cpp	2008-12-05 16:41:21.907634136 +0100
@@ -1,7 +1,4 @@
 
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcTaskThread.cpp	1.25 07/05/05 17:05:26 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -151,4 +148,3 @@
     }
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskThread.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskThread.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskThread.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/gcTaskThread.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)gcTaskThread.hpp	1.18 07/05/05 17:05:27 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/generationSizer.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/generationSizer.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/generationSizer.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/generationSizer.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)generationSizer.hpp	1.17 07/05/05 17:05:27 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -70,5 +67,3 @@
   size_t perm_gen_size()      { return PermSize; }
   size_t max_perm_gen_size()  { return MaxPermSize; }
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/objectStartArray.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/objectStartArray.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/objectStartArray.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/objectStartArray.cpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)objectStartArray.cpp	1.20 07/05/05 17:05:28 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/objectStartArray.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/objectStartArray.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/objectStartArray.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/objectStartArray.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)objectStartArray.hpp	1.21 07/05/05 17:05:28 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -163,4 +160,3 @@
   // "start", the method will return true.
   bool object_starts_in_range(HeapWord* start_addr, HeapWord* end_addr) const;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.cpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)parMarkBitMap.cpp	1.31 07/10/04 10:49:33 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)parMarkBitMap.hpp	1.16 07/05/05 17:05:27 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.inline.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.inline.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.inline.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parMarkBitMap.inline.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)parMarkBitMap.inline.hpp	1.6 07/05/05 17:05:27 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.cpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)parallelScavengeHeap.cpp	1.95 07/10/04 10:49:31 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)parallelScavengeHeap.hpp	1.62 07/10/04 10:49:30 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.inline.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.inline.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.inline.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/parallelScavengeHeap.inline.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)parallelScavengeHeap.inline.hpp	1.5 07/05/05 17:05:28 JVM"
-#endif
 /*
  * Copyright 2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/pcTasks.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/pcTasks.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/pcTasks.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/pcTasks.cpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)pcTasks.cpp	1.22 07/06/22 16:49:49 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -284,4 +281,3 @@
   // Process any chunks already in the compaction managers stacks.
   cm->drain_chunk_stacks();
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/pcTasks.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/pcTasks.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/pcTasks.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/pcTasks.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)pcTasks.hpp	1.19 07/05/05 17:05:26 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/prefetchQueue.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/prefetchQueue.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/prefetchQueue.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/prefetchQueue.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)prefetchQueue.hpp	1.13 07/05/05 17:05:28 JVM"
-#endif
 /*
  * Copyright 2002-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -68,6 +65,3 @@
     return _prefetch_queue[_prefetch_index];
   }
 };
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psAdaptiveSizePolicy.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psAdaptiveSizePolicy.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psAdaptiveSizePolicy.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psAdaptiveSizePolicy.cpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psAdaptiveSizePolicy.cpp	1.82 07/10/04 10:49:34 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psAdaptiveSizePolicy.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psAdaptiveSizePolicy.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psAdaptiveSizePolicy.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psAdaptiveSizePolicy.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psAdaptiveSizePolicy.hpp	1.64 07/10/04 10:49:35 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psCompactionManager.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psCompactionManager.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psCompactionManager.cpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psCompactionManager.cpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psCompactionManager.cpp	1.17 06/07/10 23:27:02 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psCompactionManager.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psCompactionManager.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psCompactionManager.hpp	2008-11-25 10:12:06.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psCompactionManager.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psCompactionManager.hpp	1.17 07/05/05 17:05:29 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGCAdaptivePolicyCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGCAdaptivePolicyCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGCAdaptivePolicyCounters.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGCAdaptivePolicyCounters.cpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psGCAdaptivePolicyCounters.cpp	1.23 07/05/05 17:05:31 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -200,4 +197,3 @@
     update_counters_from_policy();
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGCAdaptivePolicyCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGCAdaptivePolicyCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGCAdaptivePolicyCounters.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGCAdaptivePolicyCounters.hpp	2008-12-05 16:41:21.917634287 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psGCAdaptivePolicyCounters.hpp	1.21 07/05/05 17:05:29 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGenerationCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGenerationCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGenerationCounters.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGenerationCounters.cpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psGenerationCounters.cpp	1.7 07/05/05 17:05:29 JVM"
-#endif
 
 /*
  * Copyright 2004 Sun Microsystems, Inc.  All Rights Reserved.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGenerationCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGenerationCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGenerationCounters.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psGenerationCounters.hpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psGenerationCounters.hpp	1.8 07/05/05 17:05:29 JVM"
-#endif
 
 /*
  * Copyright 2004 Sun Microsystems, Inc.  All Rights Reserved.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweep.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweep.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweep.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweep.cpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psMarkSweep.cpp	1.92 07/06/08 23:11:01 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweep.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweep.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweep.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweep.hpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psMarkSweep.hpp	1.26 07/05/05 17:05:28 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -86,4 +83,3 @@
   // Time since last full gc (in milliseconds)
   static jlong millis_since_last_gc();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweepDecorator.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweepDecorator.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweepDecorator.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweepDecorator.cpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psMarkSweepDecorator.cpp	1.26 07/05/17 15:52:53 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweepDecorator.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweepDecorator.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweepDecorator.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psMarkSweepDecorator.hpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psMarkSweepDecorator.hpp	1.14 07/05/05 17:05:29 JVM"
-#endif
 /*
  * Copyright 2001-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -74,7 +71,3 @@
   void precompact();
   void compact(bool mangle_free_space);
 };
-
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psOldGen.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psOldGen.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psOldGen.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psOldGen.cpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psOldGen.cpp	1.54 07/05/05 17:05:28 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psOldGen.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psOldGen.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psOldGen.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psOldGen.hpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psOldGen.hpp	1.37 07/05/05 17:05:30 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.cpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psParallelCompact.cpp	1.64 08/06/19 15:33:02 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1030,9 +1027,6 @@
 
   DEBUG_ONLY(mark_bitmap()->verify_clear();)
   DEBUG_ONLY(summary_data().verify_clear();)
-
-  // Have worker threads release resources the next time they run a task.
-  gc_task_manager()->release_all_resources();
 }
 
 void PSParallelCompact::post_compact()
@@ -1978,6 +1972,12 @@
   TimeStamp compaction_start;
   TimeStamp collection_exit;
 
+  // "serial_CM" is needed until the parallel implementation
+  // of the move and update is done.
+  ParCompactionManager* serial_CM = new ParCompactionManager();
+  // Don't initialize more than once.
+  // serial_CM->initialize(&summary_data(), mark_bitmap());
+
   ParallelScavengeHeap* heap = gc_heap();
   GCCause::Cause gc_cause = heap->gc_cause();
   PSYoungGen* young_gen = heap->young_gen();
@@ -1992,10 +1992,6 @@
   PreGCValues pre_gc_values;
   pre_compact(&pre_gc_values);
 
-  // Get the compaction manager reserved for the VM thread.
-  ParCompactionManager* const vmthread_cm =
-    ParCompactionManager::manager_array(gc_task_manager()->workers());
-
   // Place after pre_compact() where the number of invocations is incremented.
   AdaptiveSizePolicyOutput(size_policy, heap->total_collections());
 
@@ -2035,7 +2031,7 @@
     bool marked_for_unloading = false;
 
     marking_start.update();
-    marking_phase(vmthread_cm, maximum_heap_compaction);
+    marking_phase(serial_CM, maximum_heap_compaction);
 
 #ifndef PRODUCT
     if (TraceParallelOldGCMarkingPhase) {
@@ -2066,7 +2062,7 @@
 #endif
 
     bool max_on_system_gc = UseMaximumCompactionOnSystemGC && is_system_gc;
-    summary_phase(vmthread_cm, maximum_heap_compaction || max_on_system_gc);
+    summary_phase(serial_CM, maximum_heap_compaction || max_on_system_gc);
 
 #ifdef ASSERT
     if (VerifyParallelOldWithMarkSweep &&
@@ -2094,13 +2090,13 @@
       // code can use the the forwarding pointers to
       // check the new pointer calculation.  The restore_marks()
       // has to be done before the real compact.
-      vmthread_cm->set_action(ParCompactionManager::VerifyUpdate);
-      compact_perm(vmthread_cm);
-      compact_serial(vmthread_cm);
-      vmthread_cm->set_action(ParCompactionManager::ResetObjects);
-      compact_perm(vmthread_cm);
-      compact_serial(vmthread_cm);
-      vmthread_cm->set_action(ParCompactionManager::UpdateAndCopy);
+      serial_CM->set_action(ParCompactionManager::VerifyUpdate);
+      compact_perm(serial_CM);
+      compact_serial(serial_CM);
+      serial_CM->set_action(ParCompactionManager::ResetObjects);
+      compact_perm(serial_CM);
+      compact_serial(serial_CM);
+      serial_CM->set_action(ParCompactionManager::UpdateAndCopy);
 
       // For debugging only
       PSMarkSweep::restore_marks();
@@ -2111,14 +2107,16 @@
     compaction_start.update();
     // Does the perm gen always have to be done serially because
     // klasses are used in the update of an object?
-    compact_perm(vmthread_cm);
+    compact_perm(serial_CM);
 
     if (UseParallelOldGCCompacting) {
       compact();
     } else {
-      compact_serial(vmthread_cm);
+      compact_serial(serial_CM);
     }
 
+    delete serial_CM;
+
     // Reset the mark bitmap, summary data, and do other bookkeeping.  Must be
     // done before resizing.
     post_compact();
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.hpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psParallelCompact.hpp	1.48 07/10/04 10:49:38 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPermGen.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPermGen.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPermGen.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPermGen.cpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psPermGen.cpp	1.28 07/05/05 17:05:30 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPermGen.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPermGen.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPermGen.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPermGen.hpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psPermGen.hpp	1.18 07/05/05 17:05:30 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -54,4 +51,3 @@
 
   virtual const char* name() const { return "PSPermGen"; }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionLAB.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionLAB.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionLAB.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionLAB.cpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psPromotionLAB.cpp	1.17 07/05/05 17:05:30 JVM"
-#endif
 /*
  * Copyright 2002-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionLAB.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionLAB.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionLAB.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionLAB.hpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psPromotionLAB.hpp	1.13 07/05/05 17:05:30 JVM"
-#endif
 /*
  * Copyright 2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -143,5 +140,3 @@
 
   debug_only(virtual bool lab_is_valid(MemRegion lab));
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.cpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psPromotionManager.cpp	1.30 07/09/25 16:47:41 JVM"
-#endif
 /*
  * Copyright 2002-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.hpp	2008-12-05 16:41:21.927634438 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psPromotionManager.hpp	1.20 07/09/25 16:47:42 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.inline.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.inline.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.inline.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psPromotionManager.inline.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psPromotionManager.inline.hpp	1.19 07/09/25 16:47:42 JVM"
-#endif
 /*
  * Copyright 2002-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.cpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psScavenge.cpp	1.99 07/09/07 09:53:34 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psScavenge.hpp	1.46 07/05/05 17:05:30 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.inline.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.inline.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.inline.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psScavenge.inline.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psScavenge.inline.hpp	1.18 07/05/05 17:05:29 JVM"
-#endif
 /*
  * Copyright 2002-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psTasks.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psTasks.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psTasks.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psTasks.cpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psTasks.cpp	1.29 07/09/25 16:47:43 JVM"
-#endif
 /*
  * Copyright 2002-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -222,5 +219,3 @@
     pm->drain_stacks(false);
   }
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psTasks.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psTasks.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psTasks.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psTasks.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psTasks.hpp	1.21 07/05/05 17:05:29 JVM"
-#endif
 /*
  * Copyright 2002-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -146,4 +143,3 @@
 
   virtual void do_it(GCTaskManager* manager, uint which);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psVirtualspace.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psVirtualspace.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psVirtualspace.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psVirtualspace.cpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psVirtualspace.cpp	1.16 07/05/05 17:05:31 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psVirtualspace.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psVirtualspace.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psVirtualspace.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psVirtualspace.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psVirtualspace.hpp	1.15 07/05/05 17:05:31 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psYoungGen.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psYoungGen.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psYoungGen.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psYoungGen.cpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psYoungGen.cpp	1.68 07/10/04 10:49:36 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psYoungGen.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psYoungGen.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/psYoungGen.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psYoungGen.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psYoungGen.hpp	1.48 07/05/05 17:05:31 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmPSOperations.cpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmPSOperations.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmPSOperations.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmPSOperations.cpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmPSOperations.cpp	1.1 07/05/14 11:57:11 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -102,4 +99,3 @@
   }
   notify_gc_end();
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmPSOperations.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmPSOperations.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmPSOperations.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmPSOperations.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vmPSOperations.hpp	1.2 07/05/16 16:53:01 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmStructs_parallelgc.hpp openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmStructs_parallelgc.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmStructs_parallelgc.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/vmStructs_parallelgc.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmStructs_parallelgc.hpp	1.2 07/05/01 19:01:30 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/adaptiveSizePolicy.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/adaptiveSizePolicy.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/adaptiveSizePolicy.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/adaptiveSizePolicy.cpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)adaptiveSizePolicy.cpp	1.13 07/05/05 17:05:33 JVM"
-#endif
 /*
  * Copyright 2004-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/adaptiveSizePolicy.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/adaptiveSizePolicy.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/adaptiveSizePolicy.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/adaptiveSizePolicy.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)adaptiveSizePolicy.hpp	1.15 07/05/05 17:05:32 JVM"
-#endif
 /*
  * Copyright 2004-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/ageTable.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/ageTable.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/ageTable.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/ageTable.cpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ageTable.cpp	1.36 07/05/05 17:05:33 JVM"
-#endif
 /*
  * Copyright 1997-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/ageTable.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/ageTable.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/ageTable.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/ageTable.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ageTable.hpp	1.29 07/05/05 17:05:32 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/cSpaceCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/cSpaceCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/cSpaceCounters.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/cSpaceCounters.cpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cSpaceCounters.cpp	1.10 07/05/05 17:05:32 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/cSpaceCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/cSpaceCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/cSpaceCounters.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/cSpaceCounters.hpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cSpaceCounters.hpp	1.12 07/05/05 17:05:33 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -78,4 +75,3 @@
       return _space->used();
     }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/collectorCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/collectorCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/collectorCounters.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/collectorCounters.cpp	2008-12-05 16:41:21.937634589 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)collectorCounters.cpp	1.10 07/05/05 17:05:32 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/collectorCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/collectorCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/collectorCounters.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/collectorCounters.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)collectorCounters.hpp	1.10 07/05/05 17:05:33 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -81,4 +78,3 @@
       if (UsePerfData) _c->last_exit_counter()->set_value(os::elapsed_counter());
     }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gSpaceCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gSpaceCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gSpaceCounters.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gSpaceCounters.cpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gSpaceCounters.cpp	1.11 07/05/05 17:05:33 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gSpaceCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gSpaceCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gSpaceCounters.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gSpaceCounters.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)gSpaceCounters.hpp	1.14 07/05/05 17:05:33 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -103,4 +100,3 @@
       return _gen->used();
     }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcAdaptivePolicyCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gcAdaptivePolicyCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcAdaptivePolicyCounters.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gcAdaptivePolicyCounters.cpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcAdaptivePolicyCounters.cpp	1.10 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2004-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcAdaptivePolicyCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gcAdaptivePolicyCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcAdaptivePolicyCounters.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gcAdaptivePolicyCounters.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcAdaptivePolicyCounters.hpp	1.11 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2004-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcPolicyCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gcPolicyCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcPolicyCounters.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gcPolicyCounters.cpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcPolicyCounters.cpp	1.13 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcPolicyCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gcPolicyCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcPolicyCounters.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gcPolicyCounters.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)gcPolicyCounters.hpp	1.18 07/05/05 17:05:33 JVM"
-#endif
 /*
  * Copyright 2002-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcStats.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gcStats.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcStats.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gcStats.cpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcStats.cpp	1.9 07/05/05 17:05:33 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcStats.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gcStats.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcStats.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gcStats.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)gcStats.hpp	1.10 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcUtil.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gcUtil.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcUtil.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gcUtil.cpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcUtil.cpp	1.21 07/05/05 17:05:32 JVM"
-#endif
 /*
  * Copyright 2002-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcUtil.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/gcUtil.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/gcUtil.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/gcUtil.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)gcUtil.hpp	1.19 07/05/05 17:05:32 JVM"
-#endif
 /*
  * Copyright 2002-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -177,4 +174,3 @@
     _timer->start();
   }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/generationCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/generationCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/generationCounters.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/generationCounters.cpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)generationCounters.cpp	1.10 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/generationCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/generationCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/generationCounters.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/generationCounters.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)generationCounters.hpp	1.14 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/immutableSpace.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/immutableSpace.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/immutableSpace.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/immutableSpace.cpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)immutableSpace.cpp	1.13 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -80,4 +77,3 @@
   }
   guarantee(p == end(), "end of last object must match end of space");
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/immutableSpace.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/immutableSpace.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/immutableSpace.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/immutableSpace.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)immutableSpace.hpp	1.14 07/05/05 17:05:33 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/isGCActiveMark.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/isGCActiveMark.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/isGCActiveMark.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/isGCActiveMark.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)isGCActiveMark.hpp	1.9 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/liveRange.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/liveRange.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/liveRange.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/liveRange.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)liveRange.hpp	1.11 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2001-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/markSweep.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/markSweep.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/markSweep.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/markSweep.cpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)markSweep.cpp	1.196 07/05/05 17:05:35 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -358,4 +355,3 @@
 }
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/markSweep.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/markSweep.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/markSweep.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/markSweep.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)markSweep.hpp	1.67 07/05/17 15:52:55 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/markSweep.inline.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/markSweep.inline.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/markSweep.inline.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/markSweep.inline.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)markSweep.inline.hpp	1.17 07/05/29 09:44:12 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/mutableNUMASpace.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/mutableNUMASpace.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/mutableNUMASpace.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/mutableNUMASpace.cpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)mutableNUMASpace.cpp	1.8 07/05/05 17:05:35 JVM"
-#endif
 
 /*
  * Copyright 2006-2007 Sun Microsystems, Inc.  All Rights Reserved.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/mutableNUMASpace.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/mutableNUMASpace.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/mutableNUMASpace.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/mutableNUMASpace.hpp	2008-12-05 16:41:21.947634739 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)mutableNUMASpace.hpp	1.8 07/05/05 17:05:34 JVM"
-#endif
 /*
  * Copyright 2006-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/mutableSpace.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/mutableSpace.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/mutableSpace.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/mutableSpace.cpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)mutableSpace.cpp	1.22 07/05/05 17:05:35 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/mutableSpace.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/mutableSpace.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/mutableSpace.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/mutableSpace.hpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)mutableSpace.hpp	1.22 07/05/05 17:05:35 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/spaceCounters.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/spaceCounters.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/spaceCounters.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/spaceCounters.cpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)spaceCounters.cpp	1.10 07/05/05 17:05:35 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/spaceCounters.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/spaceCounters.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/spaceCounters.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/spaceCounters.hpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)spaceCounters.hpp	1.11 07/05/05 17:05:35 JVM"
-#endif
 /*
  * Copyright 2002-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/vmGCOperations.cpp openjdk/hotspot/src/share/vm/gc_implementation/shared/vmGCOperations.cpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/vmGCOperations.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/vmGCOperations.cpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vmGCOperations.cpp	1.21 07/05/29 09:44:12 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_implementation/shared/vmGCOperations.hpp openjdk/hotspot/src/share/vm/gc_implementation/shared/vmGCOperations.hpp
--- openjdk6/hotspot/src/share/vm/gc_implementation/shared/vmGCOperations.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_implementation/shared/vmGCOperations.hpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vmGCOperations.hpp	1.14 07/05/29 09:44:12 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_interface/collectedHeap.cpp openjdk/hotspot/src/share/vm/gc_interface/collectedHeap.cpp
--- openjdk6/hotspot/src/share/vm/gc_interface/collectedHeap.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_interface/collectedHeap.cpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)collectedHeap.cpp	1.24 07/07/19 19:08:26 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_interface/collectedHeap.hpp openjdk/hotspot/src/share/vm/gc_interface/collectedHeap.hpp
--- openjdk6/hotspot/src/share/vm/gc_interface/collectedHeap.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_interface/collectedHeap.hpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)collectedHeap.hpp	1.58 07/09/07 10:56:50 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_interface/collectedHeap.inline.hpp openjdk/hotspot/src/share/vm/gc_interface/collectedHeap.inline.hpp
--- openjdk6/hotspot/src/share/vm/gc_interface/collectedHeap.inline.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_interface/collectedHeap.inline.hpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)collectedHeap.inline.hpp	1.50 07/09/07 10:56:50 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_interface/gcCause.cpp openjdk/hotspot/src/share/vm/gc_interface/gcCause.cpp
--- openjdk6/hotspot/src/share/vm/gc_interface/gcCause.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_interface/gcCause.cpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcCause.cpp	1.20 07/05/05 17:05:40 JVM"
-#endif
 /*
  * Copyright 2002-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/gc_interface/gcCause.hpp openjdk/hotspot/src/share/vm/gc_interface/gcCause.hpp
--- openjdk6/hotspot/src/share/vm/gc_interface/gcCause.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/gc_interface/gcCause.hpp	2008-12-05 16:41:21.957634890 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)gcCause.hpp	1.24 07/05/05 17:05:40 JVM"
-#endif
 /*
  * Copyright 2002-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/includeDB_core openjdk/hotspot/src/share/vm/includeDB_core
--- openjdk6/hotspot/src/share/vm/includeDB_core	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/includeDB_core	2008-12-05 16:41:21.957634890 +0100
@@ -720,11 +720,6 @@
 ciObjArray.hpp                          ciClassList.hpp
 ciObjArray.hpp                          objArrayOop.hpp
 
-ciObjArray.cpp                          ciObjArray.hpp
-ciObjArray.cpp                          ciNullObject.hpp
-ciObjArray.cpp                          ciUtilities.hpp
-ciObjArray.cpp                          objArrayOop.hpp
-
 ciObjArrayKlass.cpp                     ciInstanceKlass.hpp
 ciObjArrayKlass.cpp                     ciObjArrayKlass.hpp
 ciObjArrayKlass.cpp                     ciObjArrayKlassKlass.hpp
@@ -3073,7 +3068,6 @@
 
 oopMapCache.cpp                         allocation.inline.hpp
 oopMapCache.cpp                         handles.inline.hpp
-oopMapCache.cpp                         jvmtiRedefineClassesTrace.hpp
 oopMapCache.cpp                         oop.inline.hpp
 oopMapCache.cpp                         oopMapCache.hpp
 oopMapCache.cpp                         resourceArea.hpp
diff -ruNb openjdk6/hotspot/src/share/vm/includeDB_gc_parallel openjdk/hotspot/src/share/vm/includeDB_gc_parallel
--- openjdk6/hotspot/src/share/vm/includeDB_gc_parallel	2008-11-25 10:12:03.000000000 +0100
+++ openjdk/hotspot/src/share/vm/includeDB_gc_parallel	2008-12-05 16:41:21.967635041 +0100
@@ -50,7 +50,6 @@
 
 instanceRefKlass.cpp                    oop.pcgc.inline.hpp
 instanceRefKlass.cpp                    psPromotionManager.inline.hpp
-instanceRefKlass.cpp                    oop.pcgc.inline.hpp
 instanceRefKlass.cpp                    psScavenge.inline.hpp
 instanceRefKlass.cpp                    parOopClosures.inline.hpp
 
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/abstractInterpreter.hpp openjdk/hotspot/src/share/vm/interpreter/abstractInterpreter.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/abstractInterpreter.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/abstractInterpreter.hpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)abstractInterpreter.hpp	1.1 07/08/29 13:42:23 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -246,4 +243,3 @@
  public:
   AbstractInterpreterGenerator(StubQueue* _code);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecode.cpp openjdk/hotspot/src/share/vm/interpreter/bytecode.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecode.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecode.cpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)bytecode.cpp	1.69 07/05/05 17:05:36 JVM"
-#endif
 /*
  * Copyright 1997-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -206,4 +203,3 @@
 }
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecode.hpp openjdk/hotspot/src/share/vm/interpreter/bytecode.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecode.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecode.hpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bytecode.hpp	1.67 07/05/05 17:05:36 JVM"
-#endif
 /*
  * Copyright 1997-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeHistogram.cpp openjdk/hotspot/src/share/vm/interpreter/bytecodeHistogram.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeHistogram.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeHistogram.cpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)bytecodeHistogram.cpp	1.29 07/05/05 17:05:36 JVM"
-#endif
 /*
  * Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeHistogram.hpp openjdk/hotspot/src/share/vm/interpreter/bytecodeHistogram.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeHistogram.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeHistogram.hpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bytecodeHistogram.hpp	1.28 07/08/29 13:42:23 JVM"
-#endif
 /*
  * Copyright 1997-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreter.cpp openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreter.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreter.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreter.cpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)bytecodeInterpreter.cpp	1.31 07/08/29 13:42:24 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreter.hpp openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreter.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreter.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreter.hpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bytecodeInterpreter.hpp	1.24 07/08/29 13:42:24 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreter.inline.hpp openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreter.inline.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreter.inline.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreter.inline.hpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bytecodeInterpreter.inline.hpp	1.10 07/08/29 13:42:24 JVM"
-#endif
 /*
  * Copyright 2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreterWithChecks.xml openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreterWithChecks.xml
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreterWithChecks.xml	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreterWithChecks.xml	2008-12-05 16:41:21.967635041 +0100
@@ -1,25 +1,7 @@
 <?xml version="1.0"?> 
 <!-- 
-     Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
-     DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
-
-     This code is free software; you can redistribute it and/or modify it
-     under the terms of the GNU General Public License version 2 only, as
-     published by the Free Software Foundation.
-
-     This code is distributed in the hope that it will be useful, but WITHOUT
-     ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-     FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
-     version 2 for more details (a copy is included in the LICENSE file that
-     accompanied this code).
-
-     You should have received a copy of the GNU General Public License version
-     2 along with this work; if not, write to the Free Software Foundation,
-     Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
-
-     Please contact Sun Microsystems, Inc., 4150 Network Circle, Santa Clara,
-     CA 95054 USA or visit www.sun.com if you need additional information or
-     have any questions.
+     Copyright 2006 Sun Microsystems, Inc.  All rights reserved.
+     SUN PROPRIETARY/CONFIDENTIAL.  Use is subject to license terms.
 -->
 <!DOCTYPE processcode [
   <!ELEMENT processcode ANY>
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreterWithChecks.xsl openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreterWithChecks.xsl
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeInterpreterWithChecks.xsl	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeInterpreterWithChecks.xsl	2008-12-05 16:41:21.967635041 +0100
@@ -1,25 +1,7 @@
 <?xml version="1.0"?> 
 <!-- 
-     Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
-     DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
-
-     This code is free software; you can redistribute it and/or modify it
-     under the terms of the GNU General Public License version 2 only, as
-     published by the Free Software Foundation.
-
-     This code is distributed in the hope that it will be useful, but WITHOUT
-     ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
-     FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
-     version 2 for more details (a copy is included in the LICENSE file that
-     accompanied this code).
-
-     You should have received a copy of the GNU General Public License version
-     2 along with this work; if not, write to the Free Software Foundation,
-     Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
-
-     Please contact Sun Microsystems, Inc., 4150 Network Circle, Santa Clara,
-     CA 95054 USA or visit www.sun.com if you need additional information or
-     have any questions.
+     Copyright 2006 Sun Microsystems, Inc.  All rights reserved.
+     SUN PROPRIETARY/CONFIDENTIAL.  Use is subject to license terms.
 -->
 
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeStream.cpp openjdk/hotspot/src/share/vm/interpreter/bytecodeStream.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeStream.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeStream.cpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)bytecodeStream.cpp	1.47 07/06/20 14:52:27 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeStream.hpp openjdk/hotspot/src/share/vm/interpreter/bytecodeStream.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeStream.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeStream.hpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bytecodeStream.hpp	1.54 07/06/20 14:52:27 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -173,5 +170,3 @@
 
   bool            is_active_breakpoint() const   { return Bytecodes::is_active_breakpoint_at(bcp()); }
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeTracer.cpp openjdk/hotspot/src/share/vm/interpreter/bytecodeTracer.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeTracer.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeTracer.cpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)bytecodeTracer.cpp	1.53 07/09/28 10:23:17 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodeTracer.hpp openjdk/hotspot/src/share/vm/interpreter/bytecodeTracer.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodeTracer.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodeTracer.hpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bytecodeTracer.hpp	1.25 07/09/28 10:23:17 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodes.cpp openjdk/hotspot/src/share/vm/interpreter/bytecodes.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodes.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodes.cpp	2008-12-05 16:41:21.967635041 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)bytecodes.cpp	1.97 07/06/20 14:52:27 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/bytecodes.hpp openjdk/hotspot/src/share/vm/interpreter/bytecodes.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/bytecodes.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/bytecodes.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bytecodes.hpp	1.79 07/06/20 14:52:28 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -359,4 +356,3 @@
   // Initialization
   static void        initialize     ();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/cppInterpreter.cpp openjdk/hotspot/src/share/vm/interpreter/cppInterpreter.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/cppInterpreter.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/cppInterpreter.cpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cppInterpreter.cpp	1.1 07/08/29 13:42:24 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -136,4 +133,3 @@
 }
 
 #endif // CC_INTERP
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/cppInterpreter.hpp openjdk/hotspot/src/share/vm/interpreter/cppInterpreter.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/cppInterpreter.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/cppInterpreter.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cppInterpreter.hpp	1.1 07/08/29 13:42:24 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/cppInterpreterGenerator.hpp openjdk/hotspot/src/share/vm/interpreter/cppInterpreterGenerator.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/cppInterpreterGenerator.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/cppInterpreterGenerator.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cppInterpreterGenerator.hpp	1.1 07/08/07 10:57:15 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/interpreter.cpp openjdk/hotspot/src/share/vm/interpreter/interpreter.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/interpreter.cpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/interpreter.cpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)interpreter.cpp	1.247 07/08/29 13:42:25 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/interpreter.hpp openjdk/hotspot/src/share/vm/interpreter/interpreter.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/interpreter.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/interpreter.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)interpreter.hpp	1.154 07/08/29 13:42:25 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -135,4 +132,3 @@
   static InterpreterCodelet* codelet_containing(address pc)     { return (InterpreterCodelet*)_code->stub_containing(pc); }
 #include "incls/_interpreter_pd.hpp.incl"
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/interpreterGenerator.hpp openjdk/hotspot/src/share/vm/interpreter/interpreterGenerator.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/interpreterGenerator.hpp	2008-11-25 10:12:07.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/interpreterGenerator.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)interpreterGenerator.hpp	1.1 07/08/07 10:57:15 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -39,5 +36,3 @@
 #include "incls/_interpreterGenerator_pd.hpp.incl"
 
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/interpreterRuntime.cpp openjdk/hotspot/src/share/vm/interpreter/interpreterRuntime.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/interpreterRuntime.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/interpreterRuntime.cpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)interpreterRuntime.cpp	1.488 07/08/29 13:42:25 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/interpreterRuntime.hpp openjdk/hotspot/src/share/vm/interpreter/interpreterRuntime.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/interpreterRuntime.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/interpreterRuntime.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)interpreterRuntime.hpp	1.143 07/05/05 17:05:38 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/invocationCounter.cpp openjdk/hotspot/src/share/vm/interpreter/invocationCounter.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/invocationCounter.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/invocationCounter.cpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)invocationCounter.cpp	1.60 07/05/05 17:05:38 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -171,4 +168,3 @@
 void invocationCounter_init() {
   InvocationCounter::reinitialize(DelayCompilationDuringStartup);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/invocationCounter.hpp openjdk/hotspot/src/share/vm/interpreter/invocationCounter.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/invocationCounter.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/invocationCounter.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)invocationCounter.hpp	1.50 07/08/29 13:42:26 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -138,5 +135,3 @@
   if (c > 0 && new_count == 0) new_count = 1; 
   set(state(), new_count);
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/linkResolver.cpp openjdk/hotspot/src/share/vm/interpreter/linkResolver.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/linkResolver.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/linkResolver.cpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)linkResolver.cpp	1.174 07/05/05 17:05:40 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1001,4 +998,3 @@
 }
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/linkResolver.hpp openjdk/hotspot/src/share/vm/interpreter/linkResolver.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/linkResolver.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/linkResolver.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)linkResolver.hpp	1.74 07/05/05 17:05:39 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -172,4 +169,3 @@
 
   static void resolve_invoke         (CallInfo& result, Handle recv, constantPoolHandle pool, int index, Bytecodes::Code byte, TRAPS);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/oopMapCache.cpp openjdk/hotspot/src/share/vm/interpreter/oopMapCache.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/oopMapCache.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/oopMapCache.cpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)oopMapCache.cpp	1.86 08/11/24 12:22:25 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -535,10 +532,6 @@
     if (!_array[i].is_empty() && _array[i].method()->is_old()) {
       // Cache entry is occupied by an old redefined method and we don't want
       // to pin it down so flush the entry.
-      RC_TRACE(0x08000000, ("flush: %s(%s): cached entry @%d",
-        _array[i].method()->name()->as_C_string(),
-        _array[i].method()->signature()->as_C_string(), i));
-
       _array[i].flush();
     }
 }
@@ -584,15 +577,6 @@
   // Entry is not in hashtable. 
   // Compute entry and return it
 
-  if (method->should_not_be_cached()) {
-    // It is either not safe or not a good idea to cache this methodOop
-    // at this time. We give the caller of lookup() a copy of the
-    // interesting info via parameter entry_for, but we don't add it to
-    // the cache. See the gory details in methodOop.cpp.
-    compute_one_oop_map(method, bci, entry_for);
-    return;
-  }
-
   // First search for an empty slot
   for(i = 0; i < _probe_depth; i++) {
     entry  = entry_at(probe + i);
@@ -600,6 +584,12 @@
       entry->fill(method, bci);
       entry_for->resource_copy(entry);
       assert(!entry_for->is_empty(), "A non-empty oop map should be returned");
+      if (method->is_old()) {
+        // The caller of lookup() will receive a copy of the interesting
+        // info via entry_for, but we don't keep an old redefined method in
+        // the cache to avoid pinning down the method.
+        entry->flush();
+      }
       return; 
     }
   }
@@ -633,6 +623,13 @@
   }
   assert(!entry_for->is_empty(), "A non-empty oop map should be returned");
 
+  if (method->is_old()) {
+    // The caller of lookup() will receive a copy of the interesting
+    // info via entry_for, but we don't keep an old redefined method in
+    // the cache to avoid pinning down the method.
+    entry->flush();
+  }
+
   return;
 }
 
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/oopMapCache.hpp openjdk/hotspot/src/share/vm/interpreter/oopMapCache.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/oopMapCache.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/oopMapCache.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oopMapCache.hpp	1.57 07/05/05 17:05:39 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -191,4 +188,3 @@
   // Returns total no. of bytes allocated as part of OopMapCache's
   static long memory_usage()                     PRODUCT_RETURN0;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/rewriter.cpp openjdk/hotspot/src/share/vm/interpreter/rewriter.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/rewriter.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/rewriter.cpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)rewriter.cpp	1.46 07/08/29 13:42:26 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/rewriter.hpp openjdk/hotspot/src/share/vm/interpreter/rewriter.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/rewriter.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/rewriter.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)rewriter.hpp	1.20 07/05/05 17:05:40 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -38,4 +35,3 @@
  public:
   static void rewrite(instanceKlassHandle klass, TRAPS);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/templateInterpreter.cpp openjdk/hotspot/src/share/vm/interpreter/templateInterpreter.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/templateInterpreter.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/templateInterpreter.cpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)templateInterpreter.cpp	1.1 07/08/29 13:42:26 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/templateInterpreter.hpp openjdk/hotspot/src/share/vm/interpreter/templateInterpreter.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/templateInterpreter.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/templateInterpreter.hpp	2008-12-05 16:41:21.977635192 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)templateInterpreter.hpp	1.2 07/09/25 17:07:43 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/templateInterpreterGenerator.hpp openjdk/hotspot/src/share/vm/interpreter/templateInterpreterGenerator.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/templateInterpreterGenerator.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/templateInterpreterGenerator.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)templateInterpreterGenerator.hpp	1.1 07/08/07 10:57:15 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/templateTable.cpp openjdk/hotspot/src/share/vm/interpreter/templateTable.cpp
--- openjdk6/hotspot/src/share/vm/interpreter/templateTable.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/templateTable.cpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)templateTable.cpp	1.108 07/05/05 17:05:37 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/interpreter/templateTable.hpp openjdk/hotspot/src/share/vm/interpreter/templateTable.hpp
--- openjdk6/hotspot/src/share/vm/interpreter/templateTable.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/interpreter/templateTable.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)templateTable.hpp	1.91 07/05/05 17:05:39 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/libadt/dict.cpp openjdk/hotspot/src/share/vm/libadt/dict.cpp
--- openjdk6/hotspot/src/share/vm/libadt/dict.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/libadt/dict.cpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)dict.cpp	1.35 07/05/05 17:05:41 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -384,4 +381,3 @@
   }
   _key = _value = NULL;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/libadt/dict.hpp openjdk/hotspot/src/share/vm/libadt/dict.hpp
--- openjdk6/hotspot/src/share/vm/libadt/dict.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/libadt/dict.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)dict.hpp	1.24 07/05/05 17:05:40 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -118,4 +115,3 @@
 };
 
 #endif // _DICT_
-
diff -ruNb openjdk6/hotspot/src/share/vm/libadt/port.cpp openjdk/hotspot/src/share/vm/libadt/port.cpp
--- openjdk6/hotspot/src/share/vm/libadt/port.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/libadt/port.cpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)port.cpp	1.21 07/05/05 17:05:41 JVM"
-#endif
 /*
  * Copyright 1997-1998 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/libadt/port.hpp openjdk/hotspot/src/share/vm/libadt/port.hpp
--- openjdk6/hotspot/src/share/vm/libadt/port.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/libadt/port.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)port.hpp	1.44 07/05/05 17:05:41 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/libadt/set.cpp openjdk/hotspot/src/share/vm/libadt/set.cpp
--- openjdk6/hotspot/src/share/vm/libadt/set.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/libadt/set.cpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)set.cpp	1.26 07/05/05 17:05:41 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/libadt/set.hpp openjdk/hotspot/src/share/vm/libadt/set.hpp
--- openjdk6/hotspot/src/share/vm/libadt/set.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/libadt/set.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)set.hpp	1.23 07/05/05 17:05:41 JVM"
-#endif
 /*
  * Copyright 1997 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -252,4 +249,3 @@
 };
 
 #endif // _SET_
-
diff -ruNb openjdk6/hotspot/src/share/vm/libadt/vectset.cpp openjdk/hotspot/src/share/vm/libadt/vectset.cpp
--- openjdk6/hotspot/src/share/vm/libadt/vectset.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/libadt/vectset.cpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vectset.cpp	1.25 07/05/05 17:05:41 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -391,5 +388,3 @@
   } while( i<s->size );
   return max_juint;             // No element, iterated them all
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/libadt/vectset.hpp openjdk/hotspot/src/share/vm/libadt/vectset.hpp
--- openjdk6/hotspot/src/share/vm/libadt/vectset.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/libadt/vectset.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vectset.hpp	1.22 07/05/05 17:05:41 JVM"
-#endif
 /*
  * Copyright 1997 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -177,4 +174,3 @@
 };
 
 #endif // _VECTOR_SET_
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/allocation.cpp openjdk/hotspot/src/share/vm/memory/allocation.cpp
--- openjdk6/hotspot/src/share/vm/memory/allocation.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/allocation.cpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)allocation.cpp	1.72 07/05/05 17:05:42 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -540,4 +537,3 @@
 }
 
 #endif // Non-product
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/allocation.hpp openjdk/hotspot/src/share/vm/memory/allocation.hpp
--- openjdk6/hotspot/src/share/vm/memory/allocation.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/allocation.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)allocation.hpp	1.77 07/05/05 17:05:42 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -410,4 +407,3 @@
   ReallocMark()   PRODUCT_RETURN;
   void check()    PRODUCT_RETURN;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/allocation.inline.hpp openjdk/hotspot/src/share/vm/memory/allocation.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/allocation.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/allocation.inline.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)allocation.inline.hpp	1.22 07/05/05 17:05:42 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/allocationStats.cpp openjdk/hotspot/src/share/vm/memory/allocationStats.cpp
--- openjdk6/hotspot/src/share/vm/memory/allocationStats.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/allocationStats.cpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)allocationStats.cpp	1.6 07/05/05 17:05:42 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -31,4 +28,3 @@
 // Technically this should be derived from machine speed, and
 // ideally it would be dynamically adjusted.
 float AllocationStats::_threshold = ((float)CMS_SweepTimerThresholdMillis)/1000;
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/allocationStats.hpp openjdk/hotspot/src/share/vm/memory/allocationStats.hpp
--- openjdk6/hotspot/src/share/vm/memory/allocationStats.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/allocationStats.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)allocationStats.hpp	1.19 07/05/05 17:05:41 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/barrierSet.hpp openjdk/hotspot/src/share/vm/memory/barrierSet.hpp
--- openjdk6/hotspot/src/share/vm/memory/barrierSet.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/barrierSet.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)barrierSet.hpp	1.18 07/05/05 17:05:43 JVM"
-#endif
 /*
  * Copyright 2000-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/barrierSet.inline.hpp openjdk/hotspot/src/share/vm/memory/barrierSet.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/barrierSet.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/barrierSet.inline.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)barrierSet.inline.hpp	1.12 07/05/05 17:05:43 JVM"
-#endif
 /*
  * Copyright 2001-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/blockOffsetTable.cpp openjdk/hotspot/src/share/vm/memory/blockOffsetTable.cpp
--- openjdk6/hotspot/src/share/vm/memory/blockOffsetTable.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/blockOffsetTable.cpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)blockOffsetTable.cpp	1.82 07/05/05 17:05:42 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/blockOffsetTable.hpp openjdk/hotspot/src/share/vm/memory/blockOffsetTable.hpp
--- openjdk6/hotspot/src/share/vm/memory/blockOffsetTable.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/blockOffsetTable.hpp	2008-12-05 16:41:21.987635343 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)blockOffsetTable.hpp	1.57 07/05/05 17:05:43 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/blockOffsetTable.inline.hpp openjdk/hotspot/src/share/vm/memory/blockOffsetTable.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/blockOffsetTable.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/blockOffsetTable.inline.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)blockOffsetTable.inline.hpp	1.20 07/05/05 17:05:43 JVM"
-#endif
 /*
  * Copyright 2000-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/cardTableModRefBS.cpp openjdk/hotspot/src/share/vm/memory/cardTableModRefBS.cpp
--- openjdk6/hotspot/src/share/vm/memory/cardTableModRefBS.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/cardTableModRefBS.cpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cardTableModRefBS.cpp	1.60 07/12/05 23:34:34 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -54,7 +51,7 @@
   _whole_heap(whole_heap),
   _guard_index(cards_required(whole_heap.word_size()) - 1),
   _last_valid_index(_guard_index - 1),
-  _page_size(os::vm_page_size()),
+  _page_size(os::page_size_for_region(_guard_index + 1, _guard_index + 1, 1)),
   _byte_map_size(compute_byte_map_size())
 {
   _kind = BarrierSet::CardTableModRef;
diff -ruNb openjdk6/hotspot/src/share/vm/memory/cardTableModRefBS.hpp openjdk/hotspot/src/share/vm/memory/cardTableModRefBS.hpp
--- openjdk6/hotspot/src/share/vm/memory/cardTableModRefBS.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/cardTableModRefBS.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cardTableModRefBS.hpp	1.53 07/10/04 10:49:32 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/cardTableRS.cpp openjdk/hotspot/src/share/vm/memory/cardTableRS.cpp
--- openjdk6/hotspot/src/share/vm/memory/cardTableRS.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/cardTableRS.cpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cardTableRS.cpp	1.45 07/05/25 12:54:50 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/cardTableRS.hpp openjdk/hotspot/src/share/vm/memory/cardTableRS.hpp
--- openjdk6/hotspot/src/share/vm/memory/cardTableRS.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/cardTableRS.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cardTableRS.hpp	1.29 07/05/05 17:05:44 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/classify.cpp openjdk/hotspot/src/share/vm/memory/classify.cpp
--- openjdk6/hotspot/src/share/vm/memory/classify.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/classify.cpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)classify.cpp	1.9 07/05/05 17:05:44 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/classify.hpp openjdk/hotspot/src/share/vm/memory/classify.hpp
--- openjdk6/hotspot/src/share/vm/memory/classify.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/classify.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)classify.hpp	1.10 07/05/05 17:05:42 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/collectorPolicy.cpp openjdk/hotspot/src/share/vm/memory/collectorPolicy.cpp
--- openjdk6/hotspot/src/share/vm/memory/collectorPolicy.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/collectorPolicy.cpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)collectorPolicy.cpp	1.90 07/10/04 10:49:37 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/collectorPolicy.hpp openjdk/hotspot/src/share/vm/memory/collectorPolicy.hpp
--- openjdk6/hotspot/src/share/vm/memory/collectorPolicy.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/collectorPolicy.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)collectorPolicy.hpp	1.41 07/05/29 09:44:14 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -262,4 +259,3 @@
 
   void initialize_gc_policy_counters();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/compactPermGen.hpp openjdk/hotspot/src/share/vm/memory/compactPermGen.hpp
--- openjdk6/hotspot/src/share/vm/memory/compactPermGen.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/compactPermGen.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compactPermGen.hpp	1.17 07/05/05 17:05:45 JVM"
-#endif
 /*
  * Copyright 2000-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/compactingPermGenGen.cpp openjdk/hotspot/src/share/vm/memory/compactingPermGenGen.cpp
--- openjdk6/hotspot/src/share/vm/memory/compactingPermGenGen.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/compactingPermGenGen.cpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compactingPermGenGen.cpp	1.22 08/11/24 12:22:45 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -29,27 +26,9 @@
 #include "incls/_compactingPermGenGen.cpp.incl"
 
 
-// An ObjectClosure helper: Recursively adjust all pointers in an object
-// and all objects by referenced it. Clear marks on objects in order to
-// prevent visiting any object twice. This helper is used when the
-// RedefineClasses() API has been called.
-
-class AdjustSharedObjectClosure : public ObjectClosure {
-public:
-  void do_object(oop obj) {
-    if (obj->is_shared_readwrite()) {
-      if (obj->mark()->is_marked()) {
-        obj->init_mark();         // Don't revisit this object.
-        obj->adjust_pointers();   // Adjust this object's references.
-      }
-    }
-  }
-};
-
-
-// An OopClosure helper: Recursively adjust all pointers in an object
-// and all objects by referenced it. Clear marks on objects in order
-// to prevent visiting any object twice.
+// Recursively adjust all pointers in an object and all objects by
+// referenced it.  Clear marks on objects in order to prevent visiting
+// any object twice.
 
 class RecursiveAdjustSharedObjectClosure : public OopClosure {
 public:
@@ -295,27 +274,9 @@
 // objects in the space will page in more objects than we need.
 // Instead, use the system dictionary as strong roots into the read
 // write space.
-//
-// If a RedefineClasses() call has been made, then we have to iterate
-// over the entire shared read-write space in order to find all the
-// objects that need to be forwarded. For example, it is possible for
-// an nmethod to be found and marked in GC phase-1 only for the nmethod
-// to be freed by the time we reach GC phase-3. The underlying method
-// is still marked, but we can't (easily) find it in GC phase-3 so we
-// blow up in GC phase-4. With RedefineClasses() we want replaced code
-// (EMCP or obsolete) to go away (i.e., be collectible) once it is no
-// longer being executed by any thread so we keep minimal attachments
-// to the replaced code. However, we can't guarantee when those EMCP
-// or obsolete methods will be collected so they may still be out there
-// even after we've severed our minimal attachments.
 
 void CompactingPermGenGen::pre_adjust_pointers() {
   if (spec()->enable_shared_spaces()) {
-    if (JvmtiExport::has_redefined_a_class()) {
-      // RedefineClasses() requires a brute force approach
-      AdjustSharedObjectClosure blk;
-      rw_space()->object_iterate(&blk);
-    } else {
       RecursiveAdjustSharedObjectClosure blk;
       Universe::oops_do(&blk);
       StringTable::oops_do(&blk);
@@ -323,7 +284,6 @@
       TraversePlaceholdersClosure tpc;
       SystemDictionary::placeholders_do(&tpc);
     }
-  }
 }
 
 
diff -ruNb openjdk6/hotspot/src/share/vm/memory/compactingPermGenGen.hpp openjdk/hotspot/src/share/vm/memory/compactingPermGenGen.hpp
--- openjdk6/hotspot/src/share/vm/memory/compactingPermGenGen.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/compactingPermGenGen.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compactingPermGenGen.hpp	1.22 07/08/31 18:41:29 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/defNewGeneration.cpp openjdk/hotspot/src/share/vm/memory/defNewGeneration.cpp
--- openjdk6/hotspot/src/share/vm/memory/defNewGeneration.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/defNewGeneration.cpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)defNewGeneration.cpp	1.73 07/05/22 17:24:57 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/defNewGeneration.hpp openjdk/hotspot/src/share/vm/memory/defNewGeneration.hpp
--- openjdk6/hotspot/src/share/vm/memory/defNewGeneration.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/defNewGeneration.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)defNewGeneration.hpp	1.40 07/05/17 15:54:44 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/defNewGeneration.inline.hpp openjdk/hotspot/src/share/vm/memory/defNewGeneration.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/defNewGeneration.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/defNewGeneration.inline.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)defNewGeneration.inline.hpp	1.18 07/05/05 17:05:46 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/dump.cpp openjdk/hotspot/src/share/vm/memory/dump.cpp
--- openjdk6/hotspot/src/share/vm/memory/dump.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/dump.cpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)dump.cpp	1.33 07/05/23 10:53:38 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/filemap.cpp openjdk/hotspot/src/share/vm/memory/filemap.cpp
--- openjdk6/hotspot/src/share/vm/memory/filemap.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/filemap.cpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)filemap.cpp	1.25 07/05/05 17:05:41 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/filemap.hpp openjdk/hotspot/src/share/vm/memory/filemap.hpp
--- openjdk6/hotspot/src/share/vm/memory/filemap.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/filemap.hpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)filemap.hpp	1.16 07/05/05 17:05:47 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/gcLocker.cpp openjdk/hotspot/src/share/vm/memory/gcLocker.cpp
--- openjdk6/hotspot/src/share/vm/memory/gcLocker.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/gcLocker.cpp	2008-12-05 16:41:21.997635494 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcLocker.cpp	1.52 07/05/17 15:54:45 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/gcLocker.hpp openjdk/hotspot/src/share/vm/memory/gcLocker.hpp
--- openjdk6/hotspot/src/share/vm/memory/gcLocker.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/gcLocker.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)gcLocker.hpp	1.60 07/05/17 15:54:47 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -286,4 +283,3 @@
   ~No_Alloc_Verifier() {}
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/gcLocker.inline.hpp openjdk/hotspot/src/share/vm/memory/gcLocker.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/gcLocker.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/gcLocker.inline.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)gcLocker.inline.hpp	1.21 07/05/05 17:05:49 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -73,4 +70,3 @@
     }
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/genCollectedHeap.cpp openjdk/hotspot/src/share/vm/memory/genCollectedHeap.cpp
--- openjdk6/hotspot/src/share/vm/memory/genCollectedHeap.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/genCollectedHeap.cpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)genCollectedHeap.cpp	1.190 07/06/15 16:44:02 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/genCollectedHeap.hpp openjdk/hotspot/src/share/vm/memory/genCollectedHeap.hpp
--- openjdk6/hotspot/src/share/vm/memory/genCollectedHeap.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/genCollectedHeap.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)genCollectedHeap.hpp	1.106 07/07/22 22:36:34 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/genMarkSweep.cpp openjdk/hotspot/src/share/vm/memory/genMarkSweep.cpp
--- openjdk6/hotspot/src/share/vm/memory/genMarkSweep.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/genMarkSweep.cpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)genMarkSweep.cpp	1.40 07/05/17 15:54:55 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/genMarkSweep.hpp openjdk/hotspot/src/share/vm/memory/genMarkSweep.hpp
--- openjdk6/hotspot/src/share/vm/memory/genMarkSweep.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/genMarkSweep.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)genMarkSweep.hpp	1.11 07/05/05 17:05:49 JVM"
-#endif
 /*
  * Copyright 2001-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/genOopClosures.hpp openjdk/hotspot/src/share/vm/memory/genOopClosures.hpp
--- openjdk6/hotspot/src/share/vm/memory/genOopClosures.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/genOopClosures.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)genOopClosures.hpp	1.64 07/05/29 09:44:15 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/genOopClosures.inline.hpp openjdk/hotspot/src/share/vm/memory/genOopClosures.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/genOopClosures.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/genOopClosures.inline.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)genOopClosures.inline.hpp	1.40 07/05/29 09:44:15 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/genRemSet.cpp openjdk/hotspot/src/share/vm/memory/genRemSet.cpp
--- openjdk6/hotspot/src/share/vm/memory/genRemSet.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/genRemSet.cpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)genRemSet.cpp	1.11 07/05/05 17:05:50 JVM"
-#endif
 /*
  * Copyright 2001-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/genRemSet.hpp openjdk/hotspot/src/share/vm/memory/genRemSet.hpp
--- openjdk6/hotspot/src/share/vm/memory/genRemSet.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/genRemSet.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)genRemSet.hpp	1.23 07/05/05 17:05:50 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/genRemSet.inline.hpp openjdk/hotspot/src/share/vm/memory/genRemSet.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/genRemSet.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/genRemSet.inline.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)genRemSet.inline.hpp	1.10 07/05/05 17:05:50 JVM"
-#endif
 /*
  * Copyright 2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/generation.cpp openjdk/hotspot/src/share/vm/memory/generation.cpp
--- openjdk6/hotspot/src/share/vm/memory/generation.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/generation.cpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)generation.cpp	1.245 07/05/05 17:05:51 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/generation.hpp openjdk/hotspot/src/share/vm/memory/generation.hpp
--- openjdk6/hotspot/src/share/vm/memory/generation.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/generation.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)generation.hpp	1.195 07/05/17 15:55:02 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/generation.inline.hpp openjdk/hotspot/src/share/vm/memory/generation.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/generation.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/generation.inline.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)generation.inline.hpp	1.38 07/05/05 17:05:50 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/generationSpec.cpp openjdk/hotspot/src/share/vm/memory/generationSpec.cpp
--- openjdk6/hotspot/src/share/vm/memory/generationSpec.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/generationSpec.cpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)generationSpec.cpp	1.29 07/05/29 09:44:15 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/generationSpec.hpp openjdk/hotspot/src/share/vm/memory/generationSpec.hpp
--- openjdk6/hotspot/src/share/vm/memory/generationSpec.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/generationSpec.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)generationSpec.hpp	1.17 07/05/05 17:05:50 JVM"
-#endif
 /*
  * Copyright 2001-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/heap.cpp openjdk/hotspot/src/share/vm/memory/heap.cpp
--- openjdk6/hotspot/src/share/vm/memory/heap.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/heap.cpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)heap.cpp	1.55 07/10/04 10:49:31 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -483,4 +480,3 @@
   }
   guarantee(count == 0, "missing free blocks");  
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/heap.hpp openjdk/hotspot/src/share/vm/memory/heap.hpp
--- openjdk6/hotspot/src/share/vm/memory/heap.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/heap.hpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)heap.hpp	1.43 07/05/05 17:05:47 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/heapInspection.cpp openjdk/hotspot/src/share/vm/memory/heapInspection.cpp
--- openjdk6/hotspot/src/share/vm/memory/heapInspection.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/heapInspection.cpp	2008-12-05 16:41:22.007635645 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)heapInspection.cpp	1.21 07/05/29 09:44:16 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/heapInspection.hpp openjdk/hotspot/src/share/vm/memory/heapInspection.hpp
--- openjdk6/hotspot/src/share/vm/memory/heapInspection.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/heapInspection.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)heapInspection.hpp	1.17 07/07/02 11:47:11 JVM"
-#endif
 /*
  * Copyright 2002-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/iterator.cpp openjdk/hotspot/src/share/vm/memory/iterator.cpp
--- openjdk6/hotspot/src/share/vm/memory/iterator.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/iterator.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)iterator.cpp	1.18 07/05/05 17:05:50 JVM"
-#endif
 /*
  * Copyright 1997-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -35,4 +32,3 @@
 void VoidClosure::do_void() {
   ShouldNotCallThis();
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/iterator.hpp openjdk/hotspot/src/share/vm/memory/iterator.hpp
--- openjdk6/hotspot/src/share/vm/memory/iterator.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/iterator.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)iterator.hpp	1.38 07/05/05 17:05:52 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/memRegion.cpp openjdk/hotspot/src/share/vm/memory/memRegion.cpp
--- openjdk6/hotspot/src/share/vm/memory/memRegion.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/memRegion.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)memRegion.cpp	1.23 07/05/05 17:05:52 JVM"
-#endif
 /*
  * Copyright 2000-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/memRegion.hpp openjdk/hotspot/src/share/vm/memory/memRegion.hpp
--- openjdk6/hotspot/src/share/vm/memory/memRegion.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/memRegion.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)memRegion.hpp	1.27 07/05/05 17:05:53 JVM"
-#endif
 /*
  * Copyright 2000-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/modRefBarrierSet.hpp openjdk/hotspot/src/share/vm/memory/modRefBarrierSet.hpp
--- openjdk6/hotspot/src/share/vm/memory/modRefBarrierSet.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/modRefBarrierSet.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)modRefBarrierSet.hpp	1.16 07/05/05 17:05:53 JVM"
-#endif
 /*
  * Copyright 2000-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/oopFactory.cpp openjdk/hotspot/src/share/vm/memory/oopFactory.cpp
--- openjdk6/hotspot/src/share/vm/memory/oopFactory.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/oopFactory.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)oopFactory.cpp	1.83 07/05/05 17:05:53 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -146,4 +143,3 @@
   c->set_holder_klass(klass());
   return c;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/oopFactory.hpp openjdk/hotspot/src/share/vm/memory/oopFactory.hpp
--- openjdk6/hotspot/src/share/vm/memory/oopFactory.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/oopFactory.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oopFactory.hpp	1.61 07/05/05 17:05:53 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/permGen.cpp openjdk/hotspot/src/share/vm/memory/permGen.cpp
--- openjdk6/hotspot/src/share/vm/memory/permGen.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/permGen.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)permGen.cpp	1.54 07/05/29 09:44:16 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/permGen.hpp openjdk/hotspot/src/share/vm/memory/permGen.hpp
--- openjdk6/hotspot/src/share/vm/memory/permGen.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/permGen.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)permGen.hpp	1.38 07/05/29 09:44:16 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -74,4 +71,3 @@
     g->update_counters();
   }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/referencePolicy.cpp openjdk/hotspot/src/share/vm/memory/referencePolicy.cpp
--- openjdk6/hotspot/src/share/vm/memory/referencePolicy.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/referencePolicy.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)referencePolicy.cpp	1.12 07/05/05 17:05:54 JVM"
-#endif
 /*
  * Copyright 2000-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -71,4 +68,3 @@
 
   return true;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/referencePolicy.hpp openjdk/hotspot/src/share/vm/memory/referencePolicy.hpp
--- openjdk6/hotspot/src/share/vm/memory/referencePolicy.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/referencePolicy.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)referencePolicy.hpp	1.11 07/05/05 17:05:54 JVM"
-#endif
 /*
  * Copyright 2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/referenceProcessor.cpp openjdk/hotspot/src/share/vm/memory/referenceProcessor.cpp
--- openjdk6/hotspot/src/share/vm/memory/referenceProcessor.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/referenceProcessor.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)referenceProcessor.cpp	1.57 07/08/17 12:30:18 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/referenceProcessor.hpp openjdk/hotspot/src/share/vm/memory/referenceProcessor.hpp
--- openjdk6/hotspot/src/share/vm/memory/referenceProcessor.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/referenceProcessor.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)referenceProcessor.hpp	1.43 07/05/05 17:05:54 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -500,4 +497,3 @@
   oop                 _sentinel_ref; 
   int                 _n_queues;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/resourceArea.cpp openjdk/hotspot/src/share/vm/memory/resourceArea.cpp
--- openjdk6/hotspot/src/share/vm/memory/resourceArea.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/resourceArea.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)resourceArea.cpp	1.57 07/05/05 17:05:55 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/resourceArea.hpp openjdk/hotspot/src/share/vm/memory/resourceArea.hpp
--- openjdk6/hotspot/src/share/vm/memory/resourceArea.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/resourceArea.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)resourceArea.hpp	1.45 07/05/05 17:05:55 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/restore.cpp openjdk/hotspot/src/share/vm/memory/restore.cpp
--- openjdk6/hotspot/src/share/vm/memory/restore.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/restore.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)restore.cpp	1.14 07/05/05 17:05:44 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/serialize.cpp openjdk/hotspot/src/share/vm/memory/serialize.cpp
--- openjdk6/hotspot/src/share/vm/memory/serialize.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/serialize.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)serialize.cpp	1.9 07/05/05 17:05:55 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/sharedHeap.cpp openjdk/hotspot/src/share/vm/memory/sharedHeap.cpp
--- openjdk6/hotspot/src/share/vm/memory/sharedHeap.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/sharedHeap.cpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)sharedHeap.cpp	1.59 07/05/17 15:55:10 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/sharedHeap.hpp openjdk/hotspot/src/share/vm/memory/sharedHeap.hpp
--- openjdk6/hotspot/src/share/vm/memory/sharedHeap.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/sharedHeap.hpp	2008-12-05 16:41:22.017635795 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)sharedHeap.hpp	1.56 07/05/05 17:05:55 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -273,5 +270,3 @@
 			     size_t bytes_after,
 			     size_t capacity);
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/space.cpp openjdk/hotspot/src/share/vm/memory/space.cpp
--- openjdk6/hotspot/src/share/vm/memory/space.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/space.cpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)space.cpp	1.217 07/05/29 09:44:13 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/space.hpp openjdk/hotspot/src/share/vm/memory/space.hpp
--- openjdk6/hotspot/src/share/vm/memory/space.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/space.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)space.hpp	1.149 07/05/29 09:44:14 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/space.inline.hpp openjdk/hotspot/src/share/vm/memory/space.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/space.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/space.inline.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)space.inline.hpp	1.17 07/05/05 17:05:54 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/specialized_oop_closures.cpp openjdk/hotspot/src/share/vm/memory/specialized_oop_closures.cpp
--- openjdk6/hotspot/src/share/vm/memory/specialized_oop_closures.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/specialized_oop_closures.cpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)specialized_oop_closures.cpp	1.14 07/05/05 17:05:56 JVM"
-#endif
 /*
  * Copyright 2001-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/specialized_oop_closures.hpp openjdk/hotspot/src/share/vm/memory/specialized_oop_closures.hpp
--- openjdk6/hotspot/src/share/vm/memory/specialized_oop_closures.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/specialized_oop_closures.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)specialized_oop_closures.hpp	1.30 07/05/29 09:44:17 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/tenuredGeneration.cpp openjdk/hotspot/src/share/vm/memory/tenuredGeneration.cpp
--- openjdk6/hotspot/src/share/vm/memory/tenuredGeneration.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/tenuredGeneration.cpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)tenuredGeneration.cpp	1.47 07/05/29 09:44:17 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/tenuredGeneration.hpp openjdk/hotspot/src/share/vm/memory/tenuredGeneration.hpp
--- openjdk6/hotspot/src/share/vm/memory/tenuredGeneration.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/tenuredGeneration.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)tenuredGeneration.hpp	1.27 07/05/29 09:44:17 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/threadLocalAllocBuffer.cpp openjdk/hotspot/src/share/vm/memory/threadLocalAllocBuffer.cpp
--- openjdk6/hotspot/src/share/vm/memory/threadLocalAllocBuffer.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/threadLocalAllocBuffer.cpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)threadLocalAllocBuffer.cpp	1.55 07/07/05 17:12:38 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/threadLocalAllocBuffer.hpp openjdk/hotspot/src/share/vm/memory/threadLocalAllocBuffer.hpp
--- openjdk6/hotspot/src/share/vm/memory/threadLocalAllocBuffer.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/threadLocalAllocBuffer.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)threadLocalAllocBuffer.hpp	1.35 07/07/05 17:12:36 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/threadLocalAllocBuffer.inline.hpp openjdk/hotspot/src/share/vm/memory/threadLocalAllocBuffer.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/threadLocalAllocBuffer.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/threadLocalAllocBuffer.inline.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)threadLocalAllocBuffer.inline.hpp	1.29 07/05/05 17:05:56 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/universe.cpp openjdk/hotspot/src/share/vm/memory/universe.cpp
--- openjdk6/hotspot/src/share/vm/memory/universe.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/universe.cpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)universe.cpp	1.361 07/09/01 18:01:02 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/universe.hpp openjdk/hotspot/src/share/vm/memory/universe.hpp
--- openjdk6/hotspot/src/share/vm/memory/universe.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/universe.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)universe.hpp	1.183 07/08/09 09:12:00 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/memory/universe.inline.hpp openjdk/hotspot/src/share/vm/memory/universe.inline.hpp
--- openjdk6/hotspot/src/share/vm/memory/universe.inline.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/universe.inline.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)universe.inline.hpp	1.47 07/05/05 17:05:57 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -38,6 +35,3 @@
 inline bool Universe::field_type_should_be_aligned(BasicType type) {
   return type == T_DOUBLE || type == T_LONG;
 }
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/memory/watermark.hpp openjdk/hotspot/src/share/vm/memory/watermark.hpp
--- openjdk6/hotspot/src/share/vm/memory/watermark.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/memory/watermark.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)watermark.hpp	1.14 07/05/05 17:05:56 JVM"
-#endif
 /*
  * Copyright 2000-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -54,4 +51,3 @@
 inline bool operator!=(const WaterMark& x, const WaterMark& y) {
   return !(x == y);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/arrayKlass.cpp openjdk/hotspot/src/share/vm/oops/arrayKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/arrayKlass.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/arrayKlass.cpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)arrayKlass.cpp	1.95 07/05/05 17:05:59 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/arrayKlass.hpp openjdk/hotspot/src/share/vm/oops/arrayKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/arrayKlass.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/arrayKlass.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)arrayKlass.hpp	1.66 07/05/05 17:05:58 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -135,4 +132,3 @@
   // Verification
   void oop_verify_on(oop obj, outputStream* st);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/arrayKlassKlass.cpp openjdk/hotspot/src/share/vm/oops/arrayKlassKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/arrayKlassKlass.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/arrayKlassKlass.cpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)arrayKlassKlass.cpp	1.56 07/05/29 09:44:17 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/arrayKlassKlass.hpp openjdk/hotspot/src/share/vm/oops/arrayKlassKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/arrayKlassKlass.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/arrayKlassKlass.hpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)arrayKlassKlass.hpp	1.39 07/05/29 09:44:18 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -70,4 +67,3 @@
   const char* internal_name() const;
   void oop_verify_on(oop obj, outputStream* st);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/arrayOop.cpp openjdk/hotspot/src/share/vm/oops/arrayOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/arrayOop.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/arrayOop.cpp	2008-12-05 16:41:22.027635946 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)arrayOop.cpp	1.18 07/05/05 17:05:58 JVM"
-#endif
 /*
  * Copyright 1997 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -29,4 +26,3 @@
 # include "incls/_arrayOop.cpp.incl"
 
 // <<this page is intentionally left blank>>
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/arrayOop.hpp openjdk/hotspot/src/share/vm/oops/arrayOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/arrayOop.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/arrayOop.hpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)arrayOop.hpp	1.35 07/05/05 17:06:00 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/compiledICHolderKlass.cpp openjdk/hotspot/src/share/vm/oops/compiledICHolderKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/compiledICHolderKlass.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/compiledICHolderKlass.cpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compiledICHolderKlass.cpp	1.41 07/05/29 09:44:18 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/compiledICHolderKlass.hpp openjdk/hotspot/src/share/vm/oops/compiledICHolderKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/compiledICHolderKlass.hpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/compiledICHolderKlass.hpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compiledICHolderKlass.hpp	1.32 07/05/29 09:44:18 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -84,4 +81,3 @@
   void oop_verify_on(oop obj, outputStream* st);
 
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/compiledICHolderOop.cpp openjdk/hotspot/src/share/vm/oops/compiledICHolderOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/compiledICHolderOop.cpp	2008-11-25 10:12:08.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/compiledICHolderOop.cpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compiledICHolderOop.cpp	1.12 07/05/05 17:05:59 JVM"
-#endif
 /*
  * Copyright 1998 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -29,4 +26,3 @@
 # include "incls/_compiledICHolderOop.cpp.incl"
 
 // <<this page is intentionally left blank>>
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/compiledICHolderOop.hpp openjdk/hotspot/src/share/vm/oops/compiledICHolderOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/compiledICHolderOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/compiledICHolderOop.hpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compiledICHolderOop.hpp	1.20 07/05/05 17:05:59 JVM"
-#endif
 /*
  * Copyright 1998-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/constMethodKlass.cpp openjdk/hotspot/src/share/vm/oops/constMethodKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/constMethodKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/constMethodKlass.cpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)constMethodKlass.cpp	1.25 07/08/29 13:42:26 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -302,4 +299,3 @@
   // Temporarily set exception_table to point to self
   m->set_exception_table((typeArrayOop)obj);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/constMethodKlass.hpp openjdk/hotspot/src/share/vm/oops/constMethodKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/constMethodKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/constMethodKlass.hpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)constMethodKlass.hpp	1.15 07/05/29 09:44:18 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -91,4 +88,3 @@
   bool oop_partially_loaded(oop obj) const;
   void oop_set_partially_loaded(oop obj);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/constMethodOop.cpp openjdk/hotspot/src/share/vm/oops/constMethodOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/constMethodOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/constMethodOop.cpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)constMethodOop.cpp	1.11 07/05/05 17:06:00 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/constMethodOop.hpp openjdk/hotspot/src/share/vm/oops/constMethodOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/constMethodOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/constMethodOop.hpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)constMethodOop.hpp	1.24 07/05/05 17:05:59 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/constantPoolKlass.cpp openjdk/hotspot/src/share/vm/oops/constantPoolKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/constantPoolKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/constantPoolKlass.cpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)constantPoolKlass.cpp	1.105 07/05/29 09:44:18 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/constantPoolKlass.hpp openjdk/hotspot/src/share/vm/oops/constantPoolKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/constantPoolKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/constantPoolKlass.hpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)constantPoolKlass.hpp	1.51 07/05/29 09:44:18 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -78,4 +75,3 @@
   static void preload_and_initialize_all_classes(oop constant_pool, TRAPS);
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/constantPoolOop.cpp openjdk/hotspot/src/share/vm/oops/constantPoolOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/constantPoolOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/constantPoolOop.cpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)constantPoolOop.cpp	1.104 07/05/05 17:06:01 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/constantPoolOop.hpp openjdk/hotspot/src/share/vm/oops/constantPoolOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/constantPoolOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/constantPoolOop.hpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)constantPoolOop.hpp	1.105 07/08/29 13:42:26 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/cpCacheKlass.cpp openjdk/hotspot/src/share/vm/oops/cpCacheKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/cpCacheKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/cpCacheKlass.cpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cpCacheKlass.cpp	1.46 07/05/29 09:44:18 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -206,4 +203,3 @@
 const char* constantPoolCacheKlass::internal_name() const { 
   return "{constant pool cache}"; 
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/cpCacheKlass.hpp openjdk/hotspot/src/share/vm/oops/cpCacheKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/cpCacheKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/cpCacheKlass.hpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cpCacheKlass.hpp	1.33 07/05/29 09:44:19 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -69,4 +66,3 @@
   const char* internal_name() const;
   void oop_verify_on(oop obj, outputStream* st);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/cpCacheOop.cpp openjdk/hotspot/src/share/vm/oops/cpCacheOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/cpCacheOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/cpCacheOop.cpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cpCacheOop.cpp	1.79 07/05/29 09:44:19 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/cpCacheOop.hpp openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/cpCacheOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cpCacheOop.hpp	1.74 07/05/29 09:44:19 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -326,4 +323,3 @@
   void adjust_method_entries(methodOop* old_methods, methodOop* new_methods,
                              int methods_length, bool * trace_name_printed);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/generateOopMap.cpp openjdk/hotspot/src/share/vm/oops/generateOopMap.cpp
--- openjdk6/hotspot/src/share/vm/oops/generateOopMap.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/generateOopMap.cpp	2008-12-05 16:41:22.037636097 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)generateOopMap.cpp	1.141 07/05/05 17:06:03 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -2537,4 +2534,3 @@
 #endif
   return methodHandle(THREAD, method());
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/generateOopMap.hpp openjdk/hotspot/src/share/vm/oops/generateOopMap.hpp
--- openjdk6/hotspot/src/share/vm/oops/generateOopMap.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/generateOopMap.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)generateOopMap.hpp	1.65 07/05/05 17:06:01 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -554,6 +551,3 @@
 
   // Call compute_map(CHECK) to generate info.  
 };
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/instanceKlass.cpp openjdk/hotspot/src/share/vm/oops/instanceKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/instanceKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/instanceKlass.cpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)instanceKlass.cpp	1.324 08/11/24 12:22:48 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -2168,20 +2165,12 @@
   RC_TRACE(0x00000100, ("adding previous version ref for %s @%d, EMCP_cnt=%d",
     ikh->external_name(), _previous_versions->length(), emcp_method_count));
   constantPoolHandle cp_h(ikh->constants());
-  jobject cp_ref;
-  if (cp_h->is_shared()) {
-    // a shared ConstantPool requires a regular reference; a weak
-    // reference would be collectible
-    cp_ref = JNIHandles::make_global(cp_h);
-  } else {
-    cp_ref = JNIHandles::make_weak_global(cp_h);
-  }
+  jweak cp_ref = JNIHandles::make_weak_global(cp_h);
   PreviousVersionNode * pv_node = NULL;
   objArrayOop old_methods = ikh->methods();
 
   if (emcp_method_count == 0) {
-    // non-shared ConstantPool gets a weak reference
-    pv_node = new PreviousVersionNode(cp_ref, !cp_h->is_shared(), NULL);
+    pv_node = new PreviousVersionNode(cp_ref, NULL);
     RC_TRACE(0x00000400,
       ("add: all methods are obsolete; flushing any EMCP weak refs"));
   } else {
@@ -2201,8 +2190,7 @@
         }
       }
     }
-    // non-shared ConstantPool gets a weak reference
-    pv_node = new PreviousVersionNode(cp_ref, !cp_h->is_shared(), method_refs);
+    pv_node = new PreviousVersionNode(cp_ref, method_refs);
   }
 
   _previous_versions->append(pv_node);
@@ -2220,7 +2208,7 @@
     // check the previous versions array for a GC'ed weak refs
     pv_node = _previous_versions->at(i);
     cp_ref = pv_node->prev_constant_pool();
-    assert(cp_ref != NULL, "cp ref was unexpectedly cleared");
+    assert(cp_ref != NULL, "weak cp ref was unexpectedly cleared");
     if (cp_ref == NULL) {
       delete pv_node;
       _previous_versions->remove_at(i);
@@ -2293,7 +2281,7 @@
           // check the previous versions array for a GC'ed weak refs
           pv_node = _previous_versions->at(j);
           cp_ref = pv_node->prev_constant_pool();
-          assert(cp_ref != NULL, "cp ref was unexpectedly cleared");
+          assert(cp_ref != NULL, "weak cp ref was unexpectedly cleared");
           if (cp_ref == NULL) {
             delete pv_node;
             _previous_versions->remove_at(j);
@@ -2391,8 +2379,8 @@
     // been GC'ed
     PreviousVersionNode * pv_node = _previous_versions->at(i);
 
-    jobject cp_ref = pv_node->prev_constant_pool();
-    assert(cp_ref != NULL, "cp reference was unexpectedly cleared");
+    jweak cp_ref = pv_node->prev_constant_pool();
+    assert(cp_ref != NULL, "weak reference was unexpectedly cleared");
     if (cp_ref == NULL) {
       continue;  // robustness
     }
@@ -2452,11 +2440,10 @@
 
 // Construct a PreviousVersionNode entry for the array hung off
 // the instanceKlass.
-PreviousVersionNode::PreviousVersionNode(jobject prev_constant_pool,
-  bool prev_cp_is_weak, GrowableArray<jweak>* prev_EMCP_methods) {
+PreviousVersionNode::PreviousVersionNode(jweak prev_constant_pool,
+  GrowableArray<jweak>* prev_EMCP_methods) {
 
   _prev_constant_pool = prev_constant_pool;
-  _prev_cp_is_weak = prev_cp_is_weak;
   _prev_EMCP_methods = prev_EMCP_methods;
 }
 
@@ -2464,11 +2451,7 @@
 // Destroy a PreviousVersionNode
 PreviousVersionNode::~PreviousVersionNode() {
   if (_prev_constant_pool != NULL) {
-    if (_prev_cp_is_weak) {
       JNIHandles::destroy_weak_global(_prev_constant_pool);
-    } else {
-      JNIHandles::destroy_global(_prev_constant_pool);
-    }
   }
 
   if (_prev_EMCP_methods != NULL) {
@@ -2488,8 +2471,8 @@
   _prev_constant_pool_handle = constantPoolHandle();  // NULL handle
   _prev_EMCP_method_handles = NULL;
 
-  jobject cp_ref = pv_node->prev_constant_pool();
-  assert(cp_ref != NULL, "constant pool ref was unexpectedly cleared");
+  jweak cp_ref = pv_node->prev_constant_pool();
+  assert(cp_ref != NULL, "weak constant pool ref was unexpectedly cleared");
   if (cp_ref == NULL) {
     return;  // robustness
   }
diff -ruNb openjdk6/hotspot/src/share/vm/oops/instanceKlass.hpp openjdk/hotspot/src/share/vm/oops/instanceKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/instanceKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/instanceKlass.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)instanceKlass.hpp	1.201 08/11/24 12:22:50 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -841,20 +838,11 @@
 // A collection point for interesting information about the previous
 // version(s) of an instanceKlass. This class uses weak references to
 // the information so that the information may be collected as needed
-// by the system. If the information is shared, then a regular
-// reference must be used because a weak reference would be seen as
-// collectible. A GrowableArray of PreviousVersionNodes is attached
+// by the system. A GrowableArray of PreviousVersionNodes is attached
 // to the instanceKlass as needed. See PreviousVersionWalker below.
 class PreviousVersionNode : public CHeapObj {
  private:
-  // A shared ConstantPool is never collected so we'll always have
-  // a reference to it so we can update items in the cache. We'll
-  // have a weak reference to a non-shared ConstantPool until all
-  // of the methods (EMCP or obsolete) have been collected; the
-  // non-shared ConstantPool becomes collectible at that point.
-  jobject _prev_constant_pool;  // regular or weak reference
-  bool    _prev_cp_is_weak;     // true if not a shared ConstantPool
-
+  jweak _prev_constant_pool;
   // If the previous version of the instanceKlass doesn't have any
   // EMCP methods, then _prev_EMCP_methods will be NULL. If all the
   // EMCP methods have been collected, then _prev_EMCP_methods can
@@ -862,10 +850,10 @@
   GrowableArray<jweak>* _prev_EMCP_methods;
 
 public:
-  PreviousVersionNode(jobject prev_constant_pool, bool prev_cp_is_weak,
+  PreviousVersionNode(jweak prev_constant_pool,
     GrowableArray<jweak>* prev_EMCP_methods);
   ~PreviousVersionNode();
-  jobject prev_constant_pool() const {
+  jweak prev_constant_pool() const {
     return _prev_constant_pool;
   }
   GrowableArray<jweak>* prev_EMCP_methods() const {
diff -ruNb openjdk6/hotspot/src/share/vm/oops/instanceKlassKlass.cpp openjdk/hotspot/src/share/vm/oops/instanceKlassKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/instanceKlassKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/instanceKlassKlass.cpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)instanceKlassKlass.cpp	1.157 07/07/27 16:19:58 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -810,4 +807,3 @@
   assert(ik->transitive_interfaces() == NULL, "just checking");
   ik->set_transitive_interfaces((objArrayOop) obj);   // Temporarily set transitive_interfaces to point to self
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/instanceKlassKlass.hpp openjdk/hotspot/src/share/vm/oops/instanceKlassKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/instanceKlassKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/instanceKlassKlass.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)instanceKlassKlass.hpp	1.54 07/05/29 09:44:21 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -87,4 +84,3 @@
   bool oop_partially_loaded(oop obj) const;
   void oop_set_partially_loaded(oop obj);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/instanceOop.cpp openjdk/hotspot/src/share/vm/oops/instanceOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/instanceOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/instanceOop.cpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)instanceOop.cpp	1.14 07/05/05 17:06:03 JVM"
-#endif
 /*
  * Copyright 1997 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -29,4 +26,3 @@
 # include "incls/_instanceOop.cpp.incl"
 
 // <<this page is intentionally left blank>>
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/instanceOop.hpp openjdk/hotspot/src/share/vm/oops/instanceOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/instanceOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/instanceOop.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)instanceOop.hpp	1.15 07/05/05 17:06:04 JVM"
-#endif
 /*
  * Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -32,5 +29,3 @@
  public:
   static int header_size() { return sizeof(instanceOopDesc)/HeapWordSize; }
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/instanceRefKlass.cpp openjdk/hotspot/src/share/vm/oops/instanceRefKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/instanceRefKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/instanceRefKlass.cpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)instanceRefKlass.cpp	1.90 07/05/29 09:44:20 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/instanceRefKlass.hpp openjdk/hotspot/src/share/vm/oops/instanceRefKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/instanceRefKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/instanceRefKlass.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)instanceRefKlass.hpp	1.62 07/05/29 09:44:21 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klass.cpp openjdk/hotspot/src/share/vm/oops/klass.cpp
--- openjdk6/hotspot/src/share/vm/oops/klass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klass.cpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)klass.cpp	1.119 07/05/05 17:06:00 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klass.hpp openjdk/hotspot/src/share/vm/oops/klass.hpp
--- openjdk6/hotspot/src/share/vm/oops/klass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klass.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)klass.hpp	1.142 07/05/29 09:44:17 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -768,4 +765,3 @@
   void verify_vtable_index(int index);
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klass.inline.hpp openjdk/hotspot/src/share/vm/oops/klass.inline.hpp
--- openjdk6/hotspot/src/share/vm/oops/klass.inline.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klass.inline.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)klass.inline.hpp	1.5 07/05/05 17:06:04 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klassKlass.cpp openjdk/hotspot/src/share/vm/oops/klassKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/klassKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klassKlass.cpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)klassKlass.cpp	1.70 07/08/09 09:12:01 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klassKlass.hpp openjdk/hotspot/src/share/vm/oops/klassKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/klassKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klassKlass.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)klassKlass.hpp	1.44 07/05/29 09:44:21 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -82,4 +79,3 @@
   const char* internal_name() const;
   void oop_verify_on(oop obj, outputStream* st);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klassOop.cpp openjdk/hotspot/src/share/vm/oops/klassOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/klassOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klassOop.cpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)klassOop.cpp	1.14 07/05/05 17:06:04 JVM"
-#endif
 /*
  * Copyright 1997 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -27,4 +24,3 @@
 
 # include "incls/_precompiled.incl"
 # include "incls/_klassOop.cpp.incl"
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klassOop.hpp openjdk/hotspot/src/share/vm/oops/klassOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/klassOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klassOop.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)klassOop.hpp	1.19 07/05/05 17:06:04 JVM"
-#endif
 /*
  * Copyright 1997-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -45,6 +42,3 @@
   // returns the Klass part containing dispatching behavior
   Klass* klass_part()                            { return (Klass*)((address)this + klass_part_offset_in_bytes()); }
 };
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klassPS.hpp openjdk/hotspot/src/share/vm/oops/klassPS.hpp
--- openjdk6/hotspot/src/share/vm/oops/klassPS.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klassPS.hpp	2008-12-05 16:41:22.047636248 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)klassPS.hpp	1.1 07/05/14 06:13:07 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klassVtable.cpp openjdk/hotspot/src/share/vm/oops/klassVtable.cpp
--- openjdk6/hotspot/src/share/vm/oops/klassVtable.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klassVtable.cpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)klassVtable.cpp	1.146 07/07/19 12:19:09 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -738,7 +735,7 @@
     }    
   }
 
-  // The length of the itable was either zero, or it has not yet been initialized.
+  // This lenght of the itable was either zero, or it has not yet been initialized.
   _table_offset      = 0;
   _size_offset_table = 0;
   _size_method_table = 0;
@@ -873,19 +870,16 @@
 
 // Initialization
 void klassItable::initialize_itable(bool checkconstraints, TRAPS) {
-  // Cannot be setup doing bootstrapping, interfaces don't have
-  // itables, and klass with only ones entry have empty itables
-  if (Universe::is_bootstrapping() || 
-      _klass->is_interface() ||
-      _klass->itable_length() == itableOffsetEntry::size()) return;
-
-  // There's alway an extra itable entry so we can null-terminate it.
-  guarantee(size_offset_table() >= 1, "too small");
-  int num_interfaces = size_offset_table() - 1;
+  // Cannot be setup doing bootstrapping
+  if (Universe::is_bootstrapping()) return;
+
+  int num_interfaces = nof_interfaces();
   if (num_interfaces > 0) {
-    if (TraceItables) tty->print_cr("%3d: Initializing itables for %s", ++initialize_count,
-                                    _klass->name()->as_C_string());
+    if (TraceItables) tty->print_cr("%3d: Initializing itables for %s", ++initialize_count, _klass->name()->as_C_string());
     
+    // In debug mode, we got an extra NULL/NULL entry
+    debug_only(num_interfaces--);
+    assert(num_interfaces > 0, "to few interfaces in offset itable");
 
     // Interate through all interfaces
     int i;
@@ -896,10 +890,12 @@
       initialize_itable_for_interface(ioe->offset(), interf_h, checkconstraints, CHECK);      
     } 
 
-  }  
+#ifdef ASSERT
   // Check that the last entry is empty
-  itableOffsetEntry* ioe = offset_entry(size_offset_table() - 1);
-  guarantee(ioe->interface_klass() == NULL && ioe->offset() == 0, "terminator entry missing");
+    itableOffsetEntry* ioe = offset_entry(i);
+    assert(ioe->interface_klass() == NULL && ioe->offset() == 0, "terminator entry missing");
+#endif
+  }
 }
 
 
@@ -976,7 +972,7 @@
   }  
 }
 
-// Update entry for specific methodOop
+// Update entry for specic methodOop
 void klassItable::initialize_with_method(methodOop m) {
   itableMethodEntry* ime = method_entry(0);
   for(int i = 0; i < _size_method_table; i++) {    
@@ -1089,8 +1085,12 @@
   CountInterfacesClosure cic;  
   visit_all_interfaces(transitive_interfaces(), &cic);
     
-  // There's alway an extra itable entry so we can null-terminate it.
-  int itable_size = calc_itable_size(cic.nof_interfaces() + 1, cic.nof_methods()); 
+  // Add one extra entry in debug mode, so we can null-terminate the table
+  int nof_methods    = cic.nof_methods();
+  int nof_interfaces = cic.nof_interfaces();
+  debug_only(if (nof_interfaces > 0) nof_interfaces++);
+
+  int itable_size = calc_itable_size(nof_interfaces, nof_methods);
 
   // Statistics
   update_stats(itable_size * HeapWordSize);  
@@ -1110,8 +1110,8 @@
   int nof_methods    = cic.nof_methods();
   int nof_interfaces = cic.nof_interfaces();
   
-  // Add one extra entry so we can null-terminate the table
-  nof_interfaces++;
+  // Add one extra entry in debug mode, so we can null-terminate the table
+  debug_only(if (nof_interfaces > 0) nof_interfaces++);
   
   assert(compute_itable_size(objArrayHandle(klass->transitive_interfaces())) ==
          calc_itable_size(nof_interfaces, nof_methods),
@@ -1320,5 +1320,3 @@
 }
 
 #endif // PRODUCT
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/klassVtable.hpp openjdk/hotspot/src/share/vm/oops/klassVtable.hpp
--- openjdk6/hotspot/src/share/vm/oops/klassVtable.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/klassVtable.hpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)klassVtable.hpp	1.62 07/07/19 12:19:09 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -262,7 +259,7 @@
   itableMethodEntry* method_entry(int i) { assert(0 <= i && i <= _size_method_table, "index out of bounds");
                                            return &((itableMethodEntry*)method_start())[i]; }
   
-  int size_offset_table()                { return _size_offset_table; }
+  int nof_interfaces()                   { return _size_offset_table; }
 
   // Initialization
   void initialize_itable(bool checkconstraints, TRAPS);    
diff -ruNb openjdk6/hotspot/src/share/vm/oops/markOop.cpp openjdk/hotspot/src/share/vm/oops/markOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/markOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/markOop.cpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)markOop.cpp	1.30 08/11/24 12:22:53 JVM"
-#endif
 /*
  * Copyright 1997-1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -40,32 +37,3 @@
     st->print("age %d)", age());
   }
 }
-
-
-// Give advice about whether the oop that contains this markOop
-// should be cached or not.
-bool markOopDesc::should_not_be_cached() const {
-  // the cast is because decode_pointer() isn't marked const
-  if (is_marked() && ((markOopDesc *)this)->decode_pointer() != NULL) {
-    // If the oop containing this markOop is being forwarded, then
-    // we are in the middle of GC and we do not want the containing
-    // oop to be added to a cache. We have no way of knowing whether
-    // the cache has already been visited by the current GC phase so
-    // we don't know whether the forwarded oop will be properly
-    // processed in this phase. If the forwarded oop is not properly
-    // processed, then we'll see strange crashes or asserts during
-    // the next GC run because the markOop will contain an unexpected
-    // value.
-    //
-    // This situation has been seen when we are GC'ing a methodOop
-    // because we use the methodOop while we're GC'ing it. Scary
-    // stuff. Some of the uses the methodOop cause the methodOop to
-    // be added to the OopMapCache in the instanceKlass as a side
-    // effect. This check lets the cache maintainer know when a
-    // cache addition would not be safe.
-    return true;
-  }
-
-  // caching the containing oop should be just fine
-  return false;
-}
diff -ruNb openjdk6/hotspot/src/share/vm/oops/markOop.hpp openjdk/hotspot/src/share/vm/oops/markOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/markOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/markOop.hpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)markOop.hpp	1.66 08/11/24 12:22:54 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -360,7 +357,4 @@
 
   // Recover address of oop from encoded form used in mark
   inline void* decode_pointer() { if (UseBiasedLocking && has_bias_pattern()) return NULL; return clear_lock_bits(); }
-
-  // see the definition in markOop.cpp for the gory details
-  bool should_not_be_cached() const;
 };
diff -ruNb openjdk6/hotspot/src/share/vm/oops/markOop.inline.hpp openjdk/hotspot/src/share/vm/oops/markOop.inline.hpp
--- openjdk6/hotspot/src/share/vm/oops/markOop.inline.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/markOop.inline.hpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)markOop.inline.hpp	1.7 07/05/05 17:06:04 JVM"
-#endif
 /*
  * Copyright 2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/methodDataKlass.cpp openjdk/hotspot/src/share/vm/oops/methodDataKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/methodDataKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/methodDataKlass.cpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)methodDataKlass.cpp	1.36 07/05/29 09:44:22 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -239,4 +236,3 @@
   guarantee(m->is_perm(), "should be in permspace");
   m->verify_data_on(st);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/methodDataKlass.hpp openjdk/hotspot/src/share/vm/oops/methodDataKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/methodDataKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/methodDataKlass.hpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)methodDataKlass.hpp	1.30 07/05/29 09:44:23 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/methodDataOop.cpp openjdk/hotspot/src/share/vm/oops/methodDataOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/methodDataOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/methodDataOop.cpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)methodDataOop.cpp	1.51 07/05/29 09:44:22 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/methodDataOop.hpp openjdk/hotspot/src/share/vm/oops/methodDataOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/methodDataOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/methodDataOop.hpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)methodDataOop.hpp	1.54 07/08/29 13:42:27 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/methodKlass.cpp openjdk/hotspot/src/share/vm/oops/methodKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/methodKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/methodKlass.cpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)methodKlass.cpp	1.120 07/05/29 09:44:23 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -362,4 +359,3 @@
   constMethodKlass* ck = constMethodKlass::cast(xconst->klass());
   ck->oop_set_partially_loaded(xconst);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/methodKlass.hpp openjdk/hotspot/src/share/vm/oops/methodKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/methodKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/methodKlass.hpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)methodKlass.hpp	1.49 07/05/29 09:44:23 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -85,4 +82,3 @@
   bool oop_partially_loaded(oop obj) const;
   void oop_set_partially_loaded(oop obj);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/methodOop.cpp openjdk/hotspot/src/share/vm/oops/methodOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/methodOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/methodOop.cpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)methodOop.cpp	1.314 08/11/24 12:22:56 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -768,28 +765,6 @@
 }
 
 
-// give advice about whether this methodOop should be cached or not
-bool methodOopDesc::should_not_be_cached() const {
-  if (is_old()) {
-    // This method has been redefined. It is either EMCP or obsolete
-    // and we don't want to cache it because that would pin the method
-    // down and prevent it from being collectible if and when it
-    // finishes executing.
-    return true;
-  }
-
-  if (mark()->should_not_be_cached()) {
-    // It is either not safe or not a good idea to cache this
-    // method at this time because of the state of the embedded
-    // markOop. See markOop.cpp for the gory details.
-    return true;
-  }
-
-  // caching this method should be just fine
-  return false;
-}
-
-
 methodHandle methodOopDesc:: clone_with_new_data(methodHandle m, u_char* new_code, int new_code_length, 
                                                 u_char* new_compressed_linenumber_table, int new_compressed_linenumber_size, TRAPS) {
   // Code below does not work for native methods - they should never get rewritten anyway
diff -ruNb openjdk6/hotspot/src/share/vm/oops/methodOop.hpp openjdk/hotspot/src/share/vm/oops/methodOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/methodOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/methodOop.hpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)methodOop.hpp	1.221 08/11/24 12:22:56 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -527,8 +524,6 @@
   void set_is_old()                                 { _access_flags.set_is_old(); }
   bool is_obsolete() const                          { return access_flags().is_obsolete(); }
   void set_is_obsolete()                            { _access_flags.set_is_obsolete(); }
-  // see the definition in methodOop.cpp for the gory details
-  bool should_not_be_cached() const;
 
   // JVMTI Native method prefixing support:
   bool is_prefixed_native() const                   { return access_flags().is_prefixed_native(); }
@@ -742,5 +737,3 @@
   void set(methodOop method);
   void clear(methodOop method);
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/objArrayKlass.cpp openjdk/hotspot/src/share/vm/oops/objArrayKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/objArrayKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/objArrayKlass.cpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)objArrayKlass.cpp	1.147 07/05/29 09:44:23 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/objArrayKlass.hpp openjdk/hotspot/src/share/vm/oops/objArrayKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/objArrayKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/objArrayKlass.hpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)objArrayKlass.hpp	1.87 07/05/29 09:44:23 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -129,4 +126,3 @@
   void oop_verify_old_oop(oop obj, oop* p, bool allow_dirty);
 
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/objArrayKlassKlass.cpp openjdk/hotspot/src/share/vm/oops/objArrayKlassKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/objArrayKlassKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/objArrayKlassKlass.cpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)objArrayKlassKlass.cpp	1.79 07/05/29 09:44:24 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -309,4 +306,3 @@
   Klass* bk = Klass::cast(oak->bottom_klass());
   guarantee(bk->oop_is_instance() || bk->oop_is_typeArray(),  "invalid bottom klass");
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/objArrayKlassKlass.hpp openjdk/hotspot/src/share/vm/oops/objArrayKlassKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/objArrayKlassKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/objArrayKlassKlass.hpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)objArrayKlassKlass.hpp	1.48 07/05/29 09:44:24 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -80,4 +77,3 @@
   void oop_verify_on(oop obj, outputStream* st);
 
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/objArrayOop.cpp openjdk/hotspot/src/share/vm/oops/objArrayOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/objArrayOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/objArrayOop.cpp	2008-12-05 16:41:22.057636399 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)objArrayOop.cpp	1.14 07/05/05 17:06:07 JVM"
-#endif
 /*
  * Copyright 1997 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -29,4 +26,3 @@
 # include "incls/_objArrayOop.cpp.incl"
 
 // <<this page is intentionally left blank>>
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/objArrayOop.hpp openjdk/hotspot/src/share/vm/oops/objArrayOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/objArrayOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/objArrayOop.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)objArrayOop.hpp	1.29 07/05/05 17:06:07 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/oop.cpp openjdk/hotspot/src/share/vm/oops/oop.cpp
--- openjdk6/hotspot/src/share/vm/oops/oop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/oop.cpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)oop.cpp	1.99 07/05/29 09:44:21 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/oop.hpp openjdk/hotspot/src/share/vm/oops/oop.hpp
--- openjdk6/hotspot/src/share/vm/oops/oop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/oop.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oop.hpp	1.118 07/08/31 18:42:30 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/oop.inline.hpp openjdk/hotspot/src/share/vm/oops/oop.inline.hpp
--- openjdk6/hotspot/src/share/vm/oops/oop.inline.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/oop.inline.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oop.inline.hpp	1.142 07/09/25 16:47:44 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/oop.inline2.hpp openjdk/hotspot/src/share/vm/oops/oop.inline2.hpp
--- openjdk6/hotspot/src/share/vm/oops/oop.inline2.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/oop.inline2.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oop.inline2.hpp	1.14 07/08/31 18:42:30 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/oop.pcgc.inline.hpp openjdk/hotspot/src/share/vm/oops/oop.pcgc.inline.hpp
--- openjdk6/hotspot/src/share/vm/oops/oop.pcgc.inline.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/oop.pcgc.inline.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oop.pcgc.inline.hpp	1.16 07/05/29 09:44:24 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/oop.psgc.inline.hpp openjdk/hotspot/src/share/vm/oops/oop.psgc.inline.hpp
--- openjdk6/hotspot/src/share/vm/oops/oop.psgc.inline.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/oop.psgc.inline.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oop.psgc.inline.hpp	1.17 07/05/05 17:06:07 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -44,4 +41,3 @@
   }
   // Else skip it.  The typeArrayKlass in the header never needs scavenging.
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/oopsHierarchy.cpp openjdk/hotspot/src/share/vm/oops/oopsHierarchy.cpp
--- openjdk6/hotspot/src/share/vm/oops/oopsHierarchy.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/oopsHierarchy.cpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oopsHierarchy.cpp	1.7 07/05/05 17:06:08 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/oopsHierarchy.hpp openjdk/hotspot/src/share/vm/oops/oopsHierarchy.hpp
--- openjdk6/hotspot/src/share/vm/oops/oopsHierarchy.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/oopsHierarchy.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)oopsHierarchy.hpp	1.31 07/05/17 15:57:10 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/symbolKlass.cpp openjdk/hotspot/src/share/vm/oops/symbolKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/symbolKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/symbolKlass.cpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)symbolKlass.cpp	1.66 07/05/29 09:44:24 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/symbolKlass.hpp openjdk/hotspot/src/share/vm/oops/symbolKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/symbolKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/symbolKlass.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)symbolKlass.hpp	1.42 07/05/29 09:44:24 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -75,4 +72,3 @@
 #endif
   const char* internal_name() const;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/symbolOop.cpp openjdk/hotspot/src/share/vm/oops/symbolOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/symbolOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/symbolOop.cpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)symbolOop.cpp	1.28 07/05/05 17:06:08 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/symbolOop.hpp openjdk/hotspot/src/share/vm/oops/symbolOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/symbolOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/symbolOop.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)symbolOop.hpp	1.40 07/05/05 17:06:07 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -119,4 +116,3 @@
  return (((uintptr_t)this < (uintptr_t)other) ? -1
    : ((uintptr_t)this == (uintptr_t) other) ? 0 : 1);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/typeArrayKlass.cpp openjdk/hotspot/src/share/vm/oops/typeArrayKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/typeArrayKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/typeArrayKlass.cpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)typeArrayKlass.cpp	1.125 07/05/29 09:44:24 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/typeArrayKlass.hpp openjdk/hotspot/src/share/vm/oops/typeArrayKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/typeArrayKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/typeArrayKlass.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)typeArrayKlass.hpp	1.69 07/05/29 09:44:25 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/oops/typeArrayKlassKlass.cpp openjdk/hotspot/src/share/vm/oops/typeArrayKlassKlass.cpp
--- openjdk6/hotspot/src/share/vm/oops/typeArrayKlassKlass.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/typeArrayKlassKlass.cpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)typeArrayKlassKlass.cpp	1.30 07/05/05 17:06:08 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -71,4 +68,3 @@
 const char* typeArrayKlassKlass::internal_name() const {
   return "{type array class}";
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/typeArrayKlassKlass.hpp openjdk/hotspot/src/share/vm/oops/typeArrayKlassKlass.hpp
--- openjdk6/hotspot/src/share/vm/oops/typeArrayKlassKlass.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/typeArrayKlassKlass.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)typeArrayKlassKlass.hpp	1.24 07/05/05 17:06:08 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -59,4 +56,3 @@
  public:
   const char* internal_name() const;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/typeArrayOop.cpp openjdk/hotspot/src/share/vm/oops/typeArrayOop.cpp
--- openjdk6/hotspot/src/share/vm/oops/typeArrayOop.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/typeArrayOop.cpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)typeArrayOop.cpp	1.14 07/05/05 17:06:08 JVM"
-#endif
 /*
  * Copyright 1997 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -29,4 +26,3 @@
 # include "incls/_typeArrayOop.cpp.incl"
 
 // <<this page is intentionally left blank>>
-
diff -ruNb openjdk6/hotspot/src/share/vm/oops/typeArrayOop.hpp openjdk/hotspot/src/share/vm/oops/typeArrayOop.hpp
--- openjdk6/hotspot/src/share/vm/oops/typeArrayOop.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/oops/typeArrayOop.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)typeArrayOop.hpp	1.46 07/05/05 17:06:08 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/addnode.cpp openjdk/hotspot/src/share/vm/opto/addnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/addnode.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/addnode.cpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)addnode.cpp	1.142 07/10/23 13:12:52 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -611,28 +608,6 @@
   return NULL;
 }
 
-//------------------------------unpack_offsets----------------------------------
-// Collect the AddP offset values into the elements array, giving up
-// if there are more than length.
-int AddPNode::unpack_offsets(Node* elements[], int length) {
-  int count = 0;
-  Node* addr = this;
-  Node* base = addr->in(AddPNode::Base);
-  while (addr->is_AddP()) {
-    if (addr->in(AddPNode::Base) != base) {
-      // give up
-      return -1;
-    }
-    elements[count++] = addr->in(AddPNode::Offset);
-    if (count == length) {
-      // give up
-      return -1;
-    }
-    addr = addr->in(AddPNode::Address);
-  }
-  return count;
-}
-
 //------------------------------match_edge-------------------------------------
 // Do we Match on this edge index or not?  Do not match base pointer edge
 uint AddPNode::match_edge(uint idx) const {
diff -ruNb openjdk6/hotspot/src/share/vm/opto/addnode.hpp openjdk/hotspot/src/share/vm/opto/addnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/addnode.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/addnode.hpp	2008-12-05 16:41:22.067636550 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)addnode.hpp	1.59 07/10/23 13:12:52 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -147,11 +144,6 @@
   static Node* Ideal_base_and_offset(Node* ptr, PhaseTransform* phase,
                                      // second return value:
                                      intptr_t& offset);
-
-  // Collect the AddP offset values into the elements array, giving up
-  // if there are more than length.
-  int unpack_offsets(Node* elements[], int length);
-
   // Do not match base-ptr edge
   virtual uint match_edge(uint idx) const;
   static const Type *mach_bottom_type(const MachNode* n);  // used by ad_<arch>.hpp
diff -ruNb openjdk6/hotspot/src/share/vm/opto/adlcVMDeps.hpp openjdk/hotspot/src/share/vm/opto/adlcVMDeps.hpp
--- openjdk6/hotspot/src/share/vm/opto/adlcVMDeps.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/adlcVMDeps.hpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)adlcVMDeps.hpp	1.19 07/05/05 17:06:10 JVM"
-#endif
 /*
  * Copyright 1998-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/block.cpp openjdk/hotspot/src/share/vm/opto/block.cpp
--- openjdk6/hotspot/src/share/vm/opto/block.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/block.cpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)block.cpp	1.172 07/09/28 10:23:15 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/block.hpp openjdk/hotspot/src/share/vm/opto/block.hpp
--- openjdk6/hotspot/src/share/vm/opto/block.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/block.hpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)block.hpp	1.102 07/09/25 09:22:14 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/buildOopMap.cpp openjdk/hotspot/src/share/vm/opto/buildOopMap.cpp
--- openjdk6/hotspot/src/share/vm/opto/buildOopMap.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/buildOopMap.cpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)buildOopMap.cpp	1.37 07/05/05 17:06:11 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/bytecodeInfo.cpp openjdk/hotspot/src/share/vm/opto/bytecodeInfo.cpp
--- openjdk6/hotspot/src/share/vm/opto/bytecodeInfo.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/bytecodeInfo.cpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)bytecodeInfo.cpp	1.122 07/05/05 17:06:12 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/c2_globals.cpp openjdk/hotspot/src/share/vm/opto/c2_globals.cpp
--- openjdk6/hotspot/src/share/vm/opto/c2_globals.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/c2_globals.cpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c2_globals.cpp	1.14 07/05/17 15:57:19 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/c2_globals.hpp openjdk/hotspot/src/share/vm/opto/c2_globals.hpp
--- openjdk6/hotspot/src/share/vm/opto/c2_globals.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/c2_globals.hpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c2_globals.hpp	1.96 07/10/23 13:12:52 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -370,12 +367,6 @@
   notproduct(bool, PrintEliminateLocks, false,                              \
           "Print out when locks are eliminated")                            \
                                                                             \
-  diagnostic(bool, EliminateAutoBox, false,                                 \
-          "Private flag to control optimizations for autobox elimination")  \
-                                                                            \
-  product(intx, AutoBoxCacheMax, 128,                                       \
-          "Sets max value cached by the java.lang.Integer autobox cache")   \
-                                                                            \
   product(bool, DoEscapeAnalysis, false,                                    \
           "Perform escape analysis")                                        \
                                                                             \
@@ -389,4 +380,3 @@
           "Maximum times call Label_Root to prevent stack overflow")        \
 
 C2_FLAGS(DECLARE_DEVELOPER_FLAG, DECLARE_PD_DEVELOPER_FLAG, DECLARE_PRODUCT_FLAG, DECLARE_PD_PRODUCT_FLAG, DECLARE_DIAGNOSTIC_FLAG, DECLARE_NOTPRODUCT_FLAG)
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/c2compiler.cpp openjdk/hotspot/src/share/vm/opto/c2compiler.cpp
--- openjdk6/hotspot/src/share/vm/opto/c2compiler.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/c2compiler.cpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)c2compiler.cpp	1.29 07/05/05 17:06:11 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/c2compiler.hpp openjdk/hotspot/src/share/vm/opto/c2compiler.hpp
--- openjdk6/hotspot/src/share/vm/opto/c2compiler.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/c2compiler.hpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c2compiler.hpp	1.28 07/05/05 17:06:11 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -57,10 +54,3 @@
   // Print compilation timers and statistics
   void print_timers();
 };
-
-
-
-
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/callGenerator.cpp openjdk/hotspot/src/share/vm/opto/callGenerator.cpp
--- openjdk6/hotspot/src/share/vm/opto/callGenerator.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/callGenerator.cpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)callGenerator.cpp	1.49 07/08/07 15:24:21 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/callGenerator.hpp openjdk/hotspot/src/share/vm/opto/callGenerator.hpp
--- openjdk6/hotspot/src/share/vm/opto/callGenerator.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/callGenerator.hpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)callGenerator.hpp	1.19 07/05/05 17:06:12 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/callnode.cpp openjdk/hotspot/src/share/vm/opto/callnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/callnode.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/callnode.cpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)callnode.cpp	1.238 07/10/04 14:36:00 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/callnode.hpp openjdk/hotspot/src/share/vm/opto/callnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/callnode.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/callnode.hpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)callnode.hpp	1.195 07/10/04 14:36:00 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/cfgnode.cpp openjdk/hotspot/src/share/vm/opto/cfgnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/cfgnode.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/cfgnode.cpp	2008-12-05 16:41:22.077636701 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)cfgnode.cpp	1.262 08/11/24 12:22:57 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1558,6 +1555,64 @@
     if (opt != NULL)  return opt;
   }
 
+  if (in(1) != NULL && in(1)->Opcode() == Op_AddP && can_reshape) {
+    // Try to undo Phi of AddP:
+    //   (Phi (AddP base base y) (AddP base2 base2 y))
+    // becomes:
+    //   newbase := (Phi base base2)
+    //   (AddP newbase newbase y)
+    //
+    // This occurs as a result of unsuccessful split_thru_phi and
+    // interferes with taking advantage of addressing modes.  See the
+    // clone_shift_expressions code in matcher.cpp
+    Node* addp = in(1);
+    const Type* type = addp->in(AddPNode::Base)->bottom_type();
+    Node* y = addp->in(AddPNode::Offset);
+    if (y != NULL && addp->in(AddPNode::Base) == addp->in(AddPNode::Address)) {
+      // make sure that all the inputs are similar to the first one,
+      // i.e. AddP with base == address and same offset as first AddP
+      bool doit = true;
+      for (uint i = 2; i < req(); i++) {
+        if (in(i) == NULL ||
+            in(i)->Opcode() != Op_AddP ||
+            in(i)->in(AddPNode::Base) != in(i)->in(AddPNode::Address) ||
+            in(i)->in(AddPNode::Offset) != y) {
+          doit = false;
+          break;
+        }
+        // Accumulate type for resulting Phi
+        type = type->meet(in(i)->in(AddPNode::Base)->bottom_type());
+      }
+      Node* base = NULL;
+      if (doit) {
+        // Check for neighboring AddP nodes in a tree.
+        // If they have a base, use that it.
+        for (DUIterator_Fast kmax, k = this->fast_outs(kmax); k < kmax; k++) {
+          Node* u = this->fast_out(k);
+          if (u->is_AddP()) {
+            Node* base2 = u->in(AddPNode::Base);
+            if (base2 != NULL && !base2->is_top()) {
+              if (base == NULL)
+                base = base2;
+              else if (base != base2)
+                { doit = false; break; }
+            }
+          }
+        }
+      }
+      if (doit) {
+        if (base == NULL) {
+          base = new (phase->C, in(0)->req()) PhiNode(in(0), type, NULL);
+          for (uint i = 1; i < req(); i++) {
+            base->init_req(i, in(i)->in(AddPNode::Base));
+          }
+          phase->is_IterGVN()->register_new_node_with_optimizer(base);
+        }
+        return new (phase->C, 4) AddPNode(base, base, y);
+      }
+    }
+  }
+
   // Split phis through memory merges, so that the memory merges will go away.
   // Piggy-back this transformation on the search for a unique input....
   // It will be as if the merged memory is the unique value of the phi.
@@ -1897,4 +1952,3 @@
   st->print("%s", Name());
 }
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/cfgnode.hpp openjdk/hotspot/src/share/vm/opto/cfgnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/cfgnode.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/cfgnode.hpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)cfgnode.hpp	1.117 07/10/23 13:12:52 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -313,14 +310,8 @@
   virtual const RegMask &out_RegMask() const;
   void dominated_by(Node* prev_dom, PhaseIterGVN* igvn);
   int is_range_check(Node* &range, Node* &index, jint &offset);
-  Node* fold_compares(PhaseGVN* phase);
   static Node* up_one_dom(Node* curr, bool linear_only = false);
 
-  // Takes the type of val and filters it through the test represented
-  // by if_proj and returns a more refined type if one is produced.
-  // Returns NULL is it couldn't improve the type.
-  static const TypeInt* filtered_int_type(PhaseGVN* phase, Node* val, Node* if_proj);
-
 #ifndef PRODUCT
   virtual void dump_spec(outputStream *st) const;
 #endif
@@ -488,4 +479,3 @@
   virtual void format( PhaseRegAlloc *, outputStream *st ) const;
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/chaitin.cpp openjdk/hotspot/src/share/vm/opto/chaitin.cpp
--- openjdk6/hotspot/src/share/vm/opto/chaitin.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/chaitin.cpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)chaitin.cpp	1.116 07/09/28 10:23:12 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -46,7 +43,7 @@
   if( _degree_valid ) tty->print( "%d ", _eff_degree );
   else tty->print("? ");
 
-  if( is_multidef() ) {
+  if( _def == NodeSentinel ) {
     tty->print("MultiDef ");
     if (_defs != NULL) {
       tty->print("(");
@@ -767,7 +764,7 @@
         // if the LRG is an unaligned pair, we will have to spill
         // so clear the LRG's register mask if it is not already spilled
         if ( !n->is_SpillCopy() && 
-               (lrg._def == NULL || lrg.is_multidef() || !lrg._def->is_SpillCopy()) &&
+               (lrg._def == NULL || lrg._def == NodeSentinel || !lrg._def->is_SpillCopy()) &&
                lrgmask.is_misaligned_Pair()) {
           lrg.Clear();
         }
@@ -1284,7 +1281,7 @@
     // Live range is live and no colors available
     else {   
       assert( lrg->alive(), "" );
-      assert( !lrg->_fat_proj || lrg->is_multidef() ||
+      assert( !lrg->_fat_proj || lrg->_def == NodeSentinel ||
               lrg->_def->outcnt() > 0, "fat_proj cannot spill");
       assert( !orig_mask.is_AllStack(), "All Stack does not spill" );
 
diff -ruNb openjdk6/hotspot/src/share/vm/opto/chaitin.hpp openjdk/hotspot/src/share/vm/opto/chaitin.hpp
--- openjdk6/hotspot/src/share/vm/opto/chaitin.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/chaitin.hpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)chaitin.hpp	1.161 08/03/26 10:13:00 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -159,8 +156,6 @@
 
   // Alive if non-zero, dead if zero
   bool alive() const { return _def != NULL; }
-  bool is_multidef() const { return _def == NodeSentinel; }
-  bool is_singledef() const { return _def != NodeSentinel; }
 
 #ifndef PRODUCT
   void dump( ) const;
@@ -325,8 +320,7 @@
   uint split_DEF( Node *def, Block *b, int loc, uint max, Node **Reachblock, Node **debug_defs, GrowableArray<uint> splits, int slidx );
   uint split_USE( Node *def, Block *b, Node *use, uint useidx, uint max, bool def_down, bool cisc_sp, GrowableArray<uint> splits, int slidx );
   int clone_projs( Block *b, uint idx, Node *con, Node *copy, uint &maxlrg );
-  Node *split_Rematerialize(Node *def, Block *b, uint insidx, uint &maxlrg, GrowableArray<uint> splits,
-                            int slidx, uint *lrg2reach, Node **Reachblock, bool walkThru);
+  Node *split_Rematerialize( Node *def, Block *b, uint insidx, uint &maxlrg, GrowableArray<uint> splits, int slidx, uint *lrg2reach, Node **Reachblock, bool walkThru );
   // True if lidx is used before any real register is def'd in the block
   bool prompt_use( Block *b, uint lidx );
   Node *get_spillcopy_wide( Node *def, Node *use, uint uidx );
@@ -463,8 +457,7 @@
   bool may_be_copy_of_callee( Node *def ) const;
 
   // If nreg already contains the same constant as val then eliminate it
-  bool eliminate_copy_of_constant(Node* val, Node* n,
-                                  Block *current_block, Node_List& value, Node_List &regnd,
+  bool eliminate_copy_of_constant(Node* val, Block *current_block, Node_List& value, Node_List &regnd,
                                   OptoReg::Name nreg, OptoReg::Name nreg2);
   // Extend the node to LRG mapping
   void add_reference( const Node *node, const Node *old_node);
diff -ruNb openjdk6/hotspot/src/share/vm/opto/classes.cpp openjdk/hotspot/src/share/vm/opto/classes.cpp
--- openjdk6/hotspot/src/share/vm/opto/classes.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/classes.cpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)classes.cpp	1.31 07/05/05 17:06:12 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -35,4 +32,3 @@
 #define macro(x) int x##Node::Opcode() const { return Op_##x; }
 #include "classes.hpp"
 #undef macro
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/classes.hpp openjdk/hotspot/src/share/vm/opto/classes.hpp
--- openjdk6/hotspot/src/share/vm/opto/classes.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/classes.hpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)classes.hpp	1.178 07/07/19 19:08:27 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/coalesce.cpp openjdk/hotspot/src/share/vm/opto/coalesce.cpp
--- openjdk6/hotspot/src/share/vm/opto/coalesce.cpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/coalesce.cpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)coalesce.cpp	1.196 07/09/28 10:23:11 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -607,8 +604,8 @@
   // If both are single def, then src_def powers one live range
   // and def_copy powers the other.  After merging, src_def powers
   // the combined live range.
-  lrgs(lr1)._def = (lrgs(lr1).is_multidef() ||
-                        lrgs(lr2).is_multidef() ) 
+  lrgs(lr1)._def = (lrgs(lr1)._def == NodeSentinel ||
+                        lrgs(lr2)._def == NodeSentinel )
     ? NodeSentinel : src_def;
   lrgs(lr2)._def = NULL;    // No def for lrg 2
   lrgs(lr2).Clear();        // Force empty mask for LRG 2
@@ -916,4 +913,3 @@
     */
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/coalesce.hpp openjdk/hotspot/src/share/vm/opto/coalesce.hpp
--- openjdk6/hotspot/src/share/vm/opto/coalesce.hpp	2008-11-25 10:12:09.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/coalesce.hpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)coalesce.hpp	1.44 07/05/05 17:06:14 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -110,4 +107,3 @@
 
   void update_ifg(uint lr1, uint lr2, IndexSet *n_lr1, IndexSet *n_lr2);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/compile.cpp openjdk/hotspot/src/share/vm/opto/compile.cpp
--- openjdk6/hotspot/src/share/vm/opto/compile.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/compile.cpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compile.cpp	1.633 07/09/28 10:23:11 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/compile.hpp openjdk/hotspot/src/share/vm/opto/compile.hpp
--- openjdk6/hotspot/src/share/vm/opto/compile.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/compile.hpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compile.hpp	1.232 07/09/28 10:23:10 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/connode.cpp openjdk/hotspot/src/share/vm/opto/connode.cpp
--- openjdk6/hotspot/src/share/vm/opto/connode.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/connode.cpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)connode.cpp	1.222 07/10/16 13:32:21 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/connode.hpp openjdk/hotspot/src/share/vm/opto/connode.hpp
--- openjdk6/hotspot/src/share/vm/opto/connode.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/connode.hpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)connode.hpp	1.160 07/05/05 17:06:13 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/divnode.cpp openjdk/hotspot/src/share/vm/opto/divnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/divnode.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/divnode.cpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)divnode.cpp	1.88 07/05/05 17:06:13 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/divnode.hpp openjdk/hotspot/src/share/vm/opto/divnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/divnode.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/divnode.hpp	2008-12-05 16:41:22.087636851 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)divnode.hpp	1.31 07/05/05 17:06:16 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -178,4 +175,3 @@
   // Make a divmod and associated projections from a div or mod.
   static DivModLNode* make(Compile* C, Node* div_or_mod);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/doCall.cpp openjdk/hotspot/src/share/vm/opto/doCall.cpp
--- openjdk6/hotspot/src/share/vm/opto/doCall.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/doCall.cpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)doCall.cpp	1.207 07/07/19 19:08:29 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/domgraph.cpp openjdk/hotspot/src/share/vm/opto/domgraph.cpp
--- openjdk6/hotspot/src/share/vm/opto/domgraph.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/domgraph.cpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)domgraph.cpp	1.76 07/07/11 15:38:57 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -665,4 +662,3 @@
 
 }
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/escape.cpp openjdk/hotspot/src/share/vm/opto/escape.cpp
--- openjdk6/hotspot/src/share/vm/opto/escape.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/escape.cpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)escape.cpp	1.10 07/05/17 15:58:23 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/escape.hpp openjdk/hotspot/src/share/vm/opto/escape.hpp
--- openjdk6/hotspot/src/share/vm/opto/escape.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/escape.hpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)escape.hpp	1.9 07/05/17 15:58:25 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -320,4 +317,3 @@
   void dump();
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/gcm.cpp openjdk/hotspot/src/share/vm/opto/gcm.cpp
--- openjdk6/hotspot/src/share/vm/opto/gcm.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/gcm.cpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)gcm.cpp	1.259 08/07/10 14:40:09 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -310,6 +307,7 @@
 
     // Test and set the visited bit.
     if (mid->raise_LCA_visited() == mark)  continue;  // already visited
+    mid->set_raise_LCA_visited(mark);
 
     // Don't process the current LCA, otherwise the search may terminate early
     if (mid != LCA && mid->raise_LCA_mark() == mark) {
@@ -319,8 +317,6 @@
       assert(early->dominates(LCA), "early is high enough");
       // Resume searching at that point, skipping intermediate levels.
       worklist.push(LCA);
-      if (LCA == mid)
-        continue; // Don't mark as visited to avoid early termination.
     } else {
       // Keep searching through this block's predecessors.
       for (uint j = 1, jmax = mid->num_preds(); j < jmax; j++) {
@@ -328,7 +324,6 @@
         worklist.push(mid_parent);
       }
     }
-    mid->set_raise_LCA_visited(mark);
   }
   return LCA;
 }
diff -ruNb openjdk6/hotspot/src/share/vm/opto/generateOptoStub.cpp openjdk/hotspot/src/share/vm/opto/generateOptoStub.cpp
--- openjdk6/hotspot/src/share/vm/opto/generateOptoStub.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/generateOptoStub.cpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)generateOptoStub.cpp	1.101 07/05/05 17:06:17 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -292,4 +289,3 @@
   }
   root()->add_req(_gvn.transform(ret));
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/graphKit.cpp openjdk/hotspot/src/share/vm/opto/graphKit.cpp
--- openjdk6/hotspot/src/share/vm/opto/graphKit.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/graphKit.cpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)graphKit.cpp	1.132 07/10/04 14:36:00 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/graphKit.hpp openjdk/hotspot/src/share/vm/opto/graphKit.hpp
--- openjdk6/hotspot/src/share/vm/opto/graphKit.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/graphKit.hpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)graphKit.hpp	1.59 07/08/07 15:24:25 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -721,4 +718,3 @@
   BuildCutout(GraphKit* kit, Node* p, float prob, float cnt = COUNT_UNKNOWN);
   ~BuildCutout();
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/idealGraphPrinter.cpp openjdk/hotspot/src/share/vm/opto/idealGraphPrinter.cpp
--- openjdk6/hotspot/src/share/vm/opto/idealGraphPrinter.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/idealGraphPrinter.cpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)idealGraphPrinter.cpp	1.2 07/10/02 11:32:04 JVM"
-#endif
 /*
  * Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/idealGraphPrinter.hpp openjdk/hotspot/src/share/vm/opto/idealGraphPrinter.hpp
--- openjdk6/hotspot/src/share/vm/opto/idealGraphPrinter.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/idealGraphPrinter.hpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)idealGraphPrinter.hpp	1.1 07/09/28 11:48:37 JVM"
-#endif
 /*
  * Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/idealKit.cpp openjdk/hotspot/src/share/vm/opto/idealKit.cpp
--- openjdk6/hotspot/src/share/vm/opto/idealKit.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/idealKit.cpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)idealKit.cpp	1.8 07/06/18 14:25:26 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/idealKit.hpp openjdk/hotspot/src/share/vm/opto/idealKit.hpp
--- openjdk6/hotspot/src/share/vm/opto/idealKit.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/idealKit.hpp	2008-12-05 16:41:22.097637002 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)idealKit.hpp	1.8 07/06/18 14:25:26 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/ifg.cpp openjdk/hotspot/src/share/vm/opto/ifg.cpp
--- openjdk6/hotspot/src/share/vm/opto/ifg.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/ifg.cpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ifg.cpp	1.62 07/05/05 17:06:13 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -597,7 +594,7 @@
 
           // Insure high score for immediate-use spill copies so they get a color
           if( n->is_SpillCopy()             
-              && lrgs(r).is_singledef()        // MultiDef live range can still split
+              && lrgs(r)._def != NodeSentinel     // MultiDef live range can still split
               && n->outcnt() == 1              // and use must be in this block
               && _cfg._bbs[n->unique_out()->_idx] == b ) {
             // All single-use MachSpillCopy(s) that immediately precede their 
@@ -814,4 +811,3 @@
 
   return must_spill;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/ifnode.cpp openjdk/hotspot/src/share/vm/opto/ifnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/ifnode.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/ifnode.cpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ifnode.cpp	1.63 07/10/23 13:12:51 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -546,159 +543,6 @@
   return NULL;                  // Dead loop?  Or hit root?
 }
 
-
-//------------------------------filtered_int_type--------------------------------
-// Return a possibly more restrictive type for val based on condition control flow for an if
-const TypeInt* IfNode::filtered_int_type(PhaseGVN* gvn, Node *val, Node* if_proj) {
-  assert(if_proj &&
-         (if_proj->Opcode() == Op_IfTrue || if_proj->Opcode() == Op_IfFalse), "expecting an if projection");
-  if (if_proj->in(0) && if_proj->in(0)->is_If()) {
-    IfNode* iff = if_proj->in(0)->as_If();
-    if (iff->in(1) && iff->in(1)->is_Bool()) {
-      BoolNode* bol = iff->in(1)->as_Bool();
-      if (bol->in(1) && bol->in(1)->is_Cmp()) {
-        const CmpNode* cmp  = bol->in(1)->as_Cmp();
-        if (cmp->in(1) == val) {
-          const TypeInt* cmp2_t = gvn->type(cmp->in(2))->isa_int();
-          if (cmp2_t != NULL) {
-            jint lo = cmp2_t->_lo;
-            jint hi = cmp2_t->_hi;
-            BoolTest::mask msk = if_proj->Opcode() == Op_IfTrue ? bol->_test._test : bol->_test.negate();
-            switch (msk) {
-            case BoolTest::ne:
-              // Can't refine type
-              return NULL;
-            case BoolTest::eq:
-              return cmp2_t;
-            case BoolTest::lt:
-              lo = TypeInt::INT->_lo;
-              if (hi - 1 < hi) {
-                hi = hi - 1;
-              }
-              break;
-            case BoolTest::le:
-              lo = TypeInt::INT->_lo;
-              break;
-            case BoolTest::gt:
-              if (lo + 1 > lo) {
-                lo = lo + 1;
-              }
-              hi = TypeInt::INT->_hi;
-              break;
-            case BoolTest::ge:
-              // lo unchanged
-              hi = TypeInt::INT->_hi;
-              break;
-            }
-            const TypeInt* rtn_t = TypeInt::make(lo, hi, cmp2_t->_widen);
-            return rtn_t;
-          }
-        }
-      }
-    }
-  }
-  return NULL;
-}
-
-//------------------------------fold_compares----------------------------
-// See if a pair of CmpIs can be converted into a CmpU.  In some cases
-// the direction of this if is determined by the preciding if so it
-// can be eliminate entirely.  Given an if testing (CmpI n c) check
-// for an immediately control dependent if that is testing (CmpI n c2)
-// and has one projection leading to this if and the other projection
-// leading to a region that merges one of this ifs control
-// projections.
-//            
-//                   If
-//                  / |
-//                 /  |
-//                /   |
-//              If    |
-//              /\    |
-//             /  \   |
-//            /    \  |
-//           /    Region
-//  
-Node* IfNode::fold_compares(PhaseGVN* phase) {
-  if (!EliminateAutoBox || Opcode() != Op_If) return NULL;
-
-  Node* this_cmp = in(1)->in(1);
-  if (this_cmp != NULL && this_cmp->Opcode() == Op_CmpI &&
-      this_cmp->in(2)->is_Con() && this_cmp->in(2) != phase->C->top()) {
-    Node* ctrl = in(0);
-    BoolNode* this_bool = in(1)->as_Bool();
-    Node* n = this_cmp->in(1);
-    int hi = this_cmp->in(2)->get_int();
-    if (ctrl != NULL && ctrl->is_Proj() && ctrl->outcnt() == 1 &&
-        ctrl->in(0)->is_If() &&
-        ctrl->in(0)->outcnt() == 2 &&
-        ctrl->in(0)->in(1)->is_Bool() &&
-        ctrl->in(0)->in(1)->in(1)->Opcode() == Op_CmpI &&
-        ctrl->in(0)->in(1)->in(1)->in(2)->is_Con() &&
-        ctrl->in(0)->in(1)->in(1)->in(1) == n) {
-      IfNode* dom_iff = ctrl->in(0)->as_If();
-      Node* otherproj = dom_iff->proj_out(!ctrl->as_Proj()->_con);
-      if (otherproj->outcnt() == 1 && otherproj->unique_out()->is_Region() &&
-          this_bool->_test._test != BoolTest::ne && this_bool->_test._test != BoolTest::eq) {
-        // Identify which proj goes to the region and which continues on
-        RegionNode* region = otherproj->unique_out()->as_Region();
-        Node* success = NULL;
-        Node* fail = NULL;
-        for (int i = 0; i < 2; i++) {
-          Node* proj = proj_out(i);
-          if (success == NULL && proj->outcnt() == 1 && proj->unique_out() == region) {
-            success = proj;
-          } else if (fail == NULL) {
-            fail = proj;
-          } else {
-            success = fail = NULL;
-          }
-        }
-        if (success != NULL && fail != NULL && !region->has_phi()) {
-          int lo = dom_iff->in(1)->in(1)->in(2)->get_int();
-          BoolNode* dom_bool = dom_iff->in(1)->as_Bool();
-          Node* dom_cmp =  dom_bool->in(1);
-          const TypeInt* failtype  = filtered_int_type(phase, n, ctrl);
-          if (failtype != NULL) {
-            const TypeInt* type2 = filtered_int_type(phase, n, fail);
-            if (type2 != NULL) {
-              failtype = failtype->join(type2)->is_int();
-            } else {
-              failtype = NULL;
-            }
-          }
-
-          if (failtype != NULL &&
-              dom_bool->_test._test != BoolTest::ne && dom_bool->_test._test != BoolTest::eq) {
-            int bound = failtype->_hi - failtype->_lo + 1;
-            if (failtype->_hi != max_jint && failtype->_lo != min_jint && bound > 1) {
-              // Merge the two compares into a single unsigned compare by building  (CmpU (n - lo) hi)
-              BoolTest::mask cond = fail->as_Proj()->_con ? BoolTest::lt : BoolTest::ge;
-              Node* adjusted = phase->transform(new (phase->C, 3) SubINode(n, phase->intcon(failtype->_lo)));
-              Node* newcmp = phase->transform(new (phase->C, 3) CmpUNode(adjusted, phase->intcon(bound)));
-              Node* newbool = phase->transform(new (phase->C, 2) BoolNode(newcmp, cond));
-              phase->hash_delete(dom_iff);
-              dom_iff->set_req(1, phase->intcon(ctrl->as_Proj()->_con));
-              phase->is_IterGVN()->_worklist.push(dom_iff);
-              phase->hash_delete(this);
-              set_req(1, newbool);
-              return this;
-            }
-            if (failtype->_lo > failtype->_hi) {
-              // previous if determines the result of this if so
-              // replace Bool with constant
-              phase->hash_delete(this);
-              set_req(1, phase->intcon(success->as_Proj()->_con));
-              return this;
-            }
-          }
-        }
-      }
-    }
-  }
-  return NULL;
-}
-
 //------------------------------remove_useless_bool----------------------------
 // Check for people making a useless boolean: things like
 // if( (x < y ? true : false) ) { ... }
@@ -900,11 +744,6 @@
     // Normal equivalent-test check.
     if( !dom ) return NULL;     // Dead loop?
 
-    Node* result = fold_compares(phase);
-    if (result != NULL) {
-      return result;
-    }
-
     // Search up the dominator tree for an If with an identical test
     while( dom->Opcode() != op    ||  // Not same opcode?
            dom->in(1)    != in(1) ||  // Not same input 1?
@@ -1081,4 +920,3 @@
     ? in(0)->in(0)              // IfNode control
     : this;                     // no progress
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/indexSet.cpp openjdk/hotspot/src/share/vm/opto/indexSet.cpp
--- openjdk6/hotspot/src/share/vm/opto/indexSet.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/indexSet.cpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)indexSet.cpp	1.24 07/05/05 17:06:16 JVM"
-#endif
 /*
  * Copyright 1998-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/indexSet.hpp openjdk/hotspot/src/share/vm/opto/indexSet.hpp
--- openjdk6/hotspot/src/share/vm/opto/indexSet.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/indexSet.hpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)indexSet.hpp	1.29 07/05/05 17:06:18 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/lcm.cpp openjdk/hotspot/src/share/vm/opto/lcm.cpp
--- openjdk6/hotspot/src/share/vm/opto/lcm.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/lcm.cpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)lcm.cpp	1.102 07/05/17 15:58:55 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -935,7 +932,3 @@
     }
   }
 }
-
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/library_call.cpp openjdk/hotspot/src/share/vm/opto/library_call.cpp
--- openjdk6/hotspot/src/share/vm/opto/library_call.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/library_call.cpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)library_call.cpp	1.167 07/07/25 17:43:16 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -4922,4 +4919,3 @@
                     copyfunc_addr, copyfunc_name, adr_type,
                     src_start, dest_start, copy_length XTOP);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/live.cpp openjdk/hotspot/src/share/vm/opto/live.cpp
--- openjdk6/hotspot/src/share/vm/opto/live.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/live.cpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)live.cpp	1.70 07/05/17 17:44:00 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/live.hpp openjdk/hotspot/src/share/vm/opto/live.hpp
--- openjdk6/hotspot/src/share/vm/opto/live.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/live.hpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)live.hpp	1.43 07/05/05 17:06:19 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/locknode.cpp openjdk/hotspot/src/share/vm/opto/locknode.cpp
--- openjdk6/hotspot/src/share/vm/opto/locknode.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/locknode.cpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)locknode.cpp	1.49 07/05/17 15:59:05 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -123,6 +120,3 @@
   // for a null check on Unlock.
   shared_unlock(map()->peek_monitor_box(), map()->peek_monitor_obj());
 } 
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/locknode.hpp openjdk/hotspot/src/share/vm/opto/locknode.hpp
--- openjdk6/hotspot/src/share/vm/opto/locknode.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/locknode.hpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)locknode.hpp	1.40 07/09/28 10:23:10 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -98,4 +95,3 @@
   const Type *sub(const Type *t1, const Type *t2) const { return TypeInt::CC;}
 
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/loopTransform.cpp openjdk/hotspot/src/share/vm/opto/loopTransform.cpp
--- openjdk6/hotspot/src/share/vm/opto/loopTransform.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/loopTransform.cpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)loopTransform.cpp	1.116 07/06/01 11:35:03 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/loopUnswitch.cpp openjdk/hotspot/src/share/vm/opto/loopUnswitch.cpp
--- openjdk6/hotspot/src/share/vm/opto/loopUnswitch.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/loopUnswitch.cpp	2008-12-05 16:41:22.107637153 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)loopUnswitch.cpp	1.6 07/06/29 14:41:32 JVM"
-#endif
 /*
  * Copyright 2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/loopnode.cpp openjdk/hotspot/src/share/vm/opto/loopnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/loopnode.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/loopnode.cpp	2008-12-05 16:41:22.117637304 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)loopnode.cpp	1.262 07/10/23 13:12:50 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -654,7 +651,7 @@
     while (if_cnt < if_limit) {
       if ((pred->Opcode() == Op_IfTrue || pred->Opcode() == Op_IfFalse)) {
         if_cnt++;
-        const TypeInt* if_t = IfNode::filtered_int_type(&_igvn, val, pred);
+        const TypeInt* if_t = filtered_type_at_if(val, pred);
         if (if_t != NULL) {
           if (rtn_t == NULL) {
             rtn_t = if_t;
@@ -677,6 +674,59 @@
 }
 
 
+//------------------------------filtered_type_at_if--------------------------------
+// Return a possibly more restrictive type for val based on condition control flow for an if
+const TypeInt* PhaseIdealLoop::filtered_type_at_if( Node* val, Node *if_proj) {
+  assert(if_proj &&
+         (if_proj->Opcode() == Op_IfTrue || if_proj->Opcode() == Op_IfFalse), "expecting an if projection");
+  if (if_proj->in(0) && if_proj->in(0)->is_If()) {
+    IfNode* iff = if_proj->in(0)->as_If();
+    if (iff->in(1) && iff->in(1)->is_Bool()) {
+      BoolNode* bol = iff->in(1)->as_Bool();
+      if (bol->in(1) && bol->in(1)->is_Cmp()) {
+        const CmpNode* cmp  = bol->in(1)->as_Cmp();
+        if (cmp->in(1) == val) {
+          const TypeInt* cmp2_t = _igvn.type(cmp->in(2))->isa_int();
+          if (cmp2_t != NULL) {
+            jint lo = cmp2_t->_lo;
+            jint hi = cmp2_t->_hi;
+            BoolTest::mask msk = if_proj->Opcode() == Op_IfTrue ? bol->_test._test : bol->_test.negate();
+            switch (msk) {
+            case BoolTest::ne:
+              // Can't refine type
+              return NULL;
+            case BoolTest::eq:
+              return cmp2_t;
+            case BoolTest::lt:
+              lo = TypeInt::INT->_lo;
+              if (hi - 1 < hi) {
+                hi = hi - 1;
+              }
+              break;
+            case BoolTest::le:
+              lo = TypeInt::INT->_lo;
+              break;
+            case BoolTest::gt:
+              if (lo + 1 > lo) {
+                lo = lo + 1;
+              }
+              hi = TypeInt::INT->_hi;
+              break;
+            case BoolTest::ge:
+              // lo unchanged
+              hi = TypeInt::INT->_hi;
+              break;
+            }
+            const TypeInt* rtn_t = TypeInt::make(lo, hi, cmp2_t->_widen);
+            return rtn_t;
+          }
+        }
+      }
+    }
+  }
+  return NULL;
+}
+
 //------------------------------dump_spec--------------------------------------
 // Dump special per-node info
 #ifndef PRODUCT
@@ -2834,4 +2884,3 @@
     }
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/loopnode.hpp openjdk/hotspot/src/share/vm/opto/loopnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/loopnode.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/loopnode.hpp	2008-12-05 16:41:22.117637304 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)loopnode.hpp	1.146 07/10/23 13:12:55 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -853,6 +850,7 @@
   const TypeInt* filtered_type( Node *n ) { return filtered_type(n, NULL); }
  // Helpers for filtered type
   const TypeInt* filtered_type_from_dominators( Node* val, Node *val_ctrl);
+  const TypeInt* filtered_type_at_if( Node* val, Node *if_proj);
 
   // Helper functions
   void register_new_node( Node *n, Node *blk );
@@ -919,4 +917,3 @@
 
   IdealLoopTree* current() { return _curnt; }  // Return current value of iterator.
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/loopopts.cpp openjdk/hotspot/src/share/vm/opto/loopopts.cpp
--- openjdk6/hotspot/src/share/vm/opto/loopopts.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/loopopts.cpp	2008-12-05 16:41:22.117637304 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)loopopts.cpp	1.222 08/11/24 12:23:09 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -32,11 +29,6 @@
 //------------------------------split_thru_phi---------------------------------
 // Split Node 'n' through merge point if there is enough win.
 Node *PhaseIdealLoop::split_thru_phi( Node *n, Node *region, int policy ) {
-  if (n->Opcode() == Op_ConvI2L && n->bottom_type() != TypeLong::BOTTOM) {
-    // ConvI2L may have type information on it which is unsafe to push up
-    // so disable this for now
-    return NULL;
-  }
   int wins = 0;
   assert( !n->is_CFG(), "" );
   assert( region->is_Region(), "" );
@@ -2683,4 +2675,3 @@
   }
 
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/machnode.cpp openjdk/hotspot/src/share/vm/opto/machnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/machnode.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/machnode.cpp	2008-12-05 16:41:22.117637304 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)machnode.cpp	1.200 07/09/28 10:23:08 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/machnode.hpp openjdk/hotspot/src/share/vm/opto/machnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/machnode.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/machnode.hpp	2008-12-05 16:41:22.117637304 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)machnode.hpp	1.204 07/09/28 10:23:08 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/macro.cpp openjdk/hotspot/src/share/vm/opto/macro.cpp
--- openjdk6/hotspot/src/share/vm/opto/macro.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/macro.cpp	2008-12-05 16:41:22.117637304 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)macro.cpp	1.33 07/10/04 14:36:00 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -996,4 +993,3 @@
   _igvn.optimize();
   return false;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/macro.hpp openjdk/hotspot/src/share/vm/opto/macro.hpp
--- openjdk6/hotspot/src/share/vm/opto/macro.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/macro.hpp	2008-12-05 16:41:22.117637304 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)macro.hpp	1.11 07/07/19 19:08:26 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/matcher.cpp openjdk/hotspot/src/share/vm/opto/matcher.cpp
--- openjdk6/hotspot/src/share/vm/opto/matcher.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/matcher.cpp	2008-12-05 16:41:22.117637304 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)matcher.cpp	1.388 07/09/28 10:33:13 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -2124,4 +2121,3 @@
       _kids[i]->dump(depth+1);
 }
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/matcher.hpp openjdk/hotspot/src/share/vm/opto/matcher.hpp
--- openjdk6/hotspot/src/share/vm/opto/matcher.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/matcher.hpp	2008-12-05 16:41:22.117637304 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)matcher.hpp	1.188 07/07/19 19:08:27 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/memnode.cpp openjdk/hotspot/src/share/vm/opto/memnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/memnode.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/memnode.cpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,8 +1,5 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)memnode.cpp	1.239 08/11/24 12:23:43 JVM"
-#endif
 /*
- * Copyright 1997-2008 Sun Microsystems, Inc.  All Rights Reserved.
+ * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  *
  * This code is free software; you can redistribute it and/or modify it
@@ -637,46 +634,6 @@
 Node* MemNode::can_see_stored_value(Node* st, PhaseTransform* phase) const {
   Node* ld_adr = in(MemNode::Address);
 
-  const TypeInstPtr* tp = phase->type(ld_adr)->isa_instptr();
-  Compile::AliasType* atp = tp != NULL ? phase->C->alias_type(tp) : NULL;
-  if (EliminateAutoBox && atp != NULL && atp->index() >= Compile::AliasIdxRaw &&
-      atp->field() != NULL && !atp->field()->is_volatile()) {
-    uint alias_idx = atp->index();
-    bool final = atp->field()->is_final();
-    Node* result = NULL;
-    Node* current = st;
-    // Skip through chains of MemBarNodes checking the MergeMems for
-    // new states for the slice of this load.  Stop once any other
-    // kind of node is encountered.  Loads from final memory can skip
-    // through any kind of MemBar but normal loads shouldn't skip
-    // through MemBarAcquire since the could allow them to move out of
-    // a synchronized region.
-    while (current->is_Proj()) {
-      int opc = current->in(0)->Opcode();
-      if ((final && opc == Op_MemBarAcquire) ||
-          opc == Op_MemBarRelease || opc == Op_MemBarCPUOrder) {
-        Node* mem = current->in(0)->in(TypeFunc::Memory);
-        if (mem->is_MergeMem()) {
-          MergeMemNode* merge = mem->as_MergeMem();
-          Node* new_st = merge->memory_at(alias_idx);
-          if (new_st == merge->base_memory()) {
-            // Keep searching
-            current = merge->base_memory();
-            continue;
-          }
-          // Save the new memory state for the slice and fall through
-          // to exit.
-          result = new_st;
-        }
-      }
-      break;
-    }
-    if (result != NULL) {
-      st = result;
-    }
-  }
-
-
   // Loop around twice in the case Load -> Initialize -> Store.
   // (See PhaseIterGVN::add_users_to_worklist, which knows about this case.)
   for (int trip = 0; trip <= 1; trip++) {
@@ -766,168 +723,6 @@
   return this;
 }
 
-
-// Returns true if the AliasType refers to the field that holds the
-// cached box array.  Currently only handles the IntegerCache case.
-static bool is_autobox_cache(Compile::AliasType* atp) {
-  if (atp != NULL && atp->field() != NULL) {
-    ciField* field = atp->field();
-    ciSymbol* klass = field->holder()->name();
-    if (field->name() == ciSymbol::cache_field_name() &&
-        field->holder()->uses_default_loader() &&
-        klass == ciSymbol::java_lang_Integer_IntegerCache()) {
-      return true;
-    }
-  }
-  return false;
-}
-
-// Fetch the base value in the autobox array
-static bool fetch_autobox_base(Compile::AliasType* atp, int& cache_offset) {
-  if (atp != NULL && atp->field() != NULL) {
-    ciField* field = atp->field();
-    ciSymbol* klass = field->holder()->name();
-    if (field->name() == ciSymbol::cache_field_name() &&
-        field->holder()->uses_default_loader() &&
-        klass == ciSymbol::java_lang_Integer_IntegerCache()) {
-      assert(field->is_constant(), "what?");
-      ciObjArray* array = field->constant_value().as_object()->as_obj_array();
-      // Fetch the box object at the base of the array and get its value
-      ciInstance* box = array->obj_at(0)->as_instance();
-      ciInstanceKlass* ik = box->klass()->as_instance_klass();
-      if (ik->nof_nonstatic_fields() == 1) {
-        // This should be true nonstatic_field_at requires calling
-        // nof_nonstatic_fields so check it anyway
-        ciConstant c = box->field_value(ik->nonstatic_field_at(0));
-        cache_offset = c.as_int();
-      }
-      return true;
-    }
-  }
-  return false;
-}
-
-// Returns true if the AliasType refers to the value field of an
-// autobox object.  Currently only handles Integer.
-static bool is_autobox_object(Compile::AliasType* atp) {
-  if (atp != NULL && atp->field() != NULL) {
-    ciField* field = atp->field();
-    ciSymbol* klass = field->holder()->name();
-    if (field->name() == ciSymbol::value_name() &&
-        field->holder()->uses_default_loader() &&
-        klass == ciSymbol::java_lang_Integer()) {
-      return true;
-    }
-  }
-  return false;
-}
-
-
-// We're loading from an object which has autobox behaviour.
-// If this object is result of a valueOf call we'll have a phi
-// merging a newly allocated object and a load from the cache.
-// We want to replace this load with the original incoming
-// argument to the valueOf call.
-Node* LoadNode::eliminate_autobox(PhaseGVN* phase) {
-  Node* base = in(Address)->in(AddPNode::Base);
-  if (base->is_Phi() && base->req() == 3) {
-    AllocateNode* allocation = NULL;
-    int allocation_index = -1;
-    int load_index = -1;
-    for (uint i = 1; i < base->req(); i++) {
-      allocation = AllocateNode::Ideal_allocation(base->in(i), phase);
-      if (allocation != NULL) {
-        allocation_index = i;
-        load_index = 3 - allocation_index;
-        break;
-      }
-    }
-    LoadNode* load = NULL;
-    if (allocation != NULL && base->in(load_index)->is_Load()) {
-      load = base->in(load_index)->as_Load();
-    }
-    if (load != NULL && in(Memory)->is_Phi() && in(Memory)->in(0) == base->in(0)) {
-      // Push the loads from the phi that comes from valueOf up
-      // through it to allow elimination of the loads and the recovery
-      // of the original value.
-      Node* mem_phi = in(Memory);
-      Node* offset = in(Address)->in(AddPNode::Offset);
-
-      Node* in1 = clone();
-      Node* in1_addr = in1->in(Address)->clone();
-      in1_addr->set_req(AddPNode::Base, base->in(allocation_index));
-      in1_addr->set_req(AddPNode::Address, base->in(allocation_index));
-      in1_addr->set_req(AddPNode::Offset, offset);
-      in1->set_req(0, base->in(allocation_index));
-      in1->set_req(Address, in1_addr);
-      in1->set_req(Memory, mem_phi->in(allocation_index));
-
-      Node* in2 = clone();
-      Node* in2_addr = in2->in(Address)->clone();
-      in2_addr->set_req(AddPNode::Base, base->in(load_index));
-      in2_addr->set_req(AddPNode::Address, base->in(load_index));
-      in2_addr->set_req(AddPNode::Offset, offset);
-      in2->set_req(0, base->in(load_index));
-      in2->set_req(Address, in2_addr);
-      in2->set_req(Memory, mem_phi->in(load_index));
-
-      in1_addr = phase->transform(in1_addr);
-      in1 =      phase->transform(in1);
-      in2_addr = phase->transform(in2_addr);
-      in2 =      phase->transform(in2);
-
-      PhiNode* result = PhiNode::make_blank(base->in(0), this);
-      result->set_req(allocation_index, in1);
-      result->set_req(load_index, in2);
-      return result;
-    }
-  } else if (base->is_Load()) {
-    // Eliminate the load of Integer.value for integers from the cache
-    // array by deriving the value from the index into the array.
-    // Capture the offset of the load and then reverse the computation.
-    Node* load_base = base->in(Address)->in(AddPNode::Base);
-    if (load_base != NULL) {
-      Compile::AliasType* atp = phase->C->alias_type(load_base->adr_type());
-      intptr_t cache_offset;
-      int shift = -1;
-      Node* cache = NULL;
-      if (is_autobox_cache(atp)) {
-        shift  = exact_log2(type2aelembytes[T_OBJECT]);
-        cache = AddPNode::Ideal_base_and_offset(load_base->in(Address), phase, cache_offset);
-      }
-      if (cache != NULL && base->in(Address)->is_AddP()) {
-        Node* elements[4];
-        int count = base->in(Address)->as_AddP()->unpack_offsets(elements, ARRAY_SIZE(elements));
-        int cache_low;
-        if (count > 0 && fetch_autobox_base(atp, cache_low)) {
-          int offset = arrayOopDesc::base_offset_in_bytes(memory_type()) - (cache_low << shift);
-          // Add up all the offsets making of the address of the load
-          Node* result = elements[0];
-          for (int i = 1; i < count; i++) {
-            result = phase->transform(new (phase->C, 3) AddXNode(result, elements[i]));
-          }
-          // Remove the constant offset from the address and then
-          // remove the scaling of the offset to recover the original index.
-          result = phase->transform(new (phase->C, 3) AddXNode(result, phase->MakeConX(-offset)));
-          if (result->Opcode() == Op_LShiftX && result->in(2) == phase->intcon(shift)) {
-            // Peel the shift off directly but wrap it in a dummy node
-            // since Ideal can't return existing nodes
-            result = new (phase->C, 3) RShiftXNode(result->in(1), phase->intcon(0));
-          } else {
-            result = new (phase->C, 3) RShiftXNode(result, phase->intcon(shift));
-          }
-#ifdef _LP64
-          result = new (phase->C, 2) ConvL2INode(phase->transform(result));
-#endif                
-          return result;
-        }
-      }
-    }
-  }
-  return NULL;
-}
-
-
 //------------------------------Ideal------------------------------------------
 // If the load is from Field memory and the pointer is non-null, we can
 // zero out the control input.
@@ -960,17 +755,6 @@
     }
   }
 
-  if (EliminateAutoBox && can_reshape && in(Address)->is_AddP()) {
-    Node* base = in(Address)->in(AddPNode::Base);
-    if (base != NULL) {
-      Compile::AliasType* atp = phase->C->alias_type(adr_type());
-      if (is_autobox_object(atp)) {
-        Node* result = eliminate_autobox(phase);
-        if (result != NULL) return result;
-      }
-    }
-  }
-
   // Check for prior store with a different base or offset; make Load
   // independent.  Skip through any number of them.  Bail out if the stores
   // are in an endless dead cycle and report no progress.  This is a key
@@ -1074,17 +858,6 @@
           // This can happen if a interface-typed array narrows to a class type.
           jt = _type;
         }
-        
-        if (EliminateAutoBox) {
-          // The pointers in the autobox arrays are always non-null
-          Node* base = in(Address)->in(AddPNode::Base);
-          if (base != NULL) {
-            Compile::AliasType* atp = phase->C->alias_type(base->adr_type());
-            if (is_autobox_cache(atp)) {
-              return jt->join(TypePtr::NOTNULL)->is_ptr();
-            }
-          }
-        }
         return jt;
       }
     }
@@ -1780,16 +1553,9 @@
 
 //------------------------------Value-----------------------------------------
 const Type *StoreCMNode::Value( PhaseTransform *phase ) const {
-  // Either input is TOP ==> the result is TOP
-  const Type *t = phase->type( in(MemNode::Memory) );
-  if( t == Type::TOP ) return Type::TOP;
-  t = phase->type( in(MemNode::Address) );
-  if( t == Type::TOP ) return Type::TOP;
-  t = phase->type( in(MemNode::ValueIn) );
-  if( t == Type::TOP ) return Type::TOP;
   // If extra input is TOP ==> the result is TOP
-  t = phase->type( in(MemNode::OopStore) );
-  if( t == Type::TOP ) return Type::TOP;
+  const Type *t1 = phase->type( in(MemNode::OopStore) );
+  if( t1 == Type::TOP ) return Type::TOP;
 
   return StoreNode::Value( phase );
 }
diff -ruNb openjdk6/hotspot/src/share/vm/opto/memnode.hpp openjdk/hotspot/src/share/vm/opto/memnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/memnode.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/memnode.hpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)memnode.hpp	1.121 07/10/23 13:12:55 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -144,9 +141,6 @@
   // zero out the control input.
   virtual Node *Ideal(PhaseGVN *phase, bool can_reshape);
 
-  // Recover original value from boxed values
-  Node *eliminate_autobox(PhaseGVN *phase);
-
   // Compute a new Type for this node.  Basically we just do the pre-check,
   // then call the virtual add() to set the type.
   virtual const Type *Value( PhaseTransform *phase ) const;
@@ -1066,4 +1060,3 @@
   virtual uint match_edge(uint idx) const { return idx==2; }
   virtual const Type *bottom_type() const { return Type::ABIO; }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/mulnode.cpp openjdk/hotspot/src/share/vm/opto/mulnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/mulnode.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/mulnode.cpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)mulnode.cpp	1.134 07/07/19 19:08:26 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/mulnode.hpp openjdk/hotspot/src/share/vm/opto/mulnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/mulnode.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/mulnode.hpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)mulnode.hpp	1.53 07/05/05 17:06:18 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -248,4 +245,3 @@
   const Type *bottom_type() const { return TypeLong::LONG; }
   virtual uint ideal_reg() const { return Op_RegL; }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/multnode.cpp openjdk/hotspot/src/share/vm/opto/multnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/multnode.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/multnode.cpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)multnode.cpp	1.61 07/09/28 10:23:05 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -130,5 +127,3 @@
 uint ProjNode::ideal_reg() const { 
   return Matcher::base2reg[bottom_type()->base()];
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/multnode.hpp openjdk/hotspot/src/share/vm/opto/multnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/multnode.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/multnode.hpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)multnode.hpp	1.47 07/09/28 10:23:05 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -82,4 +79,3 @@
   virtual void dump_spec(outputStream *st) const;
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/node.cpp openjdk/hotspot/src/share/vm/opto/node.cpp
--- openjdk6/hotspot/src/share/vm/opto/node.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/node.cpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)node.cpp	1.228 07/09/28 10:23:04 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1920,5 +1917,3 @@
 uint TypeNode::ideal_reg() const { 
   return Matcher::base2reg[_type->base()];
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/node.hpp openjdk/hotspot/src/share/vm/opto/node.hpp
--- openjdk6/hotspot/src/share/vm/opto/node.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/node.hpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)node.hpp	1.224 07/09/28 10:33:17 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1493,4 +1490,3 @@
   virtual void dump_spec(outputStream *st) const;
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/opcodes.cpp openjdk/hotspot/src/share/vm/opto/opcodes.cpp
--- openjdk6/hotspot/src/share/vm/opto/opcodes.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/opcodes.cpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)opcodes.cpp	1.15 07/05/05 17:06:24 JVM"
-#endif
 /*
  * Copyright 1998-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -43,4 +40,3 @@
   "_last_class_name",
 };
 #undef macro
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/opcodes.hpp openjdk/hotspot/src/share/vm/opto/opcodes.hpp
--- openjdk6/hotspot/src/share/vm/opto/opcodes.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/opcodes.hpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)opcodes.hpp	1.31 07/05/05 17:06:24 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/optoreg.hpp openjdk/hotspot/src/share/vm/opto/optoreg.hpp
--- openjdk6/hotspot/src/share/vm/opto/optoreg.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/optoreg.hpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)optoreg.hpp	1.6 07/05/05 17:06:18 JVM"
-#endif
 /*
  * Copyright 2006-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/output.cpp openjdk/hotspot/src/share/vm/opto/output.cpp
--- openjdk6/hotspot/src/share/vm/opto/output.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/output.cpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)output.cpp	1.290 07/09/20 11:01:49 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/output.hpp openjdk/hotspot/src/share/vm/opto/output.hpp
--- openjdk6/hotspot/src/share/vm/opto/output.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/output.hpp	2008-12-05 16:41:22.127637455 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)output.hpp	1.28 07/05/05 17:06:24 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -216,4 +213,3 @@
 #endif
 
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/parse.hpp openjdk/hotspot/src/share/vm/opto/parse.hpp
--- openjdk6/hotspot/src/share/vm/opto/parse.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/parse.hpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)parse.hpp	1.274 07/09/28 10:23:03 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -556,4 +553,3 @@
   void dump_bci(int bci);
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/parse1.cpp openjdk/hotspot/src/share/vm/opto/parse1.cpp
--- openjdk6/hotspot/src/share/vm/opto/parse1.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/parse1.cpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)parse1.cpp	1.493 07/05/17 15:59:31 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/parse2.cpp openjdk/hotspot/src/share/vm/opto/parse2.cpp
--- openjdk6/hotspot/src/share/vm/opto/parse2.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/parse2.cpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)parse2.cpp	1.364 08/07/16 09:47:25 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -868,8 +865,6 @@
   return prob < PROB_MIN;
 }
 
-//-------------------------------repush_if_args--------------------------------
-// Push arguments of an "if" bytecode back onto the stack by adjusting _sp.
 inline void Parse::repush_if_args() {
 #ifndef PRODUCT
   if (PrintOpto && WizardMode) {
@@ -890,9 +885,6 @@
 void Parse::do_ifnull(BoolTest::mask btest) {
   int target_bci = iter().get_dest();
 
-  Block* branch_block = successor_for_bci(target_bci);
-  Block* next_block   = successor_for_bci(iter().next_bci());
-
   float cnt;
   float prob = branch_prediction(cnt, btest, target_bci);
   if (prob == PROB_UNKNOWN) {
@@ -901,6 +893,7 @@
     if (PrintOpto && Verbose)
       tty->print_cr("Never-taken backedge stops compilation at bci %d",bci());
 #endif
+    repush_if_args(); // to gather stats on loop
     // We need to mark this branch as taken so that if we recompile we will
     // see that it is possible. In the tiered system the interpreter doesn't
     // do profiling and by the time we get to the lower tier from the interpreter
@@ -909,16 +902,13 @@
     uncommon_trap(Deoptimization::Reason_unreached,
                   Deoptimization::Action_reinterpret,
                   NULL, "cold");
-    if (EliminateAutoBox) {
-      // Mark the successor blocks as parsed
-      branch_block->next_path_num();
-      next_block->next_path_num();
-    }
     return;
   }
 
   // If this is a backwards branch in the bytecodes, add Safepoint
   maybe_add_safepoint(target_bci);
+  Block* branch_block = successor_for_bci(target_bci);
+  Block* next_block   = successor_for_bci(iter().next_bci());
 
   explicit_null_checks_inserted++;
   Node* a = null();
@@ -945,10 +935,6 @@
 
     if (stopped()) {            // Path is dead?
       explicit_null_checks_elided++;
-      if (EliminateAutoBox) {
-        // Mark the successor block as parsed
-        branch_block->next_path_num();
-      }
     } else {                    // Path is live.
       // Update method data
       profile_taken_branch(target_bci);
@@ -964,10 +950,6 @@
   
   if (stopped()) {              // Path is dead?
     explicit_null_checks_elided++;
-    if (EliminateAutoBox) {
-      // Mark the successor block as parsed
-      next_block->next_path_num();
-    }
   } else  {                     // Path is live.
     // Update method data
     profile_not_taken_branch();
@@ -980,9 +962,6 @@
 void Parse::do_if(BoolTest::mask btest, Node* c) {
   int target_bci = iter().get_dest();
 
-  Block* branch_block = successor_for_bci(target_bci);
-  Block* next_block   = successor_for_bci(iter().next_bci());
-
   float cnt;
   float prob = branch_prediction(cnt, btest, target_bci);
   float untaken_prob = 1.0 - prob;
@@ -1001,11 +980,6 @@
     uncommon_trap(Deoptimization::Reason_unreached,
                   Deoptimization::Action_reinterpret,
                   NULL, "cold");
-    if (EliminateAutoBox) {
-      // Mark the successor blocks as parsed
-      branch_block->next_path_num();
-      next_block->next_path_num();
-    }
     return;
   }
 
@@ -1044,17 +1018,15 @@
     untaken_branch = tmp;
   }
 
+  Block* branch_block = successor_for_bci(target_bci);
+  Block* next_block   = successor_for_bci(iter().next_bci());
+
   // Branch is taken:
   { PreserveJVMState pjvms(this);
     taken_branch = _gvn.transform(taken_branch);
     set_control(taken_branch);
 
-    if (stopped()) {
-      if (EliminateAutoBox) {
-        // Mark the successor block as parsed
-        branch_block->next_path_num();
-      }
-    } else {
+    if (!stopped()) {
       // Update method data
       profile_taken_branch(target_bci);
       adjust_map_after_if(taken_btest, c, prob, branch_block, next_block);
@@ -1067,12 +1039,7 @@
   set_control(untaken_branch);
 
   // Branch not taken.
-  if (stopped()) {
-    if (EliminateAutoBox) {
-      // Mark the successor block as parsed
-      next_block->next_path_num();
-    }
-  } else {
+  if (!stopped()) {
     // Update method data
     profile_not_taken_branch();
     adjust_map_after_if(untaken_btest, c, untaken_prob,
diff -ruNb openjdk6/hotspot/src/share/vm/opto/parse3.cpp openjdk/hotspot/src/share/vm/opto/parse3.cpp
--- openjdk6/hotspot/src/share/vm/opto/parse3.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/parse3.cpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)parse3.cpp	1.269 08/11/24 12:24:07 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/parseHelper.cpp openjdk/hotspot/src/share/vm/opto/parseHelper.cpp
--- openjdk6/hotspot/src/share/vm/opto/parseHelper.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/parseHelper.cpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)parseHelper.cpp	1.197 07/08/14 16:13:24 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -521,5 +518,3 @@
     increment_md_counter_at(md, data, MultiBranchData::default_count_offset());
   }
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/phase.cpp openjdk/hotspot/src/share/vm/opto/phase.cpp
--- openjdk6/hotspot/src/share/vm/opto/phase.cpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/phase.cpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)phase.cpp	1.59 07/05/17 16:00:26 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/phase.hpp openjdk/hotspot/src/share/vm/opto/phase.hpp
--- openjdk6/hotspot/src/share/vm/opto/phase.hpp	2008-11-25 10:12:10.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/phase.hpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)phase.hpp	1.53 07/05/17 16:00:29 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -114,4 +111,3 @@
   static void print_timers();
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/phaseX.cpp openjdk/hotspot/src/share/vm/opto/phaseX.cpp
--- openjdk6/hotspot/src/share/vm/opto/phaseX.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/phaseX.cpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)phaseX.cpp	1.262 07/07/19 19:08:26 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/phaseX.hpp openjdk/hotspot/src/share/vm/opto/phaseX.hpp
--- openjdk6/hotspot/src/share/vm/opto/phaseX.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/phaseX.hpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)phaseX.hpp	1.119 07/05/05 17:06:26 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -517,4 +514,3 @@
   static void print_statistics();
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/postaloc.cpp openjdk/hotspot/src/share/vm/opto/postaloc.cpp
--- openjdk6/hotspot/src/share/vm/opto/postaloc.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/postaloc.cpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)postaloc.cpp	1.84 08/03/26 10:13:00 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -256,8 +253,7 @@
 // nodes can represent the same constant so the type and rule of the
 // MachNode must be checked to ensure equivalence.
 //
-bool PhaseChaitin::eliminate_copy_of_constant(Node* val, Node* n,
-                                              Block *current_block,
+bool PhaseChaitin::eliminate_copy_of_constant(Node* val, Block *current_block,
                                               Node_List& value, Node_List& regnd,
                                               OptoReg::Name nreg, OptoReg::Name nreg2) {
   if (value[nreg] != val && val->is_Con() &&
@@ -273,12 +269,12 @@
     // Since they are equivalent the second one if redundant and can
     // be removed.
     //
-    // n will be replaced with the old value but n might have
+    // val will be replaced with the old value but val might have
     // kills projections associated with it so remove them now so that
     // yank_if_dead will be able to elminate the copy once the uses
     // have been transferred to the old[value].
-    for (DUIterator_Fast imax, i = n->fast_outs(imax); i < imax; i++) {
-      Node* use = n->fast_out(i);
+    for (DUIterator_Fast imax, i = val->fast_outs(imax); i < imax; i++) {
+      Node* use = val->fast_out(i);
       if (use->is_Proj() && use->outcnt() == 0) {
         // Kill projections have no users and one input
         use->set_req(0, C->top());
@@ -525,7 +521,7 @@
         // then 'n' is a useless copy.  Do not update the register->node
         // mapping so 'n' will go dead.
         if( value[nreg] != val ) {
-          if (eliminate_copy_of_constant(val, n, b, value, regnd, nreg, OptoReg::Bad)) {
+          if (eliminate_copy_of_constant(val, b, value, regnd, nreg, OptoReg::Bad)) {
             n->replace_by(regnd[nreg]);
             j -= yank_if_dead(n,b,&value,&regnd);
           } else {
@@ -553,7 +549,7 @@
           nreg_lo = tmp.find_first_elem();
         }
         if( value[nreg] != val || value[nreg_lo] != val ) {
-          if (eliminate_copy_of_constant(val, n, b, value, regnd, nreg, nreg_lo)) {
+          if (eliminate_copy_of_constant(n, b, value, regnd, nreg, nreg_lo)) {
             n->replace_by(regnd[nreg]);
             j -= yank_if_dead(n,b,&value,&regnd);
           } else {
@@ -586,5 +582,3 @@
 
   } // End for all blocks
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/reg_split.cpp openjdk/hotspot/src/share/vm/opto/reg_split.cpp
--- openjdk6/hotspot/src/share/vm/opto/reg_split.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/reg_split.cpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)reg_split.cpp	1.81 07/05/05 17:06:27 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -287,7 +284,7 @@
       // Check for single-def (LRG cannot redefined)
       uint lidx = n2lidx(in);
       if( lidx >= _maxlrg ) continue; // Value is a recent spill-copy
-      if (lrgs(lidx).is_singledef()) continue;
+      if( lrgs(lidx)._def != NodeSentinel ) continue;
 
       Block *b_def = _cfg._bbs[def->_idx];
       int idx_def = b_def->find_node(def);
@@ -314,20 +311,12 @@
       uint lidx = Find_id(in);
 
       // Walk backwards thru spill copy node intermediates
-      if (walkThru) {
+      if( walkThru )
         while ( in->is_SpillCopy() && lidx >= _maxlrg ) {
           in = in->in(1);
           lidx = Find_id(in);
         }
 
-        if (lidx < _maxlrg && lrgs(lidx).is_multidef()) {
-          // walkThru found a multidef LRG, which is unsafe to use, so
-          // just keep the original def used in the clone.
-          in = spill->in(i);
-          lidx = Find_id(in);
-        }
-      }
-
       if( lidx < _maxlrg && lrgs(lidx).reg() >= LRG::SPILL_REG ) {
         Node *rdef = Reachblock[lrg2reach[lidx]];
         if( rdef ) spill->set_req(i,rdef);
@@ -516,7 +505,7 @@
       // Do not bother splitting or putting in Phis for single-def
       // rematerialized live ranges.  This happens alot to constants
       // with long live ranges.
-      if( lrgs(lidx).is_singledef() &&
+      if( lrgs(lidx)._def != NodeSentinel &&
           lrgs(lidx)._def->rematerialize() ) {
         // reset the Reaches & UP entries
         Reachblock[slidx] = lrgs(lidx)._def;
diff -ruNb openjdk6/hotspot/src/share/vm/opto/regalloc.cpp openjdk/hotspot/src/share/vm/opto/regalloc.cpp
--- openjdk6/hotspot/src/share/vm/opto/regalloc.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/regalloc.cpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)regalloc.cpp	1.28 07/05/05 17:06:27 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -128,4 +125,3 @@
   }
 }
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/regalloc.hpp openjdk/hotspot/src/share/vm/opto/regalloc.hpp
--- openjdk6/hotspot/src/share/vm/opto/regalloc.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/regalloc.hpp	2008-12-05 16:41:22.137637606 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)regalloc.hpp	1.23 07/05/05 17:06:28 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/regmask.cpp openjdk/hotspot/src/share/vm/opto/regmask.cpp
--- openjdk6/hotspot/src/share/vm/opto/regmask.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/regmask.cpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)regmask.cpp	1.62 07/05/05 17:06:25 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -289,5 +286,3 @@
   tty->print("]");
 }
 #endif
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/regmask.hpp openjdk/hotspot/src/share/vm/opto/regmask.hpp
--- openjdk6/hotspot/src/share/vm/opto/regmask.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/regmask.hpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)regmask.hpp	1.65 07/05/05 17:06:26 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/rootnode.cpp openjdk/hotspot/src/share/vm/opto/rootnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/rootnode.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/rootnode.cpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)rootnode.cpp	1.77 07/05/05 17:06:28 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -82,5 +79,3 @@
 const RegMask &HaltNode::out_RegMask() const { 
   return RegMask::Empty;
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/rootnode.hpp openjdk/hotspot/src/share/vm/opto/rootnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/rootnode.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/rootnode.hpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)rootnode.hpp	1.48 07/05/05 17:06:28 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -63,4 +60,3 @@
   virtual uint ideal_reg() const { return NotAMachineReg; }
   virtual uint match_edge(uint idx) const { return 0; }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/runtime.cpp openjdk/hotspot/src/share/vm/opto/runtime.cpp
--- openjdk6/hotspot/src/share/vm/opto/runtime.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/runtime.cpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)runtime.cpp	1.460 07/09/20 10:43:58 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/runtime.hpp openjdk/hotspot/src/share/vm/opto/runtime.hpp
--- openjdk6/hotspot/src/share/vm/opto/runtime.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/runtime.hpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)runtime.hpp	1.201 07/09/20 10:43:58 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/split_if.cpp openjdk/hotspot/src/share/vm/opto/split_if.cpp
--- openjdk6/hotspot/src/share/vm/opto/split_if.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/split_if.cpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)split_if.cpp	1.68 07/05/05 17:06:29 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -537,4 +534,3 @@
   if( VerifyLoopOptimizations ) verify();
 #endif
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/subnode.cpp openjdk/hotspot/src/share/vm/opto/subnode.cpp
--- openjdk6/hotspot/src/share/vm/opto/subnode.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/subnode.cpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)subnode.cpp	1.162 07/09/28 10:33:21 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1207,4 +1204,3 @@
   if( d2 < 0.0 ) return Type::DOUBLE;
   return TypeD::make( SharedRuntime::dpow( d1, d2 ) );
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/subnode.hpp openjdk/hotspot/src/share/vm/opto/subnode.hpp
--- openjdk6/hotspot/src/share/vm/opto/subnode.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/subnode.hpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)subnode.hpp	1.86 07/09/28 10:23:02 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/superword.cpp openjdk/hotspot/src/share/vm/opto/superword.cpp
--- openjdk6/hotspot/src/share/vm/opto/superword.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/superword.cpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)superword.cpp	1.8 08/03/26 10:13:00 JVM"
-#endif
 /*
  * Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -185,8 +182,8 @@
 
 #ifndef PRODUCT
   if (TraceSuperWord)
-    tty->print_cr("\noffset = %d iv_adjustment = %d  elt_align = %d scale = %d iv_stride = %d",
-                  offset, iv_adjustment, align_to_ref_p.memory_size(), align_to_ref_p.scale_in_bytes(), iv_stride());
+    tty->print_cr("\noffset = %d iv_adjustment = %d  elt_align = %d",
+                  offset, iv_adjustment, align_to_ref_p.memory_size());
 #endif
 
   // Set alignment relative to "align_to_ref"
@@ -1545,7 +1542,7 @@
   Node *pre_opaq1 = pre_end->limit();
   assert(pre_opaq1->Opcode() == Op_Opaque1, "");
   Opaque1Node *pre_opaq = (Opaque1Node*)pre_opaq1;
-  Node *lim0 = pre_opaq->in(1);
+  Node *pre_limit = pre_opaq->in(1);
 
   // Where we put new limit calculations
   Node *pre_ctrl = pre_end->loopnode()->in(LoopNode::EntryControl);
@@ -1557,116 +1554,64 @@
 
   SWPointer align_to_ref_p(align_to_ref, this);
 
-  // Given:
-  //     lim0 == original pre loop limit
-  //     V == v_align (power of 2)
-  //     invar == extra invariant piece of the address expression
-  //     e == k [ +/- invar ]
-  //
-  // When reassociating expressions involving '%' the basic rules are:
-  //     (a - b) % k == 0   =>  a % k == b % k
-  // and:
-  //     (a + b) % k == 0   =>  a % k == (k - b) % k
-  //
-  // For stride > 0 && scale > 0,
-  //   Derive the new pre-loop limit "lim" such that the two constraints:
-  //     (1) lim = lim0 + N           (where N is some positive integer < V)
-  //     (2) (e + lim) % V == 0
-  //   are true.
-  //
-  //   Substituting (1) into (2),
-  //     (e + lim0 + N) % V == 0
-  //   solve for N:
-  //     N = (V - (e + lim0)) % V
-  //   substitute back into (1), so that new limit
-  //     lim = lim0 + (V - (e + lim0)) % V
+  // Let l0 == original pre_limit, l == new pre_limit, V == v_align
   //
-  // For stride > 0 && scale < 0
-  //   Constraints:
-  //     lim = lim0 + N
-  //     (e - lim) % V == 0
-  //   Solving for lim:
-  //     (e - lim0 - N) % V == 0
-  //     N = (e - lim0) % V
-  //     lim = lim0 + (e - lim0) % V
-  //
-  // For stride < 0 && scale > 0
-  //   Constraints:
-  //     lim = lim0 - N
-  //     (e + lim) % V == 0
-  //   Solving for lim:
-  //     (e + lim0 - N) % V == 0
-  //     N = (e + lim0) % V
-  //     lim = lim0 - (e + lim0) % V
-  //
-  // For stride < 0 && scale < 0
-  //   Constraints:
-  //     lim = lim0 - N
-  //     (e - lim) % V == 0
-  //   Solving for lim:
-  //     (e - lim0 + N) % V == 0
-  //     N = [V - (e - lim0) % V] % V
-  //     lim = lim0 - (V - (e - lim0)) % V
+  // For stride > 0
+  //   Need l such that l > l0 && (l+k)%V == 0
+  //   Find n such that l = (l0 + n)
+  //   (l0 + n + k) % V == 0
+  //   n = [V - (l0 + k)%V]%V
+  //   new limit = l0 + [V - (l0 + k)%V]%V
+  // For stride < 0
+  //   Need l such that l < l0 && (l+k)%V == 0
+  //   Find n such that l = (l0 - n)
+  //   (l0 - n + k) % V == 0
+  //   n = (l0 + k)%V
+  //   new limit = l0 - (l0 + k)%V
 
-  int stride   = iv_stride();
-  int scale    = align_to_ref_p.scale_in_bytes();
   int elt_size = align_to_ref_p.memory_size();
   int v_align  = vector_width_in_bytes() / elt_size;
   int k        = align_to_ref_p.offset_in_bytes() / elt_size;
 
   Node *kn   = _igvn.intcon(k);
-
-  Node *e = kn;
+  Node *limk = new (_phase->C, 3) AddINode(pre_limit, kn);
+  _phase->_igvn.register_new_node_with_optimizer(limk);
+  _phase->set_ctrl(limk, pre_ctrl);
   if (align_to_ref_p.invar() != NULL) {
-    // incorporate any extra invariant piece producing k +/- invar >>> log2(elt)
     Node* log2_elt = _igvn.intcon(exact_log2(elt_size));
     Node* aref     = new (_phase->C, 3) URShiftINode(align_to_ref_p.invar(), log2_elt);
     _phase->_igvn.register_new_node_with_optimizer(aref);
     _phase->set_ctrl(aref, pre_ctrl);
-    if (align_to_ref_p.negate_invar()) {
-      e = new (_phase->C, 3) SubINode(e, aref);
+    if (!align_to_ref_p.negate_invar()) {
+      limk = new (_phase->C, 3) AddINode(limk, aref);
     } else {
-      e = new (_phase->C, 3) AddINode(e, aref);
+      limk = new (_phase->C, 3) SubINode(limk, aref);
     }
-    _phase->_igvn.register_new_node_with_optimizer(e);
-    _phase->set_ctrl(e, pre_ctrl);
+    _phase->_igvn.register_new_node_with_optimizer(limk);
+    _phase->set_ctrl(limk, pre_ctrl);
   }
-
-  // compute e +/- lim0
-  if (scale < 0) {
-    e = new (_phase->C, 3) SubINode(e, lim0);
-  } else {
-    e = new (_phase->C, 3) AddINode(e, lim0);
-  }
-  _phase->_igvn.register_new_node_with_optimizer(e);
-  _phase->set_ctrl(e, pre_ctrl);
-
-  if (stride * scale > 0) {
-    // compute V - (e +/- lim0)
-    Node* va  = _igvn.intcon(v_align);
-    e = new (_phase->C, 3) SubINode(va, e);
-    _phase->_igvn.register_new_node_with_optimizer(e);
-    _phase->set_ctrl(e, pre_ctrl);
-  }
-  // compute N = (exp) % V
   Node* va_msk = _igvn.intcon(v_align - 1);
-  Node* N = new (_phase->C, 3) AndINode(e, va_msk);
-  _phase->_igvn.register_new_node_with_optimizer(N);
-  _phase->set_ctrl(N, pre_ctrl);
-
-  //   substitute back into (1), so that new limit
-  //     lim = lim0 + N
-  Node* lim;
-  if (stride < 0) {
-    lim = new (_phase->C, 3) SubINode(lim0, N);
+  Node* n      = new (_phase->C, 3) AndINode(limk, va_msk);
+  _phase->_igvn.register_new_node_with_optimizer(n);
+  _phase->set_ctrl(n, pre_ctrl);
+  Node* newlim;
+  if (iv_stride() > 0) {
+    Node* va  = _igvn.intcon(v_align);
+    Node* adj = new (_phase->C, 3) SubINode(va, n);
+    _phase->_igvn.register_new_node_with_optimizer(adj);
+    _phase->set_ctrl(adj, pre_ctrl);
+    Node* adj2 = new (_phase->C, 3) AndINode(adj, va_msk);
+    _phase->_igvn.register_new_node_with_optimizer(adj2);
+    _phase->set_ctrl(adj2, pre_ctrl);
+    newlim = new (_phase->C, 3) AddINode(pre_limit, adj2);
   } else {
-    lim = new (_phase->C, 3) AddINode(lim0, N);
+    newlim = new (_phase->C, 3) SubINode(pre_limit, n);
   }
-  _phase->_igvn.register_new_node_with_optimizer(lim);
-  _phase->set_ctrl(lim, pre_ctrl);
+  _phase->_igvn.register_new_node_with_optimizer(newlim);
+  _phase->set_ctrl(newlim, pre_ctrl);
   Node* constrained =
-    (stride > 0) ? (Node*) new (_phase->C,3) MinINode(lim, orig_limit)
-                 : (Node*) new (_phase->C,3) MaxINode(lim, orig_limit);
+    (iv_stride() > 0) ? (Node*) new (_phase->C,3) MinINode(newlim, orig_limit)
+                      : (Node*) new (_phase->C,3) MaxINode(newlim, orig_limit);
   _phase->_igvn.register_new_node_with_optimizer(constrained);
   _phase->set_ctrl(constrained, pre_ctrl);
   _igvn.hash_delete(pre_opaq);
diff -ruNb openjdk6/hotspot/src/share/vm/opto/superword.hpp openjdk/hotspot/src/share/vm/opto/superword.hpp
--- openjdk6/hotspot/src/share/vm/opto/superword.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/superword.hpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)superword.hpp	1.7 07/08/03 14:17:20 JVM"
-#endif
 /*
  * Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/type.cpp openjdk/hotspot/src/share/vm/opto/type.cpp
--- openjdk6/hotspot/src/share/vm/opto/type.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/type.cpp	2008-12-05 16:41:22.147637756 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)type.cpp	1.257 07/10/04 14:36:00 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -3752,4 +3749,3 @@
   }
   return range()->field_at(TypeFunc::Parms)->basic_type();
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/type.hpp openjdk/hotspot/src/share/vm/opto/type.hpp
--- openjdk6/hotspot/src/share/vm/opto/type.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/type.hpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)type.hpp	1.159 07/10/23 13:12:48 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1073,7 +1070,6 @@
 #define LShiftXNode  LShiftLNode
 // For object size computation:
 #define AddXNode     AddLNode
-#define RShiftXNode  RShiftLNode
 // For card marks and hashcodes
 #define URShiftXNode URShiftLNode
 // Opcodes
@@ -1112,7 +1108,6 @@
 #define LShiftXNode  LShiftINode
 // For object size computation:
 #define AddXNode     AddINode
-#define RShiftXNode  RShiftINode
 // For card marks and hashcodes
 #define URShiftXNode URShiftINode
 // Opcodes
@@ -1127,4 +1122,3 @@
 #define ConvX2L(x)   ConvI2L(x)
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/opto/vectornode.cpp openjdk/hotspot/src/share/vm/opto/vectornode.cpp
--- openjdk6/hotspot/src/share/vm/opto/vectornode.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/vectornode.cpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vectornode.cpp	1.5 07/05/17 16:02:33 JVM"
-#endif
 /*
  * Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/opto/vectornode.hpp openjdk/hotspot/src/share/vm/opto/vectornode.hpp
--- openjdk6/hotspot/src/share/vm/opto/vectornode.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/opto/vectornode.hpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vectornode.hpp	1.6 07/05/17 16:02:36 JVM"
-#endif
 /*
  * Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/evmCompat.cpp openjdk/hotspot/src/share/vm/prims/evmCompat.cpp
--- openjdk6/hotspot/src/share/vm/prims/evmCompat.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/evmCompat.cpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)evmCompat.cpp	1.12 07/05/05 17:06:31 JVM"
-#endif
 /*
  * Copyright 1999-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/forte.cpp openjdk/hotspot/src/share/vm/prims/forte.cpp
--- openjdk6/hotspot/src/share/vm/prims/forte.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/forte.cpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)forte.cpp	1.70 07/08/31 18:43:32 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/forte.hpp openjdk/hotspot/src/share/vm/prims/forte.hpp
--- openjdk6/hotspot/src/share/vm/prims/forte.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/forte.hpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)forte.hpp	1.8 07/06/26 10:28:19 JVM"
-#endif
 /*
  * Copyright 2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/hpi_imported.h openjdk/hotspot/src/share/vm/prims/hpi_imported.h
--- openjdk6/hotspot/src/share/vm/prims/hpi_imported.h	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/hpi_imported.h	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)hpi_imported.h	1.17 07/05/05 17:06:31 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -318,4 +315,3 @@
 #endif
 
 #endif /* !_JAVASOFT_HPI_H_ */
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jni.cpp openjdk/hotspot/src/share/vm/prims/jni.cpp
--- openjdk6/hotspot/src/share/vm/prims/jni.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jni.cpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jni.cpp	1.436 07/07/11 09:47:42 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -3583,4 +3580,3 @@
     jni_GetEnv,
     jni_AttachCurrentThreadAsDaemon
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jni.h openjdk/hotspot/src/share/vm/prims/jni.h
--- openjdk6/hotspot/src/share/vm/prims/jni.h	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jni.h	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jni.h	1.45 07/05/05 17:06:31 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1960,6 +1957,3 @@
 #endif /* __cplusplus */
 
 #endif /* !_JAVASOFT_JNI_H_ */
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jniCheck.cpp openjdk/hotspot/src/share/vm/prims/jniCheck.cpp
--- openjdk6/hotspot/src/share/vm/prims/jniCheck.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jniCheck.cpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jniCheck.cpp	1.50 07/08/31 11:20:56 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -2050,5 +2047,3 @@
 
   return &checked_jni_NativeInterface;
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jniCheck.hpp openjdk/hotspot/src/share/vm/prims/jniCheck.hpp
--- openjdk6/hotspot/src/share/vm/prims/jniCheck.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jniCheck.hpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jniCheck.hpp	1.11 07/05/05 17:06:32 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jniFastGetField.cpp openjdk/hotspot/src/share/vm/prims/jniFastGetField.cpp
--- openjdk6/hotspot/src/share/vm/prims/jniFastGetField.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jniFastGetField.cpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jniFastGetField.cpp	1.8 07/05/05 17:06:32 JVM"
-#endif
 /*
  * Copyright 2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -40,4 +37,3 @@
   }
   return (address)-1;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jniFastGetField.hpp openjdk/hotspot/src/share/vm/prims/jniFastGetField.hpp
--- openjdk6/hotspot/src/share/vm/prims/jniFastGetField.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jniFastGetField.hpp	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jniFastGetField.hpp	1.8 07/05/05 17:06:32 JVM"
-#endif
 /*
  * Copyright 2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jni_md.h openjdk/hotspot/src/share/vm/prims/jni_md.h
--- openjdk6/hotspot/src/share/vm/prims/jni_md.h	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jni_md.h	2008-12-05 16:41:22.157637907 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jni_md.h	1.25 07/05/05 17:06:34 JVM"
-#endif
 /*
  * Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvm.cpp openjdk/hotspot/src/share/vm/prims/jvm.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvm.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvm.cpp	2008-12-05 16:41:22.167638058 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvm.cpp	1.570 07/08/17 11:48:55 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -4499,4 +4496,3 @@
 #endif // KERNEL
 }
 JVM_END
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvm.h openjdk/hotspot/src/share/vm/prims/jvm.h
--- openjdk6/hotspot/src/share/vm/prims/jvm.h	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvm.h	2008-12-05 16:41:22.167638058 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvm.h	1.88 07/08/15 20:22:47 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvm_misc.hpp openjdk/hotspot/src/share/vm/prims/jvm_misc.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvm_misc.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvm_misc.hpp	2008-12-05 16:41:22.167638058 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvm_misc.hpp	1.24 07/05/05 17:06:34 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiAgentThread.hpp openjdk/hotspot/src/share/vm/prims/jvmtiAgentThread.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiAgentThread.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiAgentThread.hpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiAgentThread.hpp	1.13 07/05/05 17:06:36 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiClassFileReconstituter.cpp openjdk/hotspot/src/share/vm/prims/jvmtiClassFileReconstituter.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiClassFileReconstituter.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiClassFileReconstituter.cpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiClassFileReconstituter.cpp	1.21 07/05/05 17:06:36 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiClassFileReconstituter.hpp openjdk/hotspot/src/share/vm/prims/jvmtiClassFileReconstituter.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiClassFileReconstituter.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiClassFileReconstituter.hpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiClassFileReconstituter.hpp	1.15 07/05/05 17:06:36 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiCodeBlobEvents.cpp openjdk/hotspot/src/share/vm/prims/jvmtiCodeBlobEvents.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiCodeBlobEvents.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiCodeBlobEvents.cpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiCodeBlobEvents.cpp	1.20 07/05/05 17:06:36 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiCodeBlobEvents.hpp openjdk/hotspot/src/share/vm/prims/jvmtiCodeBlobEvents.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiCodeBlobEvents.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiCodeBlobEvents.hpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiCodeBlobEvents.hpp	1.11 07/05/05 17:06:35 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiEnter.hpp openjdk/hotspot/src/share/vm/prims/jvmtiEnter.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiEnter.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiEnter.hpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiEnter.hpp	1.8 07/05/05 17:06:35 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiEnv.cpp openjdk/hotspot/src/share/vm/prims/jvmtiEnv.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiEnv.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiEnv.cpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiEnv.cpp	1.166 07/08/15 15:11:03 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiEnvBase.cpp openjdk/hotspot/src/share/vm/prims/jvmtiEnvBase.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiEnvBase.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiEnvBase.cpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiEnvBase.cpp	1.90 07/07/16 14:37:39 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiEnvBase.hpp openjdk/hotspot/src/share/vm/prims/jvmtiEnvBase.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiEnvBase.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiEnvBase.hpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiEnvBase.hpp	1.69 07/08/11 03:57:00 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiEnvThreadState.cpp openjdk/hotspot/src/share/vm/prims/jvmtiEnvThreadState.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiEnvThreadState.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiEnvThreadState.cpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiEnvThreadState.cpp	1.23 07/05/23 10:53:46 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -314,4 +311,3 @@
     clear_current_location();
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiEnvThreadState.hpp openjdk/hotspot/src/share/vm/prims/jvmtiEnvThreadState.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiEnvThreadState.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiEnvThreadState.hpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiEnvThreadState.hpp	1.17 07/05/05 17:06:37 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -176,4 +173,3 @@
 };
 
 #endif   /* _JAVA_JVMTIENVTHREADSTATE_H_ */
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiEventController.cpp openjdk/hotspot/src/share/vm/prims/jvmtiEventController.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiEventController.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiEventController.cpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiEventController.cpp	1.57 07/08/29 13:42:27 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiEventController.hpp openjdk/hotspot/src/share/vm/prims/jvmtiEventController.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiEventController.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiEventController.hpp	2008-12-05 16:41:22.177638209 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiEventController.hpp	1.22 07/05/05 17:06:37 JVM"
-#endif
 /*
  * Copyright 2003-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiEventController.inline.hpp openjdk/hotspot/src/share/vm/prims/jvmtiEventController.inline.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiEventController.inline.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiEventController.inline.hpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiEventController.inline.hpp	1.14 07/05/05 17:06:37 JVM"
-#endif
 /*
  * Copyright 2003-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -102,4 +99,3 @@
 inline bool JvmtiEventController::is_enabled(jvmtiEvent event_type) {
   return _universal_global_event_enabled.is_enabled(event_type);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiExport.cpp openjdk/hotspot/src/share/vm/prims/jvmtiExport.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiExport.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiExport.cpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiExport.cpp	1.127 07/07/18 17:27:01 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -2495,4 +2492,3 @@
   JvmtiTagMap::gc_epilogue(_full);
 }
 #endif // JVMTI_KERNEL
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiExport.hpp openjdk/hotspot/src/share/vm/prims/jvmtiExport.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiExport.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiExport.hpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiExport.hpp	1.96 07/06/26 10:28:18 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiExtensions.cpp openjdk/hotspot/src/share/vm/prims/jvmtiExtensions.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiExtensions.cpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiExtensions.cpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiExtensions.cpp	1.11 07/05/05 17:06:38 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiExtensions.hpp openjdk/hotspot/src/share/vm/prims/jvmtiExtensions.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiExtensions.hpp	2008-11-25 10:12:11.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiExtensions.hpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiExtensions.hpp	1.8 07/05/05 17:06:38 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiGetLoadedClasses.cpp openjdk/hotspot/src/share/vm/prims/jvmtiGetLoadedClasses.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiGetLoadedClasses.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiGetLoadedClasses.cpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiGetLoadedClasses.cpp	1.13 07/05/05 17:06:38 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiGetLoadedClasses.hpp openjdk/hotspot/src/share/vm/prims/jvmtiGetLoadedClasses.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiGetLoadedClasses.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiGetLoadedClasses.hpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiGetLoadedClasses.hpp	1.8 07/05/05 17:06:38 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiImpl.cpp openjdk/hotspot/src/share/vm/prims/jvmtiImpl.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiImpl.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiImpl.cpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiImpl.cpp	1.64 07/07/16 14:37:37 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiImpl.hpp openjdk/hotspot/src/share/vm/prims/jvmtiImpl.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiImpl.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiImpl.hpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiImpl.hpp	1.103 07/07/16 14:37:36 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -478,4 +475,3 @@
 
 // Utility macro that checks for NULL pointers:
 #define NULL_CHECK(X, Y) if ((X) == NULL) { return (Y); } 
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiManageCapabilities.cpp openjdk/hotspot/src/share/vm/prims/jvmtiManageCapabilities.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiManageCapabilities.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiManageCapabilities.cpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiManageCapabilities.cpp	1.44 07/05/05 17:06:40 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -458,5 +455,3 @@
 }
 
 #endif
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiManageCapabilities.hpp openjdk/hotspot/src/share/vm/prims/jvmtiManageCapabilities.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiManageCapabilities.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiManageCapabilities.hpp	2008-12-05 16:41:22.187638360 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiManageCapabilities.hpp	1.11 07/05/05 17:06:39 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiRedefineClasses.cpp openjdk/hotspot/src/share/vm/prims/jvmtiRedefineClasses.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiRedefineClasses.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiRedefineClasses.cpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiRedefineClasses.cpp	1.79 07/07/16 14:37:37 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiRedefineClasses.hpp openjdk/hotspot/src/share/vm/prims/jvmtiRedefineClasses.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiRedefineClasses.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiRedefineClasses.hpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiRedefineClasses.hpp	1.42 08/11/24 12:24:40 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiRedefineClassesTrace.hpp openjdk/hotspot/src/share/vm/prims/jvmtiRedefineClassesTrace.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiRedefineClassesTrace.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiRedefineClassesTrace.hpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiRedefineClassesTrace.hpp	1.2 07/12/20 10:58:59 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -67,7 +64,7 @@
 //    0x01000000 |   16777216 - impl details: nmethod evolution info
 //    0x02000000 |   33554432 - impl details: annotation updates
 //    0x04000000 |   67108864 - impl details: StackMapTable updates
-//    0x08000000 |  134217728 - impl details: OopMapCache updates
+//    0x08000000 |  134217728 - unused
 //    0x10000000 |  268435456 - unused
 //    0x20000000 |  536870912 - unused
 //    0x40000000 | 1073741824 - unused
@@ -124,5 +121,3 @@
   if (RC_TRACE_ENABLED(0x00000004)) { \
     t.stop(); \
   } while (0)
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiTagMap.cpp openjdk/hotspot/src/share/vm/prims/jvmtiTagMap.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiTagMap.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiTagMap.cpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiTagMap.cpp	1.85 07/06/27 00:30:05 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiTagMap.hpp openjdk/hotspot/src/share/vm/prims/jvmtiTagMap.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiTagMap.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiTagMap.hpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiTagMap.hpp	1.25 07/05/05 17:06:40 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -136,4 +133,3 @@
 };
 
 #endif   /* _JAVA_JVMTI_TAG_MAP_H_ */
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiThreadState.cpp openjdk/hotspot/src/share/vm/prims/jvmtiThreadState.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiThreadState.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiThreadState.cpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiThreadState.cpp	1.44 07/05/05 17:06:36 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiThreadState.hpp openjdk/hotspot/src/share/vm/prims/jvmtiThreadState.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiThreadState.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiThreadState.hpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiThreadState.hpp	1.35 07/05/05 17:06:40 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiThreadState.inline.hpp openjdk/hotspot/src/share/vm/prims/jvmtiThreadState.inline.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiThreadState.inline.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiThreadState.inline.hpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiThreadState.inline.hpp	1.7 07/05/05 17:06:40 JVM"
-#endif
 /*
  * Copyright 2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -63,4 +60,3 @@
 void JvmtiThreadState::set_head_env_thread_state(JvmtiEnvThreadState* ets) {
   _head_env_thread_state = ets; 
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiTrace.cpp openjdk/hotspot/src/share/vm/prims/jvmtiTrace.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiTrace.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiTrace.cpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiTrace.cpp	1.1 07/07/16 15:03:49 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiTrace.hpp openjdk/hotspot/src/share/vm/prims/jvmtiTrace.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiTrace.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiTrace.hpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiTrace.hpp	1.1 07/07/16 15:03:49 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiUtil.cpp openjdk/hotspot/src/share/vm/prims/jvmtiUtil.cpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiUtil.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiUtil.cpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvmtiUtil.cpp	1.1 07/07/16 15:03:50 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -41,4 +38,3 @@
   }
   return _single_threaded_resource_area;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/jvmtiUtil.hpp openjdk/hotspot/src/share/vm/prims/jvmtiUtil.hpp
--- openjdk6/hotspot/src/share/vm/prims/jvmtiUtil.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/jvmtiUtil.hpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvmtiUtil.hpp	1.1 07/07/16 15:03:50 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -87,4 +84,3 @@
   SafeResourceMark() : ResourceMark(safe_resource_area()) {}
 
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/methodComparator.cpp openjdk/hotspot/src/share/vm/prims/methodComparator.cpp
--- openjdk6/hotspot/src/share/vm/prims/methodComparator.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/methodComparator.cpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)methodComparator.cpp	1.15 07/05/05 17:06:41 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/methodComparator.hpp openjdk/hotspot/src/share/vm/prims/methodComparator.hpp
--- openjdk6/hotspot/src/share/vm/prims/methodComparator.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/methodComparator.hpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)methodComparator.hpp	1.12 07/05/05 17:06:40 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/nativeLookup.cpp openjdk/hotspot/src/share/vm/prims/nativeLookup.cpp
--- openjdk6/hotspot/src/share/vm/prims/nativeLookup.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/nativeLookup.cpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)nativeLookup.cpp	1.82 07/05/05 17:06:42 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/nativeLookup.hpp openjdk/hotspot/src/share/vm/prims/nativeLookup.hpp
--- openjdk6/hotspot/src/share/vm/prims/nativeLookup.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/nativeLookup.hpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)nativeLookup.hpp	1.27 07/05/05 17:06:41 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/prims/perf.cpp openjdk/hotspot/src/share/vm/prims/perf.cpp
--- openjdk6/hotspot/src/share/vm/prims/perf.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/perf.cpp	2008-12-05 16:41:22.197638511 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)perf.cpp	1.15 07/05/05 17:06:34 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -314,4 +311,3 @@
     guarantee(ok == 0, "register perf natives");
   }
 JVM_END
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/privilegedStack.cpp openjdk/hotspot/src/share/vm/prims/privilegedStack.cpp
--- openjdk6/hotspot/src/share/vm/prims/privilegedStack.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/privilegedStack.cpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)privilegedStack.cpp	1.31 07/05/05 17:06:42 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -77,4 +74,3 @@
 }
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/privilegedStack.hpp openjdk/hotspot/src/share/vm/prims/privilegedStack.hpp
--- openjdk6/hotspot/src/share/vm/prims/privilegedStack.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/privilegedStack.hpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)privilegedStack.hpp	1.25 07/05/05 17:06:41 JVM"
-#endif
 /*
  * Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -44,4 +41,3 @@
   void print_on(outputStream* st) const   PRODUCT_RETURN;
   bool contains(address addr)             PRODUCT_RETURN0;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/prims/unsafe.cpp openjdk/hotspot/src/share/vm/prims/unsafe.cpp
--- openjdk6/hotspot/src/share/vm/prims/unsafe.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/prims/unsafe.cpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)unsafe.cpp	1.64 07/05/17 16:05:09 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/aprofiler.cpp openjdk/hotspot/src/share/vm/runtime/aprofiler.cpp
--- openjdk6/hotspot/src/share/vm/runtime/aprofiler.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/aprofiler.cpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)aprofiler.cpp	1.33 07/05/05 17:06:43 JVM"
-#endif
 /*
  * Copyright 1997-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/aprofiler.hpp openjdk/hotspot/src/share/vm/runtime/aprofiler.hpp
--- openjdk6/hotspot/src/share/vm/runtime/aprofiler.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/aprofiler.hpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)aprofiler.hpp	1.32 07/05/05 17:06:42 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/arguments.cpp openjdk/hotspot/src/share/vm/runtime/arguments.cpp
--- openjdk6/hotspot/src/share/vm/runtime/arguments.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/arguments.cpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)arguments.cpp	1.337 07/10/23 13:12:47 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1257,22 +1254,6 @@
 
 // Aggressive optimization flags  -XX:+AggressiveOpts
 void Arguments::set_aggressive_opts_flags() {
-#ifdef COMPILER2
-  if (AggressiveOpts || !FLAG_IS_DEFAULT(AutoBoxCacheMax)) {
-    if (FLAG_IS_DEFAULT(EliminateAutoBox)) {
-      FLAG_SET_DEFAULT(EliminateAutoBox, true);
-    }
-    if (FLAG_IS_DEFAULT(AutoBoxCacheMax)) {
-      FLAG_SET_DEFAULT(AutoBoxCacheMax, 20000);
-    } 
-
-    // Feed the cache size setting into the JDK
-    char buffer[1024];
-    sprintf(buffer, "java.lang.Integer.IntegerCache.high=%d", AutoBoxCacheMax);
-    add_property(buffer);
-  }
-#endif
-
   if (AggressiveOpts) {
 NOT_WINDOWS(
     // No measured benefit on Windows
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/arguments.hpp openjdk/hotspot/src/share/vm/runtime/arguments.hpp
--- openjdk6/hotspot/src/share/vm/runtime/arguments.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/arguments.hpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)arguments.hpp	1.104 07/09/04 17:30:49 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/atomic.cpp openjdk/hotspot/src/share/vm/runtime/atomic.cpp
--- openjdk6/hotspot/src/share/vm/runtime/atomic.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/atomic.cpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)atomic.cpp	1.14 07/05/05 17:06:42 JVM"
-#endif
 /*
  * Copyright 2001-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/atomic.hpp openjdk/hotspot/src/share/vm/runtime/atomic.hpp
--- openjdk6/hotspot/src/share/vm/runtime/atomic.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/atomic.hpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)atomic.hpp	1.22 07/05/05 17:06:42 JVM"
-#endif
 /*
  * Copyright 1999-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/biasedLocking.cpp openjdk/hotspot/src/share/vm/runtime/biasedLocking.cpp
--- openjdk6/hotspot/src/share/vm/runtime/biasedLocking.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/biasedLocking.cpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)biasedLocking.cpp	1.15 07/05/23 10:53:58 JVM"
-#endif
 
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/biasedLocking.hpp openjdk/hotspot/src/share/vm/runtime/biasedLocking.hpp
--- openjdk6/hotspot/src/share/vm/runtime/biasedLocking.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/biasedLocking.hpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)biasedLocking.hpp	1.11 07/05/17 16:05:21 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/compilationPolicy.cpp openjdk/hotspot/src/share/vm/runtime/compilationPolicy.cpp
--- openjdk6/hotspot/src/share/vm/runtime/compilationPolicy.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/compilationPolicy.cpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)compilationPolicy.cpp	1.45 07/05/05 17:06:45 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -449,4 +446,3 @@
 
 
 #endif // COMPILER2
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/compilationPolicy.hpp openjdk/hotspot/src/share/vm/runtime/compilationPolicy.hpp
--- openjdk6/hotspot/src/share/vm/runtime/compilationPolicy.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/compilationPolicy.hpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)compilationPolicy.hpp	1.15 07/05/05 17:06:44 JVM"
-#endif
 /*
  * Copyright 2000-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/deoptimization.cpp openjdk/hotspot/src/share/vm/runtime/deoptimization.cpp
--- openjdk6/hotspot/src/share/vm/runtime/deoptimization.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/deoptimization.cpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)deoptimization.cpp	1.284 07/08/29 13:42:28 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/deoptimization.hpp openjdk/hotspot/src/share/vm/runtime/deoptimization.hpp
--- openjdk6/hotspot/src/share/vm/runtime/deoptimization.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/deoptimization.hpp	2008-12-05 16:41:22.207638662 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)deoptimization.hpp	1.92 07/07/27 16:21:04 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/extendedPC.hpp openjdk/hotspot/src/share/vm/runtime/extendedPC.hpp
--- openjdk6/hotspot/src/share/vm/runtime/extendedPC.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/extendedPC.hpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)extendedPC.hpp	1.17 07/05/05 17:06:46 JVM"
-#endif
 /*
  * Copyright 1998-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/fieldDescriptor.cpp openjdk/hotspot/src/share/vm/runtime/fieldDescriptor.cpp
--- openjdk6/hotspot/src/share/vm/runtime/fieldDescriptor.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/fieldDescriptor.cpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)fieldDescriptor.cpp	1.56 07/05/05 17:06:46 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/fieldDescriptor.hpp openjdk/hotspot/src/share/vm/runtime/fieldDescriptor.hpp
--- openjdk6/hotspot/src/share/vm/runtime/fieldDescriptor.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/fieldDescriptor.hpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)fieldDescriptor.hpp	1.46 07/05/05 17:06:47 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/fieldType.cpp openjdk/hotspot/src/share/vm/runtime/fieldType.cpp
--- openjdk6/hotspot/src/share/vm/runtime/fieldType.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/fieldType.cpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)fieldType.cpp	1.27 07/05/05 17:06:47 JVM"
-#endif
 /*
  * Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -93,4 +90,3 @@
   *dimension = dim;
   return element_type;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/fieldType.hpp openjdk/hotspot/src/share/vm/runtime/fieldType.hpp
--- openjdk6/hotspot/src/share/vm/runtime/fieldType.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/fieldType.hpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)fieldType.hpp	1.28 07/05/05 17:06:47 JVM"
-#endif
 /*
  * Copyright 1997-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -53,4 +50,3 @@
   // Parse field and extract array information. Works for T_ARRAY only.  
   static BasicType get_array_info(symbolOop signature, jint* dimension, symbolOop *object_key, TRAPS);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/fprofiler.cpp openjdk/hotspot/src/share/vm/runtime/fprofiler.cpp
--- openjdk6/hotspot/src/share/vm/runtime/fprofiler.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/fprofiler.cpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)fprofiler.cpp	1.137 07/08/31 18:44:03 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/fprofiler.hpp openjdk/hotspot/src/share/vm/runtime/fprofiler.hpp
--- openjdk6/hotspot/src/share/vm/runtime/fprofiler.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/fprofiler.hpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)fprofiler.hpp	1.55 07/06/17 14:09:46 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -312,4 +309,3 @@
   static IntervalData* interval_data;
 #endif // FPROF_KERNEL
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/frame.cpp openjdk/hotspot/src/share/vm/runtime/frame.cpp
--- openjdk6/hotspot/src/share/vm/runtime/frame.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/frame.cpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)frame.cpp	1.235 07/09/25 17:07:43 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1409,4 +1406,3 @@
   _fr = thread->last_frame(); 
   _is_done = false;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/frame.hpp openjdk/hotspot/src/share/vm/runtime/frame.hpp
--- openjdk6/hotspot/src/share/vm/runtime/frame.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/frame.hpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)frame.hpp	1.164 07/08/29 13:42:28 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -470,4 +467,3 @@
   frame *current()                { return &_fr; }
   RegisterMap* register_map()     { return &_reg_map; }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/frame.inline.hpp openjdk/hotspot/src/share/vm/runtime/frame.inline.hpp
--- openjdk6/hotspot/src/share/vm/runtime/frame.inline.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/frame.inline.hpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)frame.inline.hpp	1.23 07/05/05 17:06:47 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/globals.cpp openjdk/hotspot/src/share/vm/runtime/globals.cpp
--- openjdk6/hotspot/src/share/vm/runtime/globals.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/globals.cpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)globals.cpp	1.50 07/09/13 20:51:49 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -430,4 +427,3 @@
 }
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/globals.hpp openjdk/hotspot/src/share/vm/runtime/globals.hpp
--- openjdk6/hotspot/src/share/vm/runtime/globals.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/globals.hpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)globals.hpp	1.975 08/08/28 22:07:15 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1418,7 +1415,7 @@
           "CMSPrecleanNumerator:CMSPrecleanDenominator yields convergence"  \
           " ratio")                                                         \
                                                                             \
-  product(bool, CMSPrecleanRefLists1, false,                                \
+  product(bool, CMSPrecleanRefLists1, true,                                 \
           "Preclean ref lists during (initial) preclean phase")             \
                                                                             \
   product(bool, CMSPrecleanRefLists2, false,                                \
@@ -3209,5 +3206,3 @@
 RUNTIME_FLAGS(DECLARE_DEVELOPER_FLAG, DECLARE_PD_DEVELOPER_FLAG, DECLARE_PRODUCT_FLAG, DECLARE_PD_PRODUCT_FLAG, DECLARE_DIAGNOSTIC_FLAG, DECLARE_NOTPRODUCT_FLAG, DECLARE_MANAGEABLE_FLAG, DECLARE_PRODUCT_RW_FLAG)
 
 RUNTIME_OS_FLAGS(DECLARE_DEVELOPER_FLAG, DECLARE_PD_DEVELOPER_FLAG, DECLARE_PRODUCT_FLAG, DECLARE_PD_PRODUCT_FLAG, DECLARE_DIAGNOSTIC_FLAG, DECLARE_NOTPRODUCT_FLAG)
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/globals_extension.hpp openjdk/hotspot/src/share/vm/runtime/globals_extension.hpp
--- openjdk6/hotspot/src/share/vm/runtime/globals_extension.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/globals_extension.hpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)globals_extension.hpp	1.17 07/05/17 16:05:46 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/handles.cpp openjdk/hotspot/src/share/vm/runtime/handles.cpp
--- openjdk6/hotspot/src/share/vm/runtime/handles.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/handles.cpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)handles.cpp	1.110 07/05/05 17:06:42 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/handles.hpp openjdk/hotspot/src/share/vm/runtime/handles.hpp
--- openjdk6/hotspot/src/share/vm/runtime/handles.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/handles.hpp	2008-12-05 16:41:22.217638812 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)handles.hpp	1.120 07/05/05 17:06:47 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -349,4 +346,3 @@
   ~ResetNoHandleMark() {}
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/handles.inline.hpp openjdk/hotspot/src/share/vm/runtime/handles.inline.hpp
--- openjdk6/hotspot/src/share/vm/runtime/handles.inline.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/handles.inline.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)handles.inline.hpp	1.28 07/05/05 17:06:48 JVM"
-#endif
 /*
  * Copyright 1998-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/hpi.cpp openjdk/hotspot/src/share/vm/runtime/hpi.cpp
--- openjdk6/hotspot/src/share/vm/runtime/hpi.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/hpi.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)hpi.cpp	1.18 07/05/17 16:05:48 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/hpi.hpp openjdk/hotspot/src/share/vm/runtime/hpi.hpp
--- openjdk6/hotspot/src/share/vm/runtime/hpi.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/hpi.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)hpi.hpp	1.22 07/05/05 17:06:48 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/icache.cpp openjdk/hotspot/src/share/vm/runtime/icache.cpp
--- openjdk6/hotspot/src/share/vm/runtime/icache.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/icache.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)icache.cpp	1.23 07/05/05 17:06:49 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/icache.hpp openjdk/hotspot/src/share/vm/runtime/icache.hpp
--- openjdk6/hotspot/src/share/vm/runtime/icache.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/icache.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)icache.hpp	1.18 07/05/05 17:06:44 JVM"
-#endif
 /*
  * Copyright 1997-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/init.cpp openjdk/hotspot/src/share/vm/runtime/init.cpp
--- openjdk6/hotspot/src/share/vm/runtime/init.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/init.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)init.cpp	1.124 07/08/31 14:03:12 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/init.hpp openjdk/hotspot/src/share/vm/runtime/init.hpp
--- openjdk6/hotspot/src/share/vm/runtime/init.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/init.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)init.hpp	1.19 07/05/05 17:06:49 JVM"
-#endif
 /*
  * Copyright 1997-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/interfaceSupport.cpp openjdk/hotspot/src/share/vm/runtime/interfaceSupport.cpp
--- openjdk6/hotspot/src/share/vm/runtime/interfaceSupport.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/interfaceSupport.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)interfaceSupport.cpp	1.91 07/05/05 17:06:50 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -270,4 +267,3 @@
   }
 #endif
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/interfaceSupport.hpp openjdk/hotspot/src/share/vm/runtime/interfaceSupport.hpp
--- openjdk6/hotspot/src/share/vm/runtime/interfaceSupport.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/interfaceSupport.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)interfaceSupport.hpp	1.176 07/05/17 16:05:52 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/java.cpp openjdk/hotspot/src/share/vm/runtime/java.cpp
--- openjdk6/hotspot/src/share/vm/runtime/java.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/java.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)java.cpp	1.223 07/07/16 14:37:42 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/java.hpp openjdk/hotspot/src/share/vm/runtime/java.hpp
--- openjdk6/hotspot/src/share/vm/runtime/java.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/java.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)java.hpp	1.38 07/08/21 18:54:50 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/javaCalls.cpp openjdk/hotspot/src/share/vm/runtime/javaCalls.cpp
--- openjdk6/hotspot/src/share/vm/runtime/javaCalls.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/javaCalls.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)javaCalls.cpp	1.220 07/05/05 17:06:51 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/javaCalls.hpp openjdk/hotspot/src/share/vm/runtime/javaCalls.hpp
--- openjdk6/hotspot/src/share/vm/runtime/javaCalls.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/javaCalls.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)javaCalls.hpp	1.81 07/05/05 17:06:47 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -196,4 +193,3 @@
   // Low-level interface
   static void call(JavaValue* result, methodHandle method, JavaCallArguments* args, TRAPS);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/javaFrameAnchor.hpp openjdk/hotspot/src/share/vm/runtime/javaFrameAnchor.hpp
--- openjdk6/hotspot/src/share/vm/runtime/javaFrameAnchor.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/javaFrameAnchor.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)javaFrameAnchor.hpp	1.17 07/08/29 13:42:29 JVM"
-#endif
 /*
  * Copyright 2002-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -88,4 +85,3 @@
   static ByteSize last_Java_pc_offset()          { return byte_offset_of(JavaFrameAnchor, _last_Java_pc); }
 
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/jfieldIDWorkaround.hpp openjdk/hotspot/src/share/vm/runtime/jfieldIDWorkaround.hpp
--- openjdk6/hotspot/src/share/vm/runtime/jfieldIDWorkaround.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/jfieldIDWorkaround.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jfieldIDWorkaround.hpp	1.11 07/05/05 17:06:51 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/jniHandles.cpp openjdk/hotspot/src/share/vm/runtime/jniHandles.cpp
--- openjdk6/hotspot/src/share/vm/runtime/jniHandles.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/jniHandles.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jniHandles.cpp	1.64 07/05/17 16:06:13 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/jniHandles.hpp openjdk/hotspot/src/share/vm/runtime/jniHandles.hpp
--- openjdk6/hotspot/src/share/vm/runtime/jniHandles.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/jniHandles.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jniHandles.hpp	1.54 07/05/17 16:06:14 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -213,5 +210,3 @@
     *((oop*)handle) = deleted_handle(); // Mark the handle as deleted, allocate will reuse it
   }
 }
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/jniPeriodicChecker.cpp openjdk/hotspot/src/share/vm/runtime/jniPeriodicChecker.cpp
--- openjdk6/hotspot/src/share/vm/runtime/jniPeriodicChecker.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/jniPeriodicChecker.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jniPeriodicChecker.cpp	1.4 07/05/05 17:06:51 JVM"
-#endif
 /*
  * Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/jniPeriodicChecker.hpp openjdk/hotspot/src/share/vm/runtime/jniPeriodicChecker.hpp
--- openjdk6/hotspot/src/share/vm/runtime/jniPeriodicChecker.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/jniPeriodicChecker.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jniPeriodicChecker.hpp	1.4 07/05/05 17:06:51 JVM"
-#endif
 /*
  * Copyright 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/memprofiler.cpp openjdk/hotspot/src/share/vm/runtime/memprofiler.cpp
--- openjdk6/hotspot/src/share/vm/runtime/memprofiler.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/memprofiler.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)memprofiler.cpp	1.24 07/05/05 17:06:52 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/memprofiler.hpp openjdk/hotspot/src/share/vm/runtime/memprofiler.hpp
--- openjdk6/hotspot/src/share/vm/runtime/memprofiler.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/memprofiler.hpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)memprofiler.hpp	1.17 07/05/05 17:06:52 JVM"
-#endif
 /*
  * Copyright 1998 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/monitorChunk.cpp openjdk/hotspot/src/share/vm/runtime/monitorChunk.cpp
--- openjdk6/hotspot/src/share/vm/runtime/monitorChunk.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/monitorChunk.cpp	2008-12-05 16:41:22.227638963 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)monitorChunk.cpp	1.19 07/05/05 17:06:52 JVM"
-#endif
 /*
  * Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -45,4 +42,3 @@
     at(index)->oops_do(f);
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/monitorChunk.hpp openjdk/hotspot/src/share/vm/runtime/monitorChunk.hpp
--- openjdk6/hotspot/src/share/vm/runtime/monitorChunk.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/monitorChunk.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)monitorChunk.hpp	1.19 07/05/05 17:06:52 JVM"
-#endif
 /*
  * Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/mutex.cpp openjdk/hotspot/src/share/vm/runtime/mutex.cpp
--- openjdk6/hotspot/src/share/vm/runtime/mutex.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/mutex.cpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)mutex.cpp	1.73 07/07/10 14:13:50 JVM"
-#endif
 
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/mutex.hpp openjdk/hotspot/src/share/vm/runtime/mutex.hpp
--- openjdk6/hotspot/src/share/vm/runtime/mutex.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/mutex.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)mutex.hpp	1.70 07/07/09 15:32:56 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -319,4 +316,3 @@
   static Parker * volatile FreeList ;
   static volatile int ListLock ;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/mutexLocker.cpp openjdk/hotspot/src/share/vm/runtime/mutexLocker.cpp
--- openjdk6/hotspot/src/share/vm/runtime/mutexLocker.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/mutexLocker.cpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)mutexLocker.cpp	1.181 07/07/11 13:22:55 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -267,4 +264,3 @@
   }
   if (none) st->print_cr("None");
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/mutexLocker.hpp openjdk/hotspot/src/share/vm/runtime/mutexLocker.hpp
--- openjdk6/hotspot/src/share/vm/runtime/mutexLocker.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/mutexLocker.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)mutexLocker.hpp	1.152 07/07/09 15:31:19 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -326,4 +323,3 @@
 };
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/objectMonitor.hpp openjdk/hotspot/src/share/vm/runtime/objectMonitor.hpp
--- openjdk6/hotspot/src/share/vm/runtime/objectMonitor.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/objectMonitor.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)objectMonitor.hpp	1.42 07/06/29 04:12:40 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -209,7 +206,3 @@
   intptr_t StatA, StatsB ; 
 
 };
-
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/objectMonitor.inline.hpp openjdk/hotspot/src/share/vm/runtime/objectMonitor.inline.hpp
--- openjdk6/hotspot/src/share/vm/runtime/objectMonitor.inline.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/objectMonitor.inline.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)objectMonitor.inline.hpp	1.24 07/05/05 17:06:52 JVM"
-#endif
 /*
  * Copyright 1998-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/orderAccess.cpp openjdk/hotspot/src/share/vm/runtime/orderAccess.cpp
--- openjdk6/hotspot/src/share/vm/runtime/orderAccess.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/orderAccess.cpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)orderAccess.cpp	1.9 07/05/05 17:06:53 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/orderAccess.hpp openjdk/hotspot/src/share/vm/runtime/orderAccess.hpp
--- openjdk6/hotspot/src/share/vm/runtime/orderAccess.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/orderAccess.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)orderAccess.hpp	1.11 07/05/05 17:06:52 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/os.cpp openjdk/hotspot/src/share/vm/runtime/os.cpp
--- openjdk6/hotspot/src/share/vm/runtime/os.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/os.cpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)os.cpp	1.185 07/10/04 10:49:22 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/os.hpp openjdk/hotspot/src/share/vm/runtime/os.hpp
--- openjdk6/hotspot/src/share/vm/runtime/os.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/os.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)os.hpp	1.223 07/10/04 10:49:22 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -597,5 +594,3 @@
 extern "C" int SpinPause () ; 
 extern "C" int SafeFetch32 (int * adr, int errValue) ; 
 extern "C" intptr_t SafeFetchN (intptr_t * adr, intptr_t errValue) ; 
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/osThread.cpp openjdk/hotspot/src/share/vm/runtime/osThread.cpp
--- openjdk6/hotspot/src/share/vm/runtime/osThread.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/osThread.cpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)osThread.cpp	1.29 07/05/05 17:06:53 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -56,4 +53,3 @@
     default:                      st->print("unknown state %d", _state); break;
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/osThread.hpp openjdk/hotspot/src/share/vm/runtime/osThread.hpp
--- openjdk6/hotspot/src/share/vm/runtime/osThread.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/osThread.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)osThread.hpp	1.40 07/05/05 17:06:53 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/perfData.cpp openjdk/hotspot/src/share/vm/runtime/perfData.cpp
--- openjdk6/hotspot/src/share/vm/runtime/perfData.cpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/perfData.cpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)perfData.cpp	1.22 07/05/05 17:06:52 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/perfData.hpp openjdk/hotspot/src/share/vm/runtime/perfData.hpp
--- openjdk6/hotspot/src/share/vm/runtime/perfData.hpp	2008-11-25 10:12:12.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/perfData.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)perfData.hpp	1.24 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/perfMemory.cpp openjdk/hotspot/src/share/vm/runtime/perfMemory.cpp
--- openjdk6/hotspot/src/share/vm/runtime/perfMemory.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/perfMemory.cpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)perfMemory.cpp	1.28 07/09/13 11:29:49 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -249,4 +246,3 @@
    
   return dest_file;
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/perfMemory.hpp openjdk/hotspot/src/share/vm/runtime/perfMemory.hpp
--- openjdk6/hotspot/src/share/vm/runtime/perfMemory.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/perfMemory.hpp	2008-12-05 16:41:22.237639114 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)perfMemory.hpp	1.23 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/prefetch.hpp openjdk/hotspot/src/share/vm/runtime/prefetch.hpp
--- openjdk6/hotspot/src/share/vm/runtime/prefetch.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/prefetch.hpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)prefetch.hpp	1.9 07/05/05 17:06:53 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/reflection.cpp openjdk/hotspot/src/share/vm/runtime/reflection.cpp
--- openjdk6/hotspot/src/share/vm/runtime/reflection.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/reflection.cpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)reflection.cpp	1.179 07/08/09 09:12:05 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/reflection.hpp openjdk/hotspot/src/share/vm/runtime/reflection.hpp
--- openjdk6/hotspot/src/share/vm/runtime/reflection.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/reflection.hpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)reflection.hpp	1.46 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -163,4 +160,3 @@
 #endif /* SUPPORT_OLD_REFLECTION */
 
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/reflectionCompat.hpp openjdk/hotspot/src/share/vm/runtime/reflectionCompat.hpp
--- openjdk6/hotspot/src/share/vm/runtime/reflectionCompat.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/reflectionCompat.hpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)reflectionCompat.hpp	1.14 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/reflectionUtils.cpp openjdk/hotspot/src/share/vm/runtime/reflectionUtils.cpp
--- openjdk6/hotspot/src/share/vm/runtime/reflectionUtils.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/reflectionUtils.cpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)reflectionUtils.cpp	1.15 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/reflectionUtils.hpp openjdk/hotspot/src/share/vm/runtime/reflectionUtils.hpp
--- openjdk6/hotspot/src/share/vm/runtime/reflectionUtils.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/reflectionUtils.hpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)reflectionUtils.hpp	1.16 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/registerMap.hpp openjdk/hotspot/src/share/vm/runtime/registerMap.hpp
--- openjdk6/hotspot/src/share/vm/runtime/registerMap.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/registerMap.hpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)registerMap.hpp	1.16 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/relocator.cpp openjdk/hotspot/src/share/vm/runtime/relocator.cpp
--- openjdk6/hotspot/src/share/vm/runtime/relocator.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/relocator.cpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)relocator.cpp	1.40 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/relocator.hpp openjdk/hotspot/src/share/vm/runtime/relocator.hpp
--- openjdk6/hotspot/src/share/vm/runtime/relocator.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/relocator.hpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)relocator.hpp	1.27 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 1997-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -119,4 +116,3 @@
       _listener->relocated(bci, delta, new_code_length); 
   }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/rframe.cpp openjdk/hotspot/src/share/vm/runtime/rframe.cpp
--- openjdk6/hotspot/src/share/vm/runtime/rframe.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/rframe.cpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)rframe.cpp	1.41 07/05/05 17:06:52 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -171,4 +168,3 @@
 void DeoptimizedRFrame::print() {
   RFrame::print("deopt.");
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/rframe.hpp openjdk/hotspot/src/share/vm/runtime/rframe.hpp
--- openjdk6/hotspot/src/share/vm/runtime/rframe.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/rframe.hpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)rframe.hpp	1.23 07/05/05 17:06:49 JVM"
-#endif
 /*
  * Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -118,5 +115,3 @@
  public:
   void print();
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/safepoint.cpp openjdk/hotspot/src/share/vm/runtime/safepoint.cpp
--- openjdk6/hotspot/src/share/vm/runtime/safepoint.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/safepoint.cpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)safepoint.cpp	1.308 07/09/04 11:20:17 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/safepoint.hpp openjdk/hotspot/src/share/vm/runtime/safepoint.hpp
--- openjdk6/hotspot/src/share/vm/runtime/safepoint.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/safepoint.hpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)safepoint.hpp	1.105 07/08/27 21:52:08 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/sharedRuntime.cpp openjdk/hotspot/src/share/vm/runtime/sharedRuntime.cpp
--- openjdk6/hotspot/src/share/vm/runtime/sharedRuntime.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/sharedRuntime.cpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)sharedRuntime.cpp	1.383 08/05/13 16:13:34 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -470,11 +467,6 @@
   throw_and_post_jvmti_exception(thread, vmSymbols::java_lang_AbstractMethodError());
 JRT_END
 
-JRT_ENTRY(void, SharedRuntime::throw_IncompatibleClassChangeError(JavaThread* thread))
-  // These errors occur only at call sites
-  throw_and_post_jvmti_exception(thread, vmSymbols::java_lang_IncompatibleClassChangeError(), "vtable stub");
-JRT_END
-
 JRT_ENTRY(void, SharedRuntime::throw_ArithmeticException(JavaThread* thread))
   throw_and_post_jvmti_exception(thread, vmSymbols::java_lang_ArithmeticException(), "/ by zero");
 JRT_END
@@ -1489,9 +1481,11 @@
   const char* desc = " cannot be cast to ";
   size_t msglen = strlen(objName) + strlen(desc) + strlen(targetKlassName) + 1;
 
-  char* message = NEW_RESOURCE_ARRAY(char, msglen);
+  char* message = NEW_C_HEAP_ARRAY(char, msglen);
   if (NULL == message) {
-    // Shouldn't happen, but don't cause even more problems if it does
+    // out of memory - can't use a detailed message.  Since caller is
+    // using a resource mark to free memory, returning this should be
+    // safe (caller won't explicitly delete it).
     message = const_cast<char*>(objName); 
   } else {
     jio_snprintf(message, msglen, "%s%s%s", objName, desc, targetKlassName);
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/sharedRuntime.hpp openjdk/hotspot/src/share/vm/runtime/sharedRuntime.hpp
--- openjdk6/hotspot/src/share/vm/runtime/sharedRuntime.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/sharedRuntime.hpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)sharedRuntime.hpp	1.158 07/10/05 19:47:48 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -107,7 +104,6 @@
     STACK_OVERFLOW
   };
   static void    throw_AbstractMethodError(JavaThread* thread);
-  static void    throw_IncompatibleClassChangeError(JavaThread* thread);
   static void    throw_ArithmeticException(JavaThread* thread);
   static void    throw_NullPointerException(JavaThread* thread);
   static void    throw_NullPointerException_at_call(JavaThread* thread);
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/sharedRuntimeTrans.cpp openjdk/hotspot/src/share/vm/runtime/sharedRuntimeTrans.cpp
--- openjdk6/hotspot/src/share/vm/runtime/sharedRuntimeTrans.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/sharedRuntimeTrans.cpp	2008-12-05 16:41:22.247639265 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)sharedRuntimeTrans.cpp	1.8 07/05/05 17:06:54 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/sharedRuntimeTrig.cpp openjdk/hotspot/src/share/vm/runtime/sharedRuntimeTrig.cpp
--- openjdk6/hotspot/src/share/vm/runtime/sharedRuntimeTrig.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/sharedRuntimeTrig.cpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)sharedRuntimeTrig.cpp	1.16 07/05/05 17:06:55 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/signature.cpp openjdk/hotspot/src/share/vm/runtime/signature.cpp
--- openjdk6/hotspot/src/share/vm/runtime/signature.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/signature.cpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)signature.cpp	1.43 07/05/05 17:06:56 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/signature.hpp openjdk/hotspot/src/share/vm/runtime/signature.hpp
--- openjdk6/hotspot/src/share/vm/runtime/signature.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/signature.hpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)signature.hpp	1.50 07/05/05 17:06:56 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/stackValue.cpp openjdk/hotspot/src/share/vm/runtime/stackValue.cpp
--- openjdk6/hotspot/src/share/vm/runtime/stackValue.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/stackValue.cpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)stackValue.cpp	1.28 07/05/24 14:38:39 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -181,4 +178,3 @@
 }
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/stackValue.hpp openjdk/hotspot/src/share/vm/runtime/stackValue.hpp
--- openjdk6/hotspot/src/share/vm/runtime/stackValue.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/stackValue.hpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)stackValue.hpp	1.37 07/05/24 14:38:39 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -102,4 +99,3 @@
   void print_on(outputStream* st) const;
 #endif
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/stackValueCollection.cpp openjdk/hotspot/src/share/vm/runtime/stackValueCollection.cpp
--- openjdk6/hotspot/src/share/vm/runtime/stackValueCollection.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/stackValueCollection.cpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)stackValueCollection.cpp	1.18 07/05/05 17:06:53 JVM"
-#endif
 /*
  * Copyright 2001-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/stackValueCollection.hpp openjdk/hotspot/src/share/vm/runtime/stackValueCollection.hpp
--- openjdk6/hotspot/src/share/vm/runtime/stackValueCollection.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/stackValueCollection.hpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)stackValueCollection.hpp	1.14 07/05/05 17:06:58 JVM"
-#endif
 /*
  * Copyright 2001-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/statSampler.cpp openjdk/hotspot/src/share/vm/runtime/statSampler.cpp
--- openjdk6/hotspot/src/share/vm/runtime/statSampler.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/statSampler.cpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)statSampler.cpp	1.24 07/05/05 17:06:58 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -360,4 +357,3 @@
 
   StatSampler::destroy();
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/statSampler.hpp openjdk/hotspot/src/share/vm/runtime/statSampler.hpp
--- openjdk6/hotspot/src/share/vm/runtime/statSampler.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/statSampler.hpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)statSampler.hpp	1.12 07/05/05 17:06:58 JVM"
-#endif
 /*
  * Copyright 2001-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/stubCodeGenerator.cpp openjdk/hotspot/src/share/vm/runtime/stubCodeGenerator.cpp
--- openjdk6/hotspot/src/share/vm/runtime/stubCodeGenerator.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/stubCodeGenerator.cpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)stubCodeGenerator.cpp	1.30 07/05/17 16:06:31 JVM"
-#endif
 /*
  * Copyright 1997-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -146,4 +143,3 @@
     JvmtiExport::post_dynamic_code_generated(_cdesc->name(), _cdesc->begin(), _cdesc->end());
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/stubCodeGenerator.hpp openjdk/hotspot/src/share/vm/runtime/stubCodeGenerator.hpp
--- openjdk6/hotspot/src/share/vm/runtime/stubCodeGenerator.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/stubCodeGenerator.hpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)stubCodeGenerator.hpp	1.25 07/05/17 16:06:33 JVM"
-#endif
 /*
  * Copyright 1997-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -121,4 +118,3 @@
   ~StubCodeMark();
 
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/stubRoutines.cpp openjdk/hotspot/src/share/vm/runtime/stubRoutines.cpp
--- openjdk6/hotspot/src/share/vm/runtime/stubRoutines.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/stubRoutines.cpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)stubRoutines.cpp	1.115 07/07/19 12:19:08 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -43,7 +40,6 @@
 address StubRoutines::_catch_exception_entry                    = NULL;
 address StubRoutines::_forward_exception_entry                  = NULL;
 address StubRoutines::_throw_AbstractMethodError_entry          = NULL;
-address StubRoutines::_throw_IncompatibleClassChangeError_entry = NULL;
 address StubRoutines::_throw_ArithmeticException_entry          = NULL;
 address StubRoutines::_throw_NullPointerException_entry         = NULL;
 address StubRoutines::_throw_NullPointerException_at_call_entry = NULL;
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/stubRoutines.hpp openjdk/hotspot/src/share/vm/runtime/stubRoutines.hpp
--- openjdk6/hotspot/src/share/vm/runtime/stubRoutines.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/stubRoutines.hpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)stubRoutines.hpp	1.118 07/10/05 19:48:47 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -87,7 +84,6 @@
   static address _forward_exception_entry;
   static address _catch_exception_entry;
   static address _throw_AbstractMethodError_entry;
-  static address _throw_IncompatibleClassChangeError_entry;
   static address _throw_ArithmeticException_entry;
   static address _throw_NullPointerException_entry;
   static address _throw_NullPointerException_at_call_entry;
@@ -188,7 +184,6 @@
   static address forward_exception_entry()                 { return _forward_exception_entry; }
   // Implicit exceptions
   static address throw_AbstractMethodError_entry()         { return _throw_AbstractMethodError_entry; }
-  static address throw_IncompatibleClassChangeError_entry(){ return _throw_IncompatibleClassChangeError_entry; }
   static address throw_ArithmeticException_entry()         { return _throw_ArithmeticException_entry; }
   static address throw_NullPointerException_entry()        { return _throw_NullPointerException_entry; }
   static address throw_NullPointerException_at_call_entry(){ return _throw_NullPointerException_at_call_entry; }
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/sweeper.cpp openjdk/hotspot/src/share/vm/runtime/sweeper.cpp
--- openjdk6/hotspot/src/share/vm/runtime/sweeper.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/sweeper.cpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)sweeper.cpp	1.39 07/05/05 17:06:50 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/sweeper.hpp openjdk/hotspot/src/share/vm/runtime/sweeper.hpp
--- openjdk6/hotspot/src/share/vm/runtime/sweeper.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/sweeper.hpp	2008-12-05 16:41:22.257639416 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)sweeper.hpp	1.26 07/05/05 17:06:59 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/synchronizer.cpp openjdk/hotspot/src/share/vm/runtime/synchronizer.cpp
--- openjdk6/hotspot/src/share/vm/runtime/synchronizer.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/synchronizer.cpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)synchronizer.cpp	1.117 07/09/29 02:14:43 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -4717,6 +4714,3 @@
 }
 
 #endif
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/synchronizer.hpp openjdk/hotspot/src/share/vm/runtime/synchronizer.hpp
--- openjdk6/hotspot/src/share/vm/runtime/synchronizer.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/synchronizer.hpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)synchronizer.hpp	1.71 07/05/26 16:04:34 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/task.cpp openjdk/hotspot/src/share/vm/runtime/task.cpp
--- openjdk6/hotspot/src/share/vm/runtime/task.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/task.cpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)task.cpp	1.27 07/05/05 17:06:59 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/task.hpp openjdk/hotspot/src/share/vm/runtime/task.hpp
--- openjdk6/hotspot/src/share/vm/runtime/task.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/task.hpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)task.hpp	1.23 07/05/05 17:06:59 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/thread.cpp openjdk/hotspot/src/share/vm/runtime/thread.cpp
--- openjdk6/hotspot/src/share/vm/runtime/thread.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/thread.cpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)thread.cpp	1.819 07/11/02 18:02:02 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -2928,25 +2925,6 @@
       warning("java.lang.String not initialized");
     }
 
-    if (AggressiveOpts) {
-      // Forcibly initialize java/util/HashMap and mutate the private
-      // static final "frontCacheEnabled" field before we start creating instances
-#ifdef ASSERT      
-      klassOop tmp_k = SystemDictionary::find(vmSymbolHandles::java_util_HashMap(), Handle(), Handle(), CHECK_0);
-      assert(tmp_k == NULL, "java/util/HashMap should not be loaded yet");
-#endif
-      klassOop k_o = SystemDictionary::resolve_or_null(vmSymbolHandles::java_util_HashMap(), Handle(), Handle(), CHECK_0);
-      KlassHandle k = KlassHandle(THREAD, k_o);
-      guarantee(k.not_null(), "Must find java/util/HashMap");
-      instanceKlassHandle ik = instanceKlassHandle(THREAD, k());
-      ik->initialize(CHECK_0);
-      fieldDescriptor fd;
-      // Possible we might not find this field; if so, don't break
-      if (ik->find_local_field(vmSymbols::frontCacheEnabled_name(), vmSymbols::bool_signature(), &fd)) {
-        k()->bool_field_put(fd.offset(), true);
-      }
-    }
-
     // Initialize java_lang.System (needed before creating the thread)
     if (InitializeJavaLangSystem) {      
       initialize_class(vmSymbolHandles::java_lang_System(), CHECK_0);
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/thread.hpp openjdk/hotspot/src/share/vm/runtime/thread.hpp
--- openjdk6/hotspot/src/share/vm/runtime/thread.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/thread.hpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)thread.hpp	1.456 07/09/28 10:22:58 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1758,5 +1755,3 @@
     static ParkEvent * Allocate (Thread * t) ; 
     static void Release (ParkEvent * e) ; 
 } ; 
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/threadCritical.hpp openjdk/hotspot/src/share/vm/runtime/threadCritical.hpp
--- openjdk6/hotspot/src/share/vm/runtime/threadCritical.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/threadCritical.hpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)threadCritical.hpp	1.13 07/05/05 17:07:00 JVM"
-#endif
 /*
  * Copyright 2001-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -54,5 +51,3 @@
   ThreadCritical();
   ~ThreadCritical();
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/threadLocalStorage.cpp openjdk/hotspot/src/share/vm/runtime/threadLocalStorage.cpp
--- openjdk6/hotspot/src/share/vm/runtime/threadLocalStorage.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/threadLocalStorage.cpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)threadLocalStorage.cpp	1.46 07/05/05 17:07:00 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -50,4 +47,3 @@
   set_thread_index(os::allocate_thread_local_storage());
   generate_code_for_get_thread();
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/threadLocalStorage.hpp openjdk/hotspot/src/share/vm/runtime/threadLocalStorage.hpp
--- openjdk6/hotspot/src/share/vm/runtime/threadLocalStorage.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/threadLocalStorage.hpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)threadLocalStorage.hpp	1.45 07/05/05 17:07:00 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -63,4 +60,3 @@
   static void pd_invalidate_all();
   
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/timer.cpp openjdk/hotspot/src/share/vm/runtime/timer.cpp
--- openjdk6/hotspot/src/share/vm/runtime/timer.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/timer.cpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)timer.cpp	1.33 07/05/05 17:06:59 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/timer.hpp openjdk/hotspot/src/share/vm/runtime/timer.hpp
--- openjdk6/hotspot/src/share/vm/runtime/timer.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/timer.hpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)timer.hpp	1.36 07/05/05 17:06:59 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/unhandledOops.cpp openjdk/hotspot/src/share/vm/runtime/unhandledOops.cpp
--- openjdk6/hotspot/src/share/vm/runtime/unhandledOops.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/unhandledOops.cpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)unhandledOops.cpp	1.11 07/05/05 17:07:00 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/unhandledOops.hpp openjdk/hotspot/src/share/vm/runtime/unhandledOops.hpp
--- openjdk6/hotspot/src/share/vm/runtime/unhandledOops.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/unhandledOops.hpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)unhandledOops.hpp	1.7 07/05/05 17:07:01 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vframe.cpp openjdk/hotspot/src/share/vm/runtime/vframe.cpp
--- openjdk6/hotspot/src/share/vm/runtime/vframe.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vframe.cpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vframe.cpp	1.163 07/08/29 13:42:30 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vframe.hpp openjdk/hotspot/src/share/vm/runtime/vframe.hpp
--- openjdk6/hotspot/src/share/vm/runtime/vframe.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vframe.hpp	2008-12-05 16:41:22.267639567 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vframe.hpp	1.89 07/05/17 16:07:04 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vframeArray.cpp openjdk/hotspot/src/share/vm/runtime/vframeArray.cpp
--- openjdk6/hotspot/src/share/vm/runtime/vframeArray.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vframeArray.cpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vframeArray.cpp	1.145 07/08/29 13:42:30 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vframeArray.hpp openjdk/hotspot/src/share/vm/runtime/vframeArray.hpp
--- openjdk6/hotspot/src/share/vm/runtime/vframeArray.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vframeArray.hpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vframeArray.hpp	1.77 07/05/05 17:07:01 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -202,4 +199,3 @@
 #endif
   
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vframe_hp.cpp openjdk/hotspot/src/share/vm/runtime/vframe_hp.cpp
--- openjdk6/hotspot/src/share/vm/runtime/vframe_hp.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vframe_hp.cpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vframe_hp.cpp	1.159 07/05/24 14:38:39 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vframe_hp.hpp openjdk/hotspot/src/share/vm/runtime/vframe_hp.hpp
--- openjdk6/hotspot/src/share/vm/runtime/vframe_hp.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vframe_hp.hpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vframe_hp.hpp	1.54 07/05/05 17:07:01 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/virtualspace.cpp openjdk/hotspot/src/share/vm/runtime/virtualspace.cpp
--- openjdk6/hotspot/src/share/vm/runtime/virtualspace.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/virtualspace.cpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)virtualspace.cpp	1.63 07/10/04 10:49:29 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -705,4 +702,3 @@
 }
 
 #endif
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/virtualspace.hpp openjdk/hotspot/src/share/vm/runtime/virtualspace.hpp
--- openjdk6/hotspot/src/share/vm/runtime/virtualspace.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/virtualspace.hpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)virtualspace.hpp	1.42 07/10/04 10:49:29 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vmStructs.cpp openjdk/hotspot/src/share/vm/runtime/vmStructs.cpp
--- openjdk6/hotspot/src/share/vm/runtime/vmStructs.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vmStructs.cpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmStructs.cpp	1.189 08/04/09 19:20:08 JVM"
-#endif
 /*
  * Copyright 2000-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -896,7 +893,6 @@
   /*******************************************************************/   \
                                                                           \
   declare_unsigned_integer_type(size_t)                                   \
-  declare_integer_type(ssize_t)                                           \
   declare_unsigned_integer_type(const size_t)                             \
   declare_integer_type(intx)                                              \
   declare_integer_type(intptr_t)                                          \
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vmStructs.hpp openjdk/hotspot/src/share/vm/runtime/vmStructs.hpp
--- openjdk6/hotspot/src/share/vm/runtime/vmStructs.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vmStructs.hpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vmStructs.hpp	1.13 07/05/05 17:07:02 JVM"
-#endif
 /*
  * Copyright 2000-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vmThread.cpp openjdk/hotspot/src/share/vm/runtime/vmThread.cpp
--- openjdk6/hotspot/src/share/vm/runtime/vmThread.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vmThread.cpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmThread.cpp	1.92 07/08/27 21:52:08 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vmThread.hpp openjdk/hotspot/src/share/vm/runtime/vmThread.hpp
--- openjdk6/hotspot/src/share/vm/runtime/vmThread.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vmThread.hpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vmThread.hpp	1.40 07/05/05 17:07:03 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -149,5 +146,3 @@
   // Pointer to single-instance of VM thread
   static VMThread*     _vm_thread;
 };
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vm_operations.cpp openjdk/hotspot/src/share/vm/runtime/vm_operations.cpp
--- openjdk6/hotspot/src/share/vm/runtime/vm_operations.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vm_operations.cpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vm_operations.cpp	1.192 07/05/23 10:54:18 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vm_operations.hpp openjdk/hotspot/src/share/vm/runtime/vm_operations.hpp
--- openjdk6/hotspot/src/share/vm/runtime/vm_operations.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vm_operations.hpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vm_operations.hpp	1.130 07/05/23 10:54:21 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vm_version.cpp openjdk/hotspot/src/share/vm/runtime/vm_version.cpp
--- openjdk6/hotspot/src/share/vm/runtime/vm_version.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vm_version.cpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vm_version.cpp	1.59 07/08/17 11:47:16 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vm_version.hpp openjdk/hotspot/src/share/vm/runtime/vm_version.hpp
--- openjdk6/hotspot/src/share/vm/runtime/vm_version.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vm_version.hpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vm_version.hpp	1.28 07/10/04 10:49:20 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -73,4 +70,3 @@
   // that the O/S may support more sizes, but at most this many are used.
   static uint page_size_count() { return 2; }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/runtime/vtune.hpp openjdk/hotspot/src/share/vm/runtime/vtune.hpp
--- openjdk6/hotspot/src/share/vm/runtime/vtune.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/runtime/vtune.hpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vtune.hpp	1.20 07/05/05 17:07:01 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -56,4 +53,3 @@
    VTuneClassLoadMarker() { VTune::start_class_load(); }
   ~VTuneClassLoadMarker() { VTune::end_class_load(); }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/services/attachListener.cpp openjdk/hotspot/src/share/vm/services/attachListener.cpp
--- openjdk6/hotspot/src/share/vm/services/attachListener.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/attachListener.cpp	2008-12-05 16:41:22.277639718 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)attachListener.cpp	1.24 07/06/30 11:09:32 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/attachListener.hpp openjdk/hotspot/src/share/vm/services/attachListener.hpp
--- openjdk6/hotspot/src/share/vm/services/attachListener.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/attachListener.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)attachListener.hpp	1.12 07/07/11 11:24:45 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/classLoadingService.cpp openjdk/hotspot/src/share/vm/services/classLoadingService.cpp
--- openjdk6/hotspot/src/share/vm/services/classLoadingService.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/classLoadingService.cpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)classLoadingService.cpp	1.15 07/05/05 17:07:04 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/classLoadingService.hpp openjdk/hotspot/src/share/vm/services/classLoadingService.hpp
--- openjdk6/hotspot/src/share/vm/services/classLoadingService.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/classLoadingService.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)classLoadingService.hpp	1.10 07/05/05 17:07:05 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -136,4 +133,3 @@
     _loaded_classes->append(h);
   }
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/services/dtraceAttacher.cpp openjdk/hotspot/src/share/vm/services/dtraceAttacher.cpp
--- openjdk6/hotspot/src/share/vm/services/dtraceAttacher.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/dtraceAttacher.cpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)dtraceAttacher.cpp	1.8 07/05/23 10:54:23 JVM" 
-#endif
 /*
  * Copyright 2006-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/dtraceAttacher.hpp openjdk/hotspot/src/share/vm/services/dtraceAttacher.hpp
--- openjdk6/hotspot/src/share/vm/services/dtraceAttacher.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/dtraceAttacher.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)dtraceAttacher.hpp	1.5 07/05/05 17:07:05 JVM"
-#endif
 /*
  * Copyright 2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -45,4 +42,3 @@
   // set ExtendedDTraceProbes flag
   static void set_extended_dprobes(bool value);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/services/heapDumper.cpp openjdk/hotspot/src/share/vm/services/heapDumper.cpp
--- openjdk6/hotspot/src/share/vm/services/heapDumper.cpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/heapDumper.cpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)heapDumper.cpp	1.24 07/07/22 22:35:59 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1774,4 +1771,3 @@
                     true  /* send to tty */);
   dumper.dump(path);
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/services/heapDumper.hpp openjdk/hotspot/src/share/vm/services/heapDumper.hpp
--- openjdk6/hotspot/src/share/vm/services/heapDumper.hpp	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/heapDumper.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)heapDumper.hpp	1.11 07/07/02 11:45:25 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/jmm.h openjdk/hotspot/src/share/vm/services/jmm.h
--- openjdk6/hotspot/src/share/vm/services/jmm.h	2008-11-25 10:12:13.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/jmm.h	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jmm.h	1.36 07/05/05 17:07:04 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -288,4 +285,3 @@
 #endif /* __cplusplus */
 
 #endif /* !_JAVA_JMM_H_ */
-
diff -ruNb openjdk6/hotspot/src/share/vm/services/lowMemoryDetector.cpp openjdk/hotspot/src/share/vm/services/lowMemoryDetector.cpp
--- openjdk6/hotspot/src/share/vm/services/lowMemoryDetector.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/lowMemoryDetector.cpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)lowMemoryDetector.cpp	1.28 07/05/05 17:07:04 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/lowMemoryDetector.hpp openjdk/hotspot/src/share/vm/services/lowMemoryDetector.hpp
--- openjdk6/hotspot/src/share/vm/services/lowMemoryDetector.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/lowMemoryDetector.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)lowMemoryDetector.hpp	1.22 07/05/05 17:07:05 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/management.cpp openjdk/hotspot/src/share/vm/services/management.cpp
--- openjdk6/hotspot/src/share/vm/services/management.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/management.cpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)management.cpp	1.86 07/08/27 14:10:24 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/management.hpp openjdk/hotspot/src/share/vm/services/management.hpp
--- openjdk6/hotspot/src/share/vm/services/management.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/management.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)management.hpp	1.23 07/05/05 17:07:05 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/memoryManager.cpp openjdk/hotspot/src/share/vm/services/memoryManager.cpp
--- openjdk6/hotspot/src/share/vm/services/memoryManager.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/memoryManager.cpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)memoryManager.cpp	1.28 07/05/05 17:07:05 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/memoryManager.hpp openjdk/hotspot/src/share/vm/services/memoryManager.hpp
--- openjdk6/hotspot/src/share/vm/services/memoryManager.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/memoryManager.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)memoryManager.hpp	1.15 07/05/05 17:07:05 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/memoryPool.cpp openjdk/hotspot/src/share/vm/services/memoryPool.cpp
--- openjdk6/hotspot/src/share/vm/services/memoryPool.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/memoryPool.cpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)memoryPool.cpp	1.35 07/05/29 09:44:30 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/memoryPool.hpp openjdk/hotspot/src/share/vm/services/memoryPool.hpp
--- openjdk6/hotspot/src/share/vm/services/memoryPool.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/memoryPool.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)memoryPool.hpp	1.25 07/05/29 09:44:30 JVM"
-#endif
 /*
  * Copyright 2003-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/memoryService.cpp openjdk/hotspot/src/share/vm/services/memoryService.cpp
--- openjdk6/hotspot/src/share/vm/services/memoryService.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/memoryService.cpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)memoryService.cpp	1.35 07/05/29 09:44:30 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/memoryService.hpp openjdk/hotspot/src/share/vm/services/memoryService.hpp
--- openjdk6/hotspot/src/share/vm/services/memoryService.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/memoryService.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)memoryService.hpp	1.16 07/05/05 17:07:05 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/memoryUsage.hpp openjdk/hotspot/src/share/vm/services/memoryUsage.hpp
--- openjdk6/hotspot/src/share/vm/services/memoryUsage.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/memoryUsage.hpp	2008-12-05 16:41:22.287639868 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)memoryUsage.hpp	1.12 07/05/05 17:07:06 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/psMemoryPool.cpp openjdk/hotspot/src/share/vm/services/psMemoryPool.cpp
--- openjdk6/hotspot/src/share/vm/services/psMemoryPool.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/psMemoryPool.cpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)psMemoryPool.cpp	1.1 07/05/01 16:48:51 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/psMemoryPool.hpp openjdk/hotspot/src/share/vm/services/psMemoryPool.hpp
--- openjdk6/hotspot/src/share/vm/services/psMemoryPool.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/psMemoryPool.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)psMemoryPool.hpp	1.1 07/05/01 16:48:51 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/runtimeService.cpp openjdk/hotspot/src/share/vm/services/runtimeService.cpp
--- openjdk6/hotspot/src/share/vm/services/runtimeService.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/runtimeService.cpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)runtimeService.cpp	1.18 07/07/13 14:31:26 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/runtimeService.hpp openjdk/hotspot/src/share/vm/services/runtimeService.hpp
--- openjdk6/hotspot/src/share/vm/services/runtimeService.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/runtimeService.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)runtimeService.hpp	1.10 07/05/05 17:07:06 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/serviceUtil.hpp openjdk/hotspot/src/share/vm/services/serviceUtil.hpp
--- openjdk6/hotspot/src/share/vm/services/serviceUtil.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/serviceUtil.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)serviceUtil.hpp	1.8 07/05/05 17:07:06 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/threadService.cpp openjdk/hotspot/src/share/vm/services/threadService.cpp
--- openjdk6/hotspot/src/share/vm/services/threadService.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/threadService.cpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)threadService.cpp	1.54 07/05/17 16:07:12 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/services/threadService.hpp openjdk/hotspot/src/share/vm/services/threadService.hpp
--- openjdk6/hotspot/src/share/vm/services/threadService.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/services/threadService.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)threadService.hpp	1.43 07/10/03 11:09:53 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/accessFlags.cpp openjdk/hotspot/src/share/vm/utilities/accessFlags.cpp
--- openjdk6/hotspot/src/share/vm/utilities/accessFlags.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/accessFlags.cpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)accessFlags.cpp	1.25 07/05/05 17:07:07 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/accessFlags.hpp openjdk/hotspot/src/share/vm/utilities/accessFlags.hpp
--- openjdk6/hotspot/src/share/vm/utilities/accessFlags.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/accessFlags.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)accessFlags.hpp	1.68 07/05/05 17:07:07 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/array.cpp openjdk/hotspot/src/share/vm/utilities/array.cpp
--- openjdk6/hotspot/src/share/vm/utilities/array.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/array.cpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)array.cpp	1.20 07/05/05 17:07:07 JVM"
-#endif
 /*
  * Copyright 2000-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/array.hpp openjdk/hotspot/src/share/vm/utilities/array.hpp
--- openjdk6/hotspot/src/share/vm/utilities/array.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/array.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)array.hpp	1.15 07/05/05 17:07:07 JVM"
-#endif
 /*
  * Copyright 2000-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/bitMap.cpp openjdk/hotspot/src/share/vm/utilities/bitMap.cpp
--- openjdk6/hotspot/src/share/vm/utilities/bitMap.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/bitMap.cpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)bitMap.cpp	1.48 07/05/05 17:07:07 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/bitMap.hpp openjdk/hotspot/src/share/vm/utilities/bitMap.hpp
--- openjdk6/hotspot/src/share/vm/utilities/bitMap.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/bitMap.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bitMap.hpp	1.46 07/06/18 14:25:28 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -397,4 +394,3 @@
     }
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/bitMap.inline.hpp openjdk/hotspot/src/share/vm/utilities/bitMap.inline.hpp
--- openjdk6/hotspot/src/share/vm/utilities/bitMap.inline.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/bitMap.inline.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)bitMap.inline.hpp	1.8 07/05/05 17:07:07 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/constantTag.cpp openjdk/hotspot/src/share/vm/utilities/constantTag.cpp
--- openjdk6/hotspot/src/share/vm/utilities/constantTag.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/constantTag.cpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)constantTag.cpp	1.21 07/05/05 17:07:08 JVM"
-#endif
 /*
  * Copyright 1997-1999 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/constantTag.hpp openjdk/hotspot/src/share/vm/utilities/constantTag.hpp
--- openjdk6/hotspot/src/share/vm/utilities/constantTag.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/constantTag.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)constantTag.hpp	1.28 07/05/05 17:07:08 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -87,4 +84,3 @@
     
   void print_on(outputStream* st) const PRODUCT_RETURN;
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/copy.hpp openjdk/hotspot/src/share/vm/utilities/copy.hpp
--- openjdk6/hotspot/src/share/vm/utilities/copy.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/copy.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)copy.hpp	1.15 07/05/17 16:07:14 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/debug.cpp openjdk/hotspot/src/share/vm/utilities/debug.cpp
--- openjdk6/hotspot/src/share/vm/utilities/debug.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/debug.cpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)debug.cpp	1.183 07/07/02 11:45:25 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -937,4 +934,3 @@
 #endif
 
 #endif // PRODUCT
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/debug.hpp openjdk/hotspot/src/share/vm/utilities/debug.hpp
--- openjdk6/hotspot/src/share/vm/utilities/debug.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/debug.hpp	2008-12-05 16:41:22.297640019 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)debug.hpp	1.50 07/05/05 17:07:07 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/defaultStream.hpp openjdk/hotspot/src/share/vm/utilities/defaultStream.hpp
--- openjdk6/hotspot/src/share/vm/utilities/defaultStream.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/defaultStream.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)defaultStream.hpp	1.13 07/05/05 17:07:08 JVM"
-#endif
 /*
  * Copyright 2003-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/dtrace.hpp openjdk/hotspot/src/share/vm/utilities/dtrace.hpp
--- openjdk6/hotspot/src/share/vm/utilities/dtrace.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/dtrace.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)dtrace.hpp	1.11 07/05/05 17:07:08 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -126,4 +123,3 @@
   HS_DTRACE_PROBE_N(provider,name,((uintptr_t)a0,(uintptr_t)a1,(uintptr_t)a2,\
     (uintptr_t)a3,(uintptr_t)a4,(uintptr_t)a5,(uintptr_t)a6,(uintptr_t)a7,\
     (uintptr_t)a8,(uintptr_t)a9))
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/events.cpp openjdk/hotspot/src/share/vm/utilities/events.cpp
--- openjdk6/hotspot/src/share/vm/utilities/events.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/events.cpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)events.cpp	1.40 07/05/05 17:07:07 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -250,4 +247,3 @@
 int print_all_events(outputStream *st) { return 0; }
 
 #endif // PRODUCT
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/events.hpp openjdk/hotspot/src/share/vm/utilities/events.hpp
--- openjdk6/hotspot/src/share/vm/utilities/events.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/events.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)events.hpp	1.22 07/05/05 17:07:09 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -65,4 +62,3 @@
 };
 
 int print_all_events(outputStream *st);
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/exceptions.cpp openjdk/hotspot/src/share/vm/utilities/exceptions.cpp
--- openjdk6/hotspot/src/share/vm/utilities/exceptions.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/exceptions.cpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)exceptions.cpp	1.100 07/09/13 11:29:49 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/exceptions.hpp openjdk/hotspot/src/share/vm/utilities/exceptions.hpp
--- openjdk6/hotspot/src/share/vm/utilities/exceptions.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/exceptions.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)exceptions.hpp	1.51 07/05/05 17:07:09 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -276,5 +273,3 @@
 // exceptions.
 
 #define EXCEPTION_MARK                           Thread* THREAD; ExceptionMark __em(THREAD);
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/globalDefinitions.cpp openjdk/hotspot/src/share/vm/utilities/globalDefinitions.cpp
--- openjdk6/hotspot/src/share/vm/utilities/globalDefinitions.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/globalDefinitions.cpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)globalDefinitions.cpp	1.48 07/05/05 17:07:09 JVM"
-#endif
 /*
  * Copyright 1997-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/globalDefinitions.hpp openjdk/hotspot/src/share/vm/utilities/globalDefinitions.hpp
--- openjdk6/hotspot/src/share/vm/utilities/globalDefinitions.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/globalDefinitions.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)globalDefinitions.hpp	1.217 07/05/23 10:54:27 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/globalDefinitions_gcc.hpp openjdk/hotspot/src/share/vm/utilities/globalDefinitions_gcc.hpp
--- openjdk6/hotspot/src/share/vm/utilities/globalDefinitions_gcc.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/globalDefinitions_gcc.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)globalDefinitions_gcc.hpp	1.47 07/05/05 17:07:10 JVM"
-#endif
 /*
  * Copyright 1998-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -276,4 +273,3 @@
 # undef offsetof
 #endif
 #define offsetof(klass,field) offset_of(klass,field)
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/globalDefinitions_sparcWorks.hpp openjdk/hotspot/src/share/vm/utilities/globalDefinitions_sparcWorks.hpp
--- openjdk6/hotspot/src/share/vm/utilities/globalDefinitions_sparcWorks.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/globalDefinitions_sparcWorks.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)globalDefinitions_sparcWorks.hpp	1.80 07/05/05 17:07:10 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/globalDefinitions_visCPP.hpp openjdk/hotspot/src/share/vm/utilities/globalDefinitions_visCPP.hpp
--- openjdk6/hotspot/src/share/vm/utilities/globalDefinitions_visCPP.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/globalDefinitions_visCPP.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)globalDefinitions_visCPP.hpp	1.68 07/05/05 17:07:10 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/growableArray.cpp openjdk/hotspot/src/share/vm/utilities/growableArray.cpp
--- openjdk6/hotspot/src/share/vm/utilities/growableArray.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/growableArray.cpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)growableArray.cpp	1.37 07/05/05 17:07:10 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -54,4 +51,3 @@
     return _arena->Amalloc(elementSize * _max);
   }
 }
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/growableArray.hpp openjdk/hotspot/src/share/vm/utilities/growableArray.hpp
--- openjdk6/hotspot/src/share/vm/utilities/growableArray.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/growableArray.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)growableArray.hpp	1.55 07/05/05 17:07:09 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/hashtable.cpp openjdk/hotspot/src/share/vm/utilities/hashtable.cpp
--- openjdk6/hotspot/src/share/vm/utilities/hashtable.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/hashtable.cpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)hashtable.cpp	1.13 07/05/05 17:07:10 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/hashtable.hpp openjdk/hotspot/src/share/vm/utilities/hashtable.hpp
--- openjdk6/hotspot/src/share/vm/utilities/hashtable.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/hashtable.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)hashtable.hpp	1.14 07/05/05 17:07:10 JVM"
-#endif
 /*
  * Copyright 2003-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/hashtable.inline.hpp openjdk/hotspot/src/share/vm/utilities/hashtable.inline.hpp
--- openjdk6/hotspot/src/share/vm/utilities/hashtable.inline.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/hashtable.inline.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)hashtable.inline.hpp	1.9 07/05/05 17:07:10 JVM"
-#endif
 /*
  * Copyright 2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/histogram.cpp openjdk/hotspot/src/share/vm/utilities/histogram.cpp
--- openjdk6/hotspot/src/share/vm/utilities/histogram.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/histogram.cpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)histogram.cpp	1.21 07/05/05 17:07:09 JVM"
-#endif
 /*
  * Copyright 1998-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/histogram.hpp openjdk/hotspot/src/share/vm/utilities/histogram.hpp
--- openjdk6/hotspot/src/share/vm/utilities/histogram.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/histogram.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)histogram.hpp	1.17 07/05/05 17:07:11 JVM"
-#endif
 /*
  * Copyright 1998-2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/macros.hpp openjdk/hotspot/src/share/vm/utilities/macros.hpp
--- openjdk6/hotspot/src/share/vm/utilities/macros.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/macros.hpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)macros.hpp	1.44 07/08/29 13:42:30 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -182,4 +179,3 @@
 #define FIX_THIS(code) report_assertion_failure("FIX_THIS",__FILE__, __LINE__, "")
 
 #define define_pd_global(type, name, value) const type pd_##name = value;
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/ostream.cpp openjdk/hotspot/src/share/vm/utilities/ostream.cpp
--- openjdk6/hotspot/src/share/vm/utilities/ostream.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/ostream.cpp	2008-12-05 16:41:22.307640170 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)ostream.cpp	1.80 07/09/28 10:22:57 JVM"
-#endif
 /*
  * Copyright 1997-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/ostream.hpp openjdk/hotspot/src/share/vm/utilities/ostream.hpp
--- openjdk6/hotspot/src/share/vm/utilities/ostream.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/ostream.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)ostream.hpp	1.44 07/09/28 10:22:57 JVM"
-#endif
 /*
  * Copyright 1997-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/preserveException.cpp openjdk/hotspot/src/share/vm/utilities/preserveException.cpp
--- openjdk6/hotspot/src/share/vm/utilities/preserveException.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/preserveException.cpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)preserveException.cpp	1.21 07/05/05 17:07:11 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/preserveException.hpp openjdk/hotspot/src/share/vm/utilities/preserveException.hpp
--- openjdk6/hotspot/src/share/vm/utilities/preserveException.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/preserveException.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)preserveException.hpp	1.20 07/05/05 17:07:11 JVM"
-#endif
 /*
  * Copyright 1998-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/sizes.cpp openjdk/hotspot/src/share/vm/utilities/sizes.cpp
--- openjdk6/hotspot/src/share/vm/utilities/sizes.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/sizes.cpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)sizes.cpp	1.11 07/05/05 17:07:10 JVM"
-#endif
 /*
  * Copyright 2000 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/sizes.hpp openjdk/hotspot/src/share/vm/utilities/sizes.hpp
--- openjdk6/hotspot/src/share/vm/utilities/sizes.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/sizes.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)sizes.hpp	1.19 07/05/05 17:07:08 JVM"
-#endif
 /*
  * Copyright 2000-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -145,4 +142,3 @@
 // Use the following #define to get C++ field member offsets
 
 #define byte_offset_of(klass,field)   in_ByteSize((int)offset_of(klass, field))
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/taskqueue.cpp openjdk/hotspot/src/share/vm/utilities/taskqueue.cpp
--- openjdk6/hotspot/src/share/vm/utilities/taskqueue.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/taskqueue.cpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)taskqueue.cpp	1.21 06/08/10 17:56:51 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/taskqueue.hpp openjdk/hotspot/src/share/vm/utilities/taskqueue.hpp
--- openjdk6/hotspot/src/share/vm/utilities/taskqueue.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/taskqueue.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)taskqueue.hpp	1.33 06/08/10 17:56:52 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/top.hpp openjdk/hotspot/src/share/vm/utilities/top.hpp
--- openjdk6/hotspot/src/share/vm/utilities/top.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/top.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)top.hpp	1.16 07/05/05 17:07:11 JVM"
-#endif
 /*
  * Copyright 1997 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/utf8.cpp openjdk/hotspot/src/share/vm/utilities/utf8.cpp
--- openjdk6/hotspot/src/share/vm/utilities/utf8.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/utf8.cpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)utf8.cpp	1.30 07/05/05 17:07:07 JVM"
-#endif
 /*
  * Copyright 1997-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -245,6 +242,3 @@
   }
   *utf8_buffer = '\0';
 }
-
-
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/utf8.hpp openjdk/hotspot/src/share/vm/utilities/utf8.hpp
--- openjdk6/hotspot/src/share/vm/utilities/utf8.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/utf8.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)utf8.hpp	1.22 07/05/05 17:07:11 JVM"
-#endif
 /*
  * Copyright 1997-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/vmError.cpp openjdk/hotspot/src/share/vm/utilities/vmError.cpp
--- openjdk6/hotspot/src/share/vm/utilities/vmError.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/vmError.cpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmError.cpp	1.34 07/09/13 20:51:49 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/vmError.hpp openjdk/hotspot/src/share/vm/utilities/vmError.hpp
--- openjdk6/hotspot/src/share/vm/utilities/vmError.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/vmError.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)vmError.hpp	1.18 07/07/19 19:18:33 JVM"
-#endif
 /*
  * Copyright 2003-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -104,4 +101,3 @@
   // signal was not changed by error reporter
   static address get_resetted_sighandler(int sig);
 };
-
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/workgroup.cpp openjdk/hotspot/src/share/vm/utilities/workgroup.cpp
--- openjdk6/hotspot/src/share/vm/utilities/workgroup.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/workgroup.cpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)workgroup.cpp	1.36 07/05/05 17:07:11 JVM"
-#endif
 /*
  * Copyright 2001-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/workgroup.hpp openjdk/hotspot/src/share/vm/utilities/workgroup.hpp
--- openjdk6/hotspot/src/share/vm/utilities/workgroup.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/workgroup.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)workgroup.hpp	1.22 07/05/05 17:07:11 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/xmlstream.cpp openjdk/hotspot/src/share/vm/utilities/xmlstream.cpp
--- openjdk6/hotspot/src/share/vm/utilities/xmlstream.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/xmlstream.cpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)xmlstream.cpp	1.17 07/05/05 17:07:12 JVM"
-#endif
 /*
  * Copyright 2002-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/xmlstream.hpp openjdk/hotspot/src/share/vm/utilities/xmlstream.hpp
--- openjdk6/hotspot/src/share/vm/utilities/xmlstream.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/xmlstream.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)xmlstream.hpp	1.12 07/05/05 17:07:11 JVM"
-#endif
 /*
  * Copyright 2002-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/yieldingWorkgroup.cpp openjdk/hotspot/src/share/vm/utilities/yieldingWorkgroup.cpp
--- openjdk6/hotspot/src/share/vm/utilities/yieldingWorkgroup.cpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/yieldingWorkgroup.cpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)yieldingWorkgroup.cpp	1.11 07/05/05 17:07:11 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/share/vm/utilities/yieldingWorkgroup.hpp openjdk/hotspot/src/share/vm/utilities/yieldingWorkgroup.hpp
--- openjdk6/hotspot/src/share/vm/utilities/yieldingWorkgroup.hpp	2008-11-25 10:12:14.000000000 +0100
+++ openjdk/hotspot/src/share/vm/utilities/yieldingWorkgroup.hpp	2008-12-05 16:41:22.317640321 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)yieldingWorkgroup.hpp	1.10 07/05/05 17:07:12 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/attachListener_linux.cpp openjdk/hotspot/src/os/linux/vm/attachListener_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/attachListener_linux.cpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/attachListener_linux.cpp	2008-12-05 16:41:21.637630063 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)attachListener_linux.cpp	1.14 07/05/05 17:04:34 JVM"
-#endif
 /*
  * Copyright 2005-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/c1_globals_linux.hpp openjdk/hotspot/src/os/linux/vm/c1_globals_linux.hpp
--- openjdk6/hotspot/src/os/linux/vm/c1_globals_linux.hpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/c1_globals_linux.hpp	2008-12-05 16:41:21.637630063 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c1_globals_linux.hpp	1.12 07/05/05 17:04:35 JVM"
-#endif
 /*
  * Copyright 2000-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/c2_globals_linux.hpp openjdk/hotspot/src/os/linux/vm/c2_globals_linux.hpp
--- openjdk6/hotspot/src/os/linux/vm/c2_globals_linux.hpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/c2_globals_linux.hpp	2008-12-05 16:41:21.637630063 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)c2_globals_linux.hpp	1.12 07/05/05 17:04:35 JVM"
-#endif
 /*
  * Copyright 2000-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/chaitin_linux.cpp openjdk/hotspot/src/os/linux/vm/chaitin_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/chaitin_linux.cpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/chaitin_linux.cpp	2008-12-05 16:41:21.637630063 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)chaitin_linux.cpp	1.11 07/05/05 17:04:35 JVM"
-#endif
 /*
  * Copyright 1999-2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/globals_linux.hpp openjdk/hotspot/src/os/linux/vm/globals_linux.hpp
--- openjdk6/hotspot/src/os/linux/vm/globals_linux.hpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/globals_linux.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)globals_linux.hpp	1.12 07/05/05 17:04:35 JVM"
-#endif
 /*
  * Copyright 2005-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/hpi_linux.cpp openjdk/hotspot/src/os/linux/vm/hpi_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/hpi_linux.cpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/hpi_linux.cpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)hpi_linux.cpp	1.16 07/05/05 17:04:35 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/hpi_linux.hpp openjdk/hotspot/src/os/linux/vm/hpi_linux.hpp
--- openjdk6/hotspot/src/os/linux/vm/hpi_linux.hpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/hpi_linux.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)hpi_linux.hpp	1.18 07/05/05 17:04:34 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/interfaceSupport_linux.hpp openjdk/hotspot/src/os/linux/vm/interfaceSupport_linux.hpp
--- openjdk6/hotspot/src/os/linux/vm/interfaceSupport_linux.hpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/interfaceSupport_linux.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)interfaceSupport_linux.hpp	1.6 07/05/05 17:04:35 JVM"
-#endif
 /*
  * Copyright 2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -30,4 +27,3 @@
 static inline void serialize_memory(JavaThread *thread) {
   os::write_memory_serialize_page(thread);
 }
-
diff -ruNb openjdk6/hotspot/src/os/linux/vm/jsig.c openjdk/hotspot/src/os/linux/vm/jsig.c
--- openjdk6/hotspot/src/os/linux/vm/jsig.c	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/jsig.c	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jsig.c	1.12 07/05/05 17:04:34 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/jvm_linux.cpp openjdk/hotspot/src/os/linux/vm/jvm_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/jvm_linux.cpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/jvm_linux.cpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)jvm_linux.cpp	1.23 08/11/24 12:19:38 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -135,7 +132,7 @@
 */
 
 struct siglabel {
-  const char *name;
+  char *name;
   int   number;
 };
 
diff -ruNb openjdk6/hotspot/src/os/linux/vm/jvm_linux.h openjdk/hotspot/src/os/linux/vm/jvm_linux.h
--- openjdk6/hotspot/src/os/linux/vm/jvm_linux.h	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/jvm_linux.h	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)jvm_linux.h	1.15 07/05/05 17:04:35 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/mutex_linux.cpp openjdk/hotspot/src/os/linux/vm/mutex_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/mutex_linux.cpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/mutex_linux.cpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)mutex_linux.cpp	1.49 07/06/29 03:58:25 JVM"
-#endif
 /*
  * Copyright (c) 2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -30,6 +27,3 @@
 
 // put OS-includes here
 # include <signal.h>
-
-
-
diff -ruNb openjdk6/hotspot/src/os/linux/vm/mutex_linux.inline.hpp openjdk/hotspot/src/os/linux/vm/mutex_linux.inline.hpp
--- openjdk6/hotspot/src/os/linux/vm/mutex_linux.inline.hpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/mutex_linux.inline.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)mutex_linux.inline.hpp	1.13 07/06/29 03:59:51 JVM"
-#endif
 /*
  * Copyright 1999-2002 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/objectMonitor_linux.cpp openjdk/hotspot/src/os/linux/vm/objectMonitor_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/objectMonitor_linux.cpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/objectMonitor_linux.cpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)objectMonitor_linux.cpp	1.69 07/05/05 17:04:36 JVM"
-#endif
 
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
@@ -25,4 +22,3 @@
  * have any questions.
  *  
  */
-
diff -ruNb openjdk6/hotspot/src/os/linux/vm/objectMonitor_linux.hpp openjdk/hotspot/src/os/linux/vm/objectMonitor_linux.hpp
--- openjdk6/hotspot/src/os/linux/vm/objectMonitor_linux.hpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/objectMonitor_linux.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)objectMonitor_linux.hpp	1.18 07/05/05 17:04:36 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -26,4 +23,3 @@
  */
 
  private:
-
diff -ruNb openjdk6/hotspot/src/os/linux/vm/objectMonitor_linux.inline.hpp openjdk/hotspot/src/os/linux/vm/objectMonitor_linux.inline.hpp
--- openjdk6/hotspot/src/os/linux/vm/objectMonitor_linux.inline.hpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/objectMonitor_linux.inline.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)objectMonitor_linux.inline.hpp	1.14 07/05/05 17:04:36 JVM"
-#endif
 /*
  * Copyright 1999-2005 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -24,4 +21,3 @@
  * have any questions.
  *  
  */
-
diff -ruNb openjdk6/hotspot/src/os/linux/vm/osThread_linux.cpp openjdk/hotspot/src/os/linux/vm/osThread_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/osThread_linux.cpp	2008-11-25 10:12:01.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/osThread_linux.cpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)osThread_linux.cpp	1.25 07/06/29 04:00:16 JVM"
-#endif
 /*
  * Copyright 1999-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/osThread_linux.hpp openjdk/hotspot/src/os/linux/vm/osThread_linux.hpp
--- openjdk6/hotspot/src/os/linux/vm/osThread_linux.hpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/osThread_linux.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)osThread_linux.hpp	1.39 07/06/29 21:53:15 JVM"
-#endif
 /*
  * Copyright 1999-2004 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/os_linux.cpp openjdk/hotspot/src/os/linux/vm/os_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/os_linux.cpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/os_linux.cpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)os_linux.cpp	1.259 08/11/24 12:20:22 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -78,8 +75,8 @@
 bool os::Linux::_is_floating_stack = false;
 bool os::Linux::_is_NPTL = false;
 bool os::Linux::_supports_fast_thread_cpu_time = false;
-const char * os::Linux::_glibc_version = NULL;
-const char * os::Linux::_libpthread_version = NULL;
+char * os::Linux::_glibc_version = NULL;
+char * os::Linux::_libpthread_version = NULL;
 
 static jlong initial_time_count=0;
 
@@ -119,20 +116,6 @@
   return Linux::physical_memory();
 }
 
-julong os::allocatable_physical_memory(julong size) {
-#ifdef _LP64
-  return size;
-#else
-  julong result = MIN2(size, (julong)3800*M);
-   if (!is_allocatable(result)) {
-     // See comments under solaris for alignment considerations
-     julong reasonable_size = (julong)2*G - 2 * os::vm_page_size();
-     result =  MIN2(size, reasonable_size);
-   }
-   return result;
-#endif // _LP64
-}
-
 ////////////////////////////////////////////////////////////////////////////////
 // environment support
 
@@ -216,7 +199,7 @@
 // the system call returns 1.  This causes the VM to act as if it is
 // a single processor and elide locking (see is_MP() call).
 static bool unsafe_chroot_detected = false;
-static const char *unstable_chroot_error = "/proc file system not found.\n"
+static char *unstable_chroot_error = "/proc file system not found.\n"
                     "Java may be unstable running multithreaded in a chroot "
                     "environment on Linux when /proc filesystem is not mounted.";
 
@@ -550,18 +533,20 @@
 
      // Vanilla RH-9 (glibc 2.3.2) has a bug that confstr() always tells
      // us "NPTL-0.29" even we are running with LinuxThreads. Check if this
-     // is the case. LinuxThreads has a hard limit on max number of threads. 
-     // So sysconf(_SC_THREAD_THREADS_MAX) will return a positive value.
-     // On the other hand, NPTL does not have such a limit, sysconf()
-     // will return -1 and errno is not changed. Check if it is really NPTL.
+     // is the case:
      if (strcmp(os::Linux::glibc_version(), "glibc 2.3.2") == 0 &&
-         strstr(str, "NPTL") && 
-         sysconf(_SC_THREAD_THREADS_MAX) > 0) {
+         strstr(str, "NPTL")) {
+        // LinuxThreads has a hard limit on max number of threads. So
+        // sysconf(_SC_THREAD_THREADS_MAX) will return a positive value.
+        // On the other hand, NPTL does not have such a limit, sysconf()
+        // will return -1 and errno is not changed. Check if it is really
+        // NPTL:
+        if (sysconf(_SC_THREAD_THREADS_MAX) > 0) {
        free(str);
-       os::Linux::set_libpthread_version("linuxthreads");
-     } else {
-       os::Linux::set_libpthread_version(str);
+           str = "linuxthreads";
+        }
      } 
+     os::Linux::set_libpthread_version(str);
   } else {
     // glibc before 2.3.2 only has LinuxThreads.
     os::Linux::set_libpthread_version("linuxthreads");
@@ -4541,7 +4526,11 @@
 // Unlike system(), this function can be called from signal handler. It
 // doesn't block SIGINT et al.
 int os::fork_and_exec(char* cmd) {
-  const char * argv[4] = {"sh", "-c", cmd, NULL};
+  char * argv[4];
+  argv[0] = "sh";
+  argv[1] = "-c";
+  argv[2] = cmd;
+  argv[3] = NULL;
   
   // fork() in LinuxThreads/NPTL is not async-safe. It needs to run 
   // pthread_atfork handlers and reset pthread library. All we need is a 
@@ -4566,7 +4555,7 @@
     // IA64 should use normal execve() from glibc to match the glibc fork() 
     // above.
     NOT_IA64(syscall(__NR_execve, "/bin/sh", argv, environ);)
-    IA64_ONLY(execve("/bin/sh", (char* const*)argv, environ);)
+    IA64_ONLY(execve("/bin/sh", argv, environ);)
 
     // execve failed
     _exit(-1);
diff -ruNb openjdk6/hotspot/src/os/linux/vm/os_linux.hpp openjdk/hotspot/src/os/linux/vm/os_linux.hpp
--- openjdk6/hotspot/src/os/linux/vm/os_linux.hpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/os_linux.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)os_linux.hpp	1.72 08/11/24 12:20:24 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -55,8 +52,8 @@
   static address   _initial_thread_stack_bottom;
   static uintptr_t _initial_thread_stack_size;
 
-  static const char *_glibc_version;
-  static const char *_libpthread_version;
+  static char *_glibc_version;
+  static char *_libpthread_version;
 
   static bool _is_floating_stack;
   static bool _is_NPTL;
@@ -73,8 +70,8 @@
   static julong physical_memory() { return _physical_memory; }
   static void initialize_system_info();
 
-  static void set_glibc_version(const char *s)      { _glibc_version = s; }
-  static void set_libpthread_version(const char *s) { _libpthread_version = s; }
+  static void set_glibc_version(char *s)      { _glibc_version = s; }
+  static void set_libpthread_version(char *s) { _libpthread_version = s; }
 
   static bool supports_variable_stack_size();
 
@@ -134,8 +131,8 @@
   static bool chained_handler(int sig, siginfo_t* siginfo, void* context);
 
   // GNU libc and libpthread version strings
-  static const char *glibc_version()          { return _glibc_version; }
-  static const char *libpthread_version()     { return _libpthread_version; }
+  static char *glibc_version()                { return _glibc_version; }
+  static char *libpthread_version()           { return _libpthread_version; }
 
   // NPTL or LinuxThreads?
   static bool is_LinuxThreads()               { return !_is_NPTL; }
diff -ruNb openjdk6/hotspot/src/os/linux/vm/os_linux.inline.hpp openjdk/hotspot/src/os/linux/vm/os_linux.inline.hpp
--- openjdk6/hotspot/src/os/linux/vm/os_linux.inline.hpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/os_linux.inline.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)os_linux.inline.hpp	1.31 07/06/29 04:01:54 JVM"
-#endif
 /*
  * Copyright 1999-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/os_share_linux.hpp openjdk/hotspot/src/os/linux/vm/os_share_linux.hpp
--- openjdk6/hotspot/src/os/linux/vm/os_share_linux.hpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/os_share_linux.hpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)os_share_linux.hpp	1.11 07/05/05 17:04:36 JVM"
-#endif
 /*
  * Copyright 1999-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/perfMemory_linux.cpp openjdk/hotspot/src/os/linux/vm/perfMemory_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/perfMemory_linux.cpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/perfMemory_linux.cpp	2008-12-05 16:41:21.647630214 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)perfMemory_linux.cpp	1.31 07/09/13 11:29:50 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -1012,4 +1009,3 @@
 char* PerfMemory::backing_store_filename() {
   return backing_store_file_name;
 }
-
diff -ruNb openjdk6/hotspot/src/os/linux/vm/stubRoutines_linux.cpp openjdk/hotspot/src/os/linux/vm/stubRoutines_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/stubRoutines_linux.cpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/stubRoutines_linux.cpp	2008-12-05 16:41:21.657630365 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)stubRoutines_linux.cpp	1.10 07/05/05 17:04:36 JVM"
-#endif
 /*
  * Copyright 2001 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/threadCritical_linux.cpp openjdk/hotspot/src/os/linux/vm/threadCritical_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/threadCritical_linux.cpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/threadCritical_linux.cpp	2008-12-05 16:41:21.657630365 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)threadCritical_linux.cpp	1.16 07/05/05 17:04:37 JVM"
-#endif
 /*
  * Copyright 2001-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
@@ -67,4 +64,3 @@
     guarantee(ret == 0, "fatal error with pthread_mutex_unlock()");
   }
 }
-
diff -ruNb openjdk6/hotspot/src/os/linux/vm/thread_linux.inline.hpp openjdk/hotspot/src/os/linux/vm/thread_linux.inline.hpp
--- openjdk6/hotspot/src/os/linux/vm/thread_linux.inline.hpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/thread_linux.inline.hpp	2008-12-05 16:41:21.657630365 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_HDR
-#pragma ident "@(#)thread_linux.inline.hpp	1.10 07/05/05 17:04:37 JVM"
-#endif
 /*
  * Copyright 2002-2003 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/vmError_linux.cpp openjdk/hotspot/src/os/linux/vm/vmError_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/vmError_linux.cpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/vmError_linux.cpp	2008-12-05 16:41:21.657630365 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vmError_linux.cpp	1.15 08/11/24 12:20:39 JVM"
-#endif
 /*
  * Copyright 2003-2006 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
diff -ruNb openjdk6/hotspot/src/os/linux/vm/vtune_linux.cpp openjdk/hotspot/src/os/linux/vm/vtune_linux.cpp
--- openjdk6/hotspot/src/os/linux/vm/vtune_linux.cpp	2008-11-25 10:12:02.000000000 +0100
+++ openjdk/hotspot/src/os/linux/vm/vtune_linux.cpp	2008-12-05 16:41:21.657630365 +0100
@@ -1,6 +1,3 @@
-#ifdef USE_PRAGMA_IDENT_SRC
-#pragma ident "@(#)vtune_linux.cpp	1.12 07/05/05 17:04:35 JVM"
-#endif
 /*
  * Copyright 1999-2007 Sun Microsystems, Inc.  All Rights Reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
