Building IcedTea6
=================

For convenience we've provided make targets that automatically
download, extract and patch the source code from openjdk.java.net, in
a default location.

The build requirements are as follows:

GNU libgcj 4.3.0 (or equivalent 1.5 class library, such as GNU Classpath >= 0.95)
Eclipse Java Compiler
CUPS
libX11 (libXp, libXtst, libXi, libXt)
Freetype2
patch
sed
tar
md5sum
wget
alsa
xalan
xerces
firefox-devel 
glib2-devel 
gtk2-devel
ant >= 1.6.5
libXinerama-devel
giflib-devel
libpng-devel
libjpeg-devel = 6b
zlib-devel
rhino (can be disabled using --without-rhino)

For building the PulseAudio based mixer, you will need
pulseaudio-libs-devel >= 0.9.11
pulseaudio >= 0.9.11

For building VisualVM, you will need
netbeans = 6.5

For building the zero-assembler port (see below), you will need libffi.

See ./configure --help if you need to override the defaults.

To bootstrap IcedTea with ecj:
autoreconf
./configure 
make

To build IcedTea with an older version of IcedTea, use:
autoreconf
./configure --with-icedtea 
	[default location: /usr/lib/jvm/java-icedtea, 
		to specifiy location use --with-icedtea-home=/path/to/icedtea]
make

There is currently no install target.

IcedTea ends up in openjdk/control/build/<os>-<arch> when the build completes.
Example instantiations of <os>-<arch> include linux-i586, linux-amd64 and linux-ppc64.

Rebuilding The IcedTea Plugs
----------------------------

When IcedTea is initially built, it creates stamp files in the stamps directory
to determine what and when dependencies were compiled. For example, to rebuild 
the rt plugs certain files need to be deleted before restarting the build.

 - If the rt plugs have been modified, delete stamps/rt-class-files.stamp.
 - If a new class has been added to the rt plugs, delete
 rt-source-files.txt  so it can be recreated with the new class list.

To view all targets that create stamp files, see 
Makefile.am (section 'All Stamped Targets').

The Zero Assembler Port
-----------------------

Gary Benson has developed a port of the interpreter included in the
HotSpot virtual machine which avoids using any assembly language.  As
a pure C++ interpreter, it should be possible to build this on most
architectures and have a working (albeit slow) version of OpenJDK.
Successful builds have been made on ppc, ppc64 and arm.  The zero
assembler port is enabled by default on platforms other than x86,
x86_64 and sparc.  To enable it on these platforms, use the
--enable-zero option.

Gary is now working on a JIT called Shark to provide better
performance on platforms which need to use the zero port. A
preliminary version of this is now included with IcedTea and can be
built with the --enable-shark option.

CACAO
-----

The CACAO virtual machine (http://cacaovm.org) can be used as an
alternative to the HotSpot virtual machine. One advantage of this is
that it already provides a JIT for many platforms to which HotSpot has
not yet been ported, including ppc, ppc64, arm and mips.  To use CACAO
as the VM, use the --with-cacao option.  This will download CACAO
0.99.3 during the build.  To use a different version, use
--with-cacao-home=<dir> to point to an existing installation which use
the Sun VM interface.

